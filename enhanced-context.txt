# PROJECT STRUCTURE
```
tree is not installed, but available in the following packages, pick one to run it, Ctrl+C to cancel.
```

# FILE CONTENTS

## src/lib/api.ts
```typescript
import { cached } from './cache';
import { FALLBACK_MARKET_DATA } from './fallback-data'; // We will create this next
import type { CoinMarketData, NewsArticle, DeFiProtocol } from './types';

const COINGECKO_BASE = 'https://api.coingecko.com/api/v3';
const DEFILLAMA_BASE = 'https://api.llama.fi';
const NEWS_API = 'https://min-api.cryptocompare.com/data/v2/news/?lang=EN';

// Safe Fetch with Timeout and Logging
async function safeFetch<T = any>(url: string, ttl = 60): Promise<T | null> {
  try {
    const controller = new AbortController();
    const timeoutId = setTimeout(() => controller.abort(), 5000);
    const res = await fetch(url, { signal: controller.signal, next: { revalidate: ttl } });
    clearTimeout(timeoutId);
    if (!res.ok) return null;
    return await res.json();
  } catch (e) {
    console.warn(`[API Fail] ${url}`);
    return null;
  }
}

// 1. Live Prices
export async function getLivePrices(currency = 'usd', category = 'all') {
  return cached(`prices:${currency}:${category}`, async () => {
    let url = `${COINGECKO_BASE}/coins/markets?vs_currency=${currency}&order=market_cap_desc&per_page=50&sparkline=true&price_change_percentage=1h,24h,7d`;
    if (category !== 'all') url += `&category=${category.toLowerCase().replace(/\s+/g, '-')}`;
    
    const data = await safeFetch<CoinMarketData[]>(url);
    return Array.isArray(data) ? data : FALLBACK_MARKET_DATA;
  }, 60);
}

// 2. News
export async function getRealNews() {
  return cached('news:latest', async () => {
    const data = await safeFetch(NEWS_API, 300);
    if (data?.Data) {
      return data.Data.slice(0, 15).map((a: any) => ({
        id: String(a.id),
        title: a.title,
        body: a.body || "",
        image: a.imageurl,
        source: a.source_info.name,
        published_on: a.published_on,
        url: a.url,
        categories: a.categories
      }));
    }
    return [];
  }, 300);
}

// 3. DeFi Protocols
export async function getDeFiProtocols() {
  return cached('defi:protocols', async () => {
    const data = await safeFetch<DeFiProtocol[]>(`${DEFILLAMA_BASE}/protocols`, 600);
    return Array.isArray(data) ? data.slice(0, 20) : [];
  }, 600);
}

// 4. Dex Volume
export async function getDexVolume() {
  return cached('defi:dex-volume', async () => {
    const data = await safeFetch('https://api.llama.fi/overview/dexs?excludeTotalVolumeChart=false', 3600);
    return data?.totalVolumeChart?.slice(-30).map((d: any) => ({
      date: new Date(d[0] * 1000).toLocaleDateString('en-US', { month: 'short', day: 'numeric' }),
      volume: d[1]
    })) || [];
  }, 3600);
}

// 5. Stablecoins
export async function getStablecoinData() {
  return cached('defi:stables', async () => {
    const data = await safeFetch('https://stablecoins.llama.fi/stablecoincharts/all', 3600);
    return data?.slice(-30).map((d: any) => ({
      date: new Date(d.date * 1000).toLocaleDateString('en-US', { month: 'short', day: 'numeric' }),
      mcap: d.totalCirculating.peggedUSD
    })) || [];
  }, 3600);
}

export { FALLBACK_MARKET_DATA };
```

## src/lib/categories.ts
```typescript
export const CRYPTO_CATEGORIES = [
  "All Coins",
  "Solana Ecosystem",
  "Stablecoins",
  "Meme Token",
  "Layer 1",
  "Smart Contract Platform",
  "DeFi",
  "Fantom Ecosystem",
  "DragonFly Capital Portfolio",
  "Move VM",
  "Fabric Ventures Portfolio",
  "BoostVC Portfolio",
  "Arrington XRP Capital Portfolio",
  "Analytics",
  "TRON Ecosystem",
  "Filesharing",
  "DePIN",
  "Four Meme Ecosystem",
  "Loyalty",
  "DeFiance Capital Portfolio",
  "Hybrid token standard",
  "HECO Ecosystem",
  "Identity",
  "Animoca Brands Portfolio",
  "Binance Smart Chain",
  "Celo Ecosystem",
  "Music",
  "Lending Borrowing",
  "Oracles",
  "Seedify",
  "Privacy",
  "Fenbushi Capital Portfolio",
  "DEX",
  "Parallel EVM",
  "Polkastarter",
  "Standard Crypto Portfolio",
  "MultiversX Ecosystem",
  "Interoperability",
  "Gaming Guild",
  "Mobile Mining",
  "EigenLayer Ecosystem",
  "DAO",
  "Cat-Themed",
  "Inscriptions",
  "IoT",
  "Terra Ecosystem",
  "Arbitrum Ecosystem",
  "Internet Computer Ecosystem",
  "eGirl Capital Portfolio",
  "Generative AI",
  "Bitcoin Ecosystem",
  "Bittensor Ecosystem",
  "Osmosis Ecosystem",
  "Sonic Ecosystem",
  "YZi Labs Portfolio",
  "TokenFi Launchpad",
  "Olympus Pro Ecosystem",
  "CMS Holdings Portfolio",
  "BTCfi",
  "Tokenized Assets",
  "Play To Earn",
  "Polygon Ecosystem",
  "Oasis Ecosystem",
  "Injective Ecosystem",
  "Near Protocol Ecosystem",
  "Binance Launchpad",
  "Real World Assets",
  "Moonshot",
  "Polkadot Ecosystem",
  "Research",
  "Algorithmic Stablecoin",
  "Liquid Staking Derivatives",
  "Toncoin Ecosystem",
  "Ethereum Ecosystem",
  "Circle Ventures Portfolio",
  "Blockchain Capital Portfolio",
  "Cardano Ecosystem",
  "Smart Contracts",
  "Tokenized Gold",
  "Gaming",
  "Entertainment",
  "Derivatives",
  "Framework Ventures Portfolio",
  "AI Memes",
  "MetisDAO Ecosystem",
  "Rollups-as-a-Service",
  "Coinfund Portfolio",
  "DeSci",
  "XDC Ecosystem",
  "Centralized Exchange Token",
  "Content Creation",
  "Celebrity Memes",
  "DCG Portfolio",
  "Zero Knowledge Proofs",
  "Tap To Earn",
  "Data Availability",
  "Video",
  "Tokenized commodities",
  "AI Agents",
  "SEI Ecosystem",
  "BRC-20",
  "Restaking",
  "Hyperliquid Ecosystem",
  "Scaling",
  "Account Abstraction",
  "Animal Memes",
  "Electric Global Portfolio",
  "PetRock Capital Portfolio",
  "DeFAI",
  "Optimism Ecosystem",
  "Metaverse",
  "Synthetics",
  "Runes",
  "Prediction Markets",
  "Sharing Economy",
  "Aptos Ecosystem",
  "SUI Ecosystem",
  "Blast Ecosystem",
  "Tezos Ecosystem",
  "Masternodes",
  "Modular Blockchain",
  "Avalanche Ecosystem"
];
```

## src/lib/cache.ts
```typescript
interface CacheEntry<T> {
  data: T;
  expiresAt: number;
}

const store = new Map<string, CacheEntry<unknown>>();
const MAX_ENTRIES = 200;

export async function cached<T>(
  key: string,
  fn: () => Promise<T>,
  ttlSeconds = 300
): Promise<T> {
  const existing = store.get(key) as CacheEntry<T> | undefined;

  if (existing && Date.now() < existing.expiresAt) {
    return existing.data;
  }

  try {
    const data = await fn();
    
    // Evict oldest if full
    if (store.size >= MAX_ENTRIES) {
      const firstKey = store.keys().next().value;
      if (firstKey) store.delete(firstKey);
    }

    store.set(key, {
      data,
      expiresAt: Date.now() + ttlSeconds * 1000,
    });

    return data;
  } catch (error) {
    console.error(`Cache fetch failed for ${key}`, error);
    throw error;
  }
}
```

## src/lib/types.ts
```typescript
export interface CoinMarketData {
  id: string;
  rank: number;
  name: string;
  symbol: string;
  image: string;
  current_price: number;
  price_change_percentage_24h: number;
  price_change_percentage_1h_in_currency: number;
  price_change_percentage_7d_in_currency: number;
  market_cap: number;
  total_volume: number;
  sparkline_in_7d: { price: number[] };
}

export interface NewsArticle {
  id: string;
  title: string;
  body: string;
  image: string;
  url: string;
  source: string;
  published_on: number;
  categories?: string;
}

export interface DeFiProtocol {
  name: string;
  chain: string;
  category: string;
  tvl: number;
  change_1d: number;
}
```

## src/lib/fallback-data.ts
```typescript
export const FALLBACK_MARKET_DATA = [
  { id: 'bitcoin', rank: 1, name: 'Bitcoin', symbol: 'btc', image: 'https://assets.coingecko.com/coins/images/1/large/bitcoin.png', current_price: 76038, price_change_percentage_24h: -2.86, price_change_percentage_1h_in_currency: -0.1, price_change_percentage_7d_in_currency: 12.5, market_cap: 1500000000000, total_volume: 45000000000, sparkline_in_7d: { price: Array(20).fill(76000) } },
  { id: 'ethereum', rank: 2, name: 'Ethereum', symbol: 'eth', image: 'https://assets.coingecko.com/coins/images/279/large/ethereum.png', current_price: 2890, price_change_percentage_24h: -1.20, price_change_percentage_1h_in_currency: 0.2, price_change_percentage_7d_in_currency: 5.4, market_cap: 350000000000, total_volume: 15000000000, sparkline_in_7d: { price: Array(20).fill(2800) } },
];
```

## src/lib/supabase.ts
```typescript
import { createClient } from '@supabase/supabase-js';

const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;
const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;

if (!supabaseUrl || !supabaseAnonKey) {
  console.warn('Supabase credentials missing. Auth will not work.');
}

export const supabase = createClient(
  supabaseUrl || 'https://placeholder.supabase.co',
  supabaseAnonKey || 'placeholder'
);
```

## src/lib/redis.ts
```typescript
export async function getCachedData(key: string, fetchFn: () => Promise<any>, ttl = 60): Promise<any> {
  return await fetchFn();
}
```

## src/lib/supabase-client.ts
```typescript
import { createClient } from '@supabase/supabase-js';

const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;
const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;

export const supabase = createClient(supabaseUrl, supabaseAnonKey);
```

## src/app/homepage/components/HeroCarousel.tsx
```typescript
'use client';

import React, { useState, useEffect } from 'react';
import Link from 'next/link';
import AppImage from '@/components/ui/AppImage';
import Icon from '@/components/ui/AppIcon';

interface CarouselSlide {
  id: string;
  headline: string;
  summary: string;
  image: string;
  alt: string;
  category: string;
  articleUrl: string;
}

interface HeroCarouselProps {
  slides: CarouselSlide[];
}

const HeroCarousel = ({ slides }: HeroCarouselProps) => {
  const [currentSlide, setCurrentSlide] = useState(0);
  const [isHydrated, setIsHydrated] = useState(false);

  useEffect(() => {
    setIsHydrated(true);
  }, []);

  useEffect(() => {
    if (!isHydrated) return;

    const interval = setInterval(() => {
      setCurrentSlide((prev) => (prev + 1) % slides.length);
    }, 5000);

    return () => clearInterval(interval);
  }, [isHydrated, slides.length]);

  const handlePrevious = () => {
    setCurrentSlide((prev) => (prev - 1 + slides.length) % slides.length);
  };

  const handleNext = () => {
    setCurrentSlide((prev) => (prev + 1) % slides.length);
  };

  const handleDotClick = (index: number) => {
    setCurrentSlide(index);
  };

  if (!isHydrated) {
    return (
      <div className="relative w-full h-[500px] bg-card">
        <div className="absolute inset-0 flex items-center justify-center">
          <div className="text-muted-foreground font-caption">Loading...</div>
        </div>
      </div>
    );
  }

  return (
    <div className="relative w-full h-[500px] bg-card overflow-hidden">
      {slides.map((slide, index) => (
        <div
          key={slide.id}
          className={`absolute inset-0 transition-opacity duration-500 ${
            index === currentSlide ? 'opacity-100' : 'opacity-0'
          }`}
        >
          <Link href={slide.articleUrl} className="block h-full">
            <div className="relative h-full">
              <AppImage
                src={slide.image}
                alt={slide.alt}
                fill
                className="object-cover"
                priority={index === 0}
              />
              <div className="absolute inset-0 bg-gradient-to-t from-black via-black/50 to-transparent" />
              <div className="absolute bottom-0 left-0 right-0 p-8 lg:p-12">
                <div className="max-w-4xl">
                  <span className="inline-block px-4 py-2 bg-primary text-primary-foreground text-sm font-bold font-caption mb-4">
                    {slide.category}
                  </span>
                  <h2 className="text-3xl lg:text-5xl font-bold text-white mb-4 font-heading">
                    {slide.headline}
                  </h2>
                  <p className="text-lg text-white/90 line-clamp-2">
                    {slide.summary}
                  </p>
                </div>
              </div>
            </div>
          </Link>
        </div>
      ))}

      {/* Navigation Buttons */}
      <button
        onClick={handlePrevious}
        className="absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 flex items-center justify-center bg-black/50 hover:bg-black/70 text-white transition-smooth"
        aria-label="Previous slide"
      >
        <Icon name="ChevronLeftIcon" size={24} />
      </button>

      <button
        onClick={handleNext}
        className="absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 flex items-center justify-center bg-black/50 hover:bg-black/70 text-white transition-smooth"
        aria-label="Next slide"
      >
        <Icon name="ChevronRightIcon" size={24} />
      </button>

      {/* Dots Indicator */}
      <div className="absolute bottom-4 left-1/2 -translate-x-1/2 flex items-center gap-2">
        {slides.map((_, index) => (
          <button
            key={index}
            onClick={() => handleDotClick(index)}
            className={`w-3 h-3 transition-smooth ${
              index === currentSlide ? 'bg-primary' : 'bg-white/50 hover:bg-white/70'
            }`}
            aria-label={`Go to slide ${index + 1}`}
          />
        ))}
      </div>
    </div>
  );
};

export default HeroCarousel;
```

## src/app/homepage/components/HomepageInteractive.tsx
```typescript
'use client';

import React from 'react';
import HeroCarousel from './HeroCarousel';
import NewsCard from './NewsCard';
import TrendingStories from './TrendingStories';

interface CarouselSlide {
  id: string;
  headline: string;
  summary: string;
  image: string;
  alt: string;
  category: string;
  articleUrl: string;
}

interface NewsArticle {
  id: string;
  thumbnail: string;
  alt: string;
  headline: string;
  excerpt: string;
  category: string;
  timestamp: string;
  articleUrl: string;
}

interface TrendingStory {
  id: string;
  headline: string;
  category: string;
  articleUrl: string;
  isHot: boolean;
}

interface HomepageInteractiveProps {
  carouselSlides: CarouselSlide[];
  newsArticles: NewsArticle[];
  trendingStories: TrendingStory[];
}

const HomepageInteractive = ({
  carouselSlides,
  newsArticles,
  trendingStories,
}: HomepageInteractiveProps) => {
  return (
    <div className="min-h-screen bg-background">
      {/* Hero Carousel */}
      <section className="mb-8">
        <HeroCarousel slides={carouselSlides} />
      </section>

      {/* Main Content Grid */}
      <div className="container mx-auto px-4 lg:px-8">
        <div className="grid grid-cols-1 lg:grid-cols-12 gap-8">
          {/* News Masonry Grid */}
          <div className="lg:col-span-8">
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
              {newsArticles.map((article) => (
                <NewsCard
                  key={article.id}
                  id={article.id}
                  thumbnail={article.thumbnail}
                  alt={article.alt}
                  headline={article.headline}
                  excerpt={article.excerpt}
                  category={article.category}
                  timestamp={article.timestamp}
                  articleUrl={article.articleUrl}
                />
              ))}
            </div>
          </div>

          {/* Trending Sidebar */}
          <div className="lg:col-span-4">
            <div className="sticky top-32">
              <TrendingStories stories={trendingStories} />
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default HomepageInteractive;
```

## src/app/homepage/components/NewsCard.tsx
```typescript
import React from 'react';
import Link from 'next/link';
import AppImage from '@/components/ui/AppImage';
import Icon from '@/components/ui/AppIcon';

interface NewsCardProps {
  id: string;
  thumbnail: string;
  alt: string;
  headline: string;
  excerpt: string;
  category: string;
  timestamp: string;
  articleUrl: string;
}

const NewsCard = ({
  id,
  thumbnail,
  alt,
  headline,
  excerpt,
  category,
  timestamp,
  articleUrl,
}: NewsCardProps) => {
  return (
    <Link href={articleUrl} className="block group">
      <article className="bg-card border border-border overflow-hidden transition-smooth hover:border-primary">
        <div className="relative h-48 overflow-hidden">
          <AppImage
            src={thumbnail}
            alt={alt}
            fill
            className="object-cover transition-smooth group-hover:scale-105"
          />
        </div>
        <div className="p-6">
          <div className="flex items-center gap-3 mb-3">
            <span className="inline-block px-3 py-1 bg-primary text-primary-foreground text-xs font-bold font-caption">
              {category}
            </span>
            <span className="text-xs text-muted-foreground font-caption">
              {timestamp}
            </span>
          </div>
          <h3 className="text-xl font-bold text-foreground mb-3 font-heading line-clamp-2 group-hover:text-primary transition-smooth">
            {headline}
          </h3>
          <p className="text-sm text-muted-foreground line-clamp-3">
            {excerpt}
          </p>
          <div className="flex items-center gap-2 mt-4 text-primary text-sm font-medium">
            <span>Read More</span>
            <Icon name="ArrowRightIcon" size={16} />
          </div>
        </div>
      </article>
    </Link>
  );
};

export default NewsCard;
```

## src/app/homepage/components/TrendingStories.tsx
```typescript
import React from 'react';
import Link from 'next/link';
import Icon from '@/components/ui/AppIcon';

interface TrendingStory {
  id: string;
  headline: string;
  category: string;
  articleUrl: string;
  isHot: boolean;
}

interface TrendingStoriesProps {
  stories: TrendingStory[];
}

const TrendingStories = ({ stories }: TrendingStoriesProps) => {
  return (
    <aside className="bg-card border border-border p-6">
      <div className="flex items-center gap-2 mb-6">
        <Icon name="FireIcon" size={24} className="text-primary" />
        <h2 className="text-2xl font-bold text-foreground font-heading">
          Trending Stories
        </h2>
      </div>
      <div className="space-y-4">
        {stories.map((story, index) => (
          <Link
            key={story.id}
            href={story.articleUrl}
            className="block group"
          >
            <article className="flex items-start gap-4 pb-4 border-b border-border last:border-b-0 last:pb-0">
              <span className="flex-shrink-0 w-8 h-8 flex items-center justify-center bg-muted text-foreground font-bold font-data text-sm">
                {index + 1}
              </span>
              <div className="flex-1 min-w-0">
                <div className="flex items-center gap-2 mb-2">
                  <span className="inline-block px-2 py-1 bg-primary text-primary-foreground text-xs font-bold font-caption">
                    {story.category}
                  </span>
                  {story.isHot && (
                    <Icon name="FireIcon" size={16} className="text-error" />
                  )}
                </div>
                <h3 className="text-sm font-medium text-foreground group-hover:text-primary transition-smooth line-clamp-2">
                  {story.headline}
                </h3>
              </div>
            </article>
          </Link>
        ))}
      </div>
      <Link
        href="/homepage"
        className="block mt-6 text-center py-3 border border-border text-foreground hover:bg-primary hover:text-primary-foreground hover:border-primary transition-smooth font-medium text-sm"
      >
        View All Trending
      </Link>
    </aside>
  );
};

export default TrendingStories;
```

## src/app/homepage/page.tsx
```typescript
import React from 'react';
import Breadcrumb from '@/components/common/Breadcrumb';
import HomepageInteractive from './components/HomepageInteractive';
import { getRealNews } from '@/lib/api';
import { supabase } from '@/lib/supabase-client';

export default async function Homepage() {
  const apiNews = await getRealNews();
  const { data: internalArticles } = await supabase.from('articles').select('*').order('created_at', { ascending: false }).limit(5);

  const carouselSlides = (internalArticles || []).length > 0 
    ? internalArticles!.map((art: any) => ({
        id: art.id,
        headline: art.title,
        summary: art.content.substring(0, 150) + "...",
        image: art.image_url,
        category: "ANALYSIS",
        articleUrl: `/news/${art.id}`
      }))
    : apiNews.slice(0, 3).map((a: any) => ({
        id: a.id,
        headline: a.title,
        summary: a.body.substring(0, 150) + "...",
        image: a.image,
        category: "NEWS",
        articleUrl: `/news/${a.id}`
      }));

  const newsArticles = apiNews.slice(3).map((a: any) => ({
    id: a.id,
    thumbnail: a.image,
    headline: a.title,
    excerpt: a.body.substring(0, 100) + "...",
    category: a.source.toUpperCase(),
    timestamp: "Real-time",
    articleUrl: `/news/${a.id}`
  }));

  return (
    <div className="pt-4">
      <div className="container mx-auto px-4 lg:px-8">
        <Breadcrumb />
        <HomepageInteractive carouselSlides={carouselSlides} newsArticles={newsArticles} trendingStories={[]} />
      </div>
    </div>
  );
}
```

## src/app/markets-overview/components/ETFFlowsChart.tsx
```typescript
'use client';
import React from 'react';
import { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';

interface ETFFlowData {
  date: string;
  inflows: number;
  outflows: number;
  net: number;
}

export default function ETFFlowsChart({ data }: { data: ETFFlowData[] }) {
  // Fix: Explicitly type 'value' as number so Recharts is happy
  const formatValue = (value: number) => {
    if (value >= 1e9) return `$${(value / 1e9).toFixed(1)}B`;
    if (value >= 1e6) return `$${(value / 1e6).toFixed(1)}M`;
    return `$${(value / 1e3).toFixed(1)}K`;
  };

  return (
    <div className="w-full h-96 bg-card border border-border p-6">
      <div className="mb-6">
        <h3 className="text-lg font-bold text-foreground font-heading mb-2">Bitcoin ETF Flows</h3>
        <p className="text-sm text-muted-foreground font-caption">Daily inflows and outflows</p>
      </div>
      <ResponsiveContainer width="100%" height="100%">
        <BarChart data={data} margin={{ top: 20, right: 30, left: 20, bottom: 5 }}>
          <CartesianGrid strokeDasharray="3 3" stroke="#333333" />
          <XAxis dataKey="date" stroke="#A3A3A3" style={{ fontSize: '12px', fontFamily: 'JetBrains Mono' }} />
          <YAxis stroke="#A3A3A3" tickFormatter={formatValue} style={{ fontSize: '12px', fontFamily: 'JetBrains Mono' }} />
          <Tooltip 
            contentStyle={{ backgroundColor: '#1A1A1A', border: '1px solid #333' }}
            formatter={(value: any) => formatValue(Number(value))} 
            labelStyle={{ color: '#FFFFFF' }} 
          />
          <Legend wrapperStyle={{ fontFamily: 'JetBrains Mono', fontSize: '12px' }} />
          <Bar dataKey="inflows" fill="#22C55E" name="Inflows" />
          <Bar dataKey="outflows" fill="#EF4444" name="Outflows" />
          <Bar dataKey="net" fill="#FABF2C" name="Net Flow" />
        </BarChart>
      </ResponsiveContainer>
    </div>
  );
}
```

## src/app/markets-overview/components/MarketsInteractive.tsx
```typescript
'use client';
import React, { useState, useEffect } from 'react';
import { FALLBACK_MARKET_DATA } from '@/lib/api';

export default function MarketsInteractive() {
  const [data, setData] = useState<any[]>(FALLBACK_MARKET_DATA); 
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    fetch('/api/prices')
      .then(res => res.json())
      .then(json => {
        if (Array.isArray(json) && json.length > 0) setData(json);
        setLoading(false);
      })
      .catch(() => setLoading(false));
  }, []);

  return (
    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
      {data.slice(0, 6).map((coin, index) => {
        // DETERMINISTIC WIDTH CALCULATION (Fixes Hydration Error)
        // Uses the index to create a stable percentage instead of Math.random()
        const barWidth = `${((index + 1) * 15 + 20) % 100}%`;

        return (
          <div key={coin.id} className="bg-[#111] border border-gray-800 p-6 rounded-sm hover:border-primary/50 transition-colors group">
            <div className="flex justify-between items-start mb-4">
              <div className="flex items-center gap-3">
                <img src={coin.image} className="w-8 h-8 rounded-full grayscale group-hover:grayscale-0 transition-all" alt={coin.name} onError={(e) => e.currentTarget.style.display='none'} />
                <div>
                  <h3 className="font-bold text-white">{coin.name}</h3>
                  <span className="text-xs text-gray-500 font-mono uppercase">{coin.symbol}</span>
                </div>
              </div>
              <span className={`text-xs font-mono font-bold px-2 py-1 rounded ${coin.price_change_percentage_24h >= 0 ? 'bg-green-900/30 text-green-400' : 'bg-red-900/30 text-red-400'}`}>
                {coin.price_change_percentage_24h?.toFixed(2)}%
              </span>
            </div>
            <p className="text-2xl font-black text-white font-mono mb-1">
              ${coin.current_price?.toLocaleString()}
            </p>
            <div className="h-1 w-full bg-gray-800 mt-4 overflow-hidden">
              <div className="h-full bg-primary" style={{ width: barWidth }}></div>
            </div>
          </div>
        );
      })}
    </div>
  );
}
```

## src/app/markets-overview/components/TopPerformersPanel.tsx
```typescript
import React from 'react';
import Icon from '@/components/ui/AppIcon';

interface TopPerformer {
  symbol: string;
  name: string;
  change24h: number;
  volume24h: number;
  price: number;
}

export default function TopPerformersPanel({ performers }: { performers: TopPerformer[] }) {
  const formatPrice = (price: number) => price < 1 ? `$${price.toFixed(4)}` : `$${price.toLocaleString('en-US', { minimumFractionDigits: 2 })}`;

  return (
    <div className="bg-card border border-border p-6">
      <div className="flex items-center justify-between mb-6">
        <h3 className="text-lg font-bold text-foreground font-heading">Top Performers</h3>
        <div className="w-8 h-8 bg-primary flex items-center justify-center">
          <Icon name="FireIcon" size={16} className="text-primary-foreground" />
        </div>
      </div>
      <div className="space-y-4">
        {performers.map((performer, index) => {
          const isPositive = performer.change24h >= 0;
          return (
            <div key={performer.symbol} className="flex items-center justify-between py-3 border-b border-border last:border-b-0">
              <div className="flex items-center gap-3">
                <div className="w-8 h-8 bg-primary flex items-center justify-center">
                  <span className="text-xs font-bold text-primary-foreground font-data">{index + 1}</span>
                </div>
                <div>
                  <p className="text-sm font-bold text-foreground font-data">{performer.symbol}</p>
                  <p className="text-xs text-muted-foreground font-caption">{performer.name}</p>
                </div>
              </div>
              <div className="text-right">
                <p className="text-sm font-bold text-foreground font-data mb-1">{formatPrice(performer.price)}</p>
                <span className={`text-xs font-bold font-data ${isPositive ? 'text-success' : 'text-error'}`}>
                  {isPositive ? '+' : ''}{performer.change24h.toFixed(2)}%
                </span>
              </div>
            </div>
          );
        })}
      </div>
    </div>
  );
}
```

## src/app/markets-overview/components/FuturesMarketsTable.tsx
```typescript
import React from 'react';
import Icon from '@/components/ui/AppIcon';

interface FuturesMarket {
  id: string;
  symbol: string;
  exchange: string;
  markPrice: number;
  indexPrice: number;
  fundingRate: number;
  openInterest: number;
  volume24h: number;
  change24h: number;
}

interface FuturesMarketsTableProps {
  markets: FuturesMarket[];
  onRowClick: (market: FuturesMarket) => void;
}

export default function FuturesMarketsTable({ markets, onRowClick }: FuturesMarketsTableProps) {
  const formatPrice = (price: number) => {
    return price.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
  };

  const formatVolume = (volume: number) => {
    if (volume >= 1000000000) {
      return `$${(volume / 1000000000).toFixed(2)}B`;
    }
    if (volume >= 1000000) {
      return `$${(volume / 1000000).toFixed(2)}M`;
    }
    return `$${(volume / 1000).toFixed(2)}K`;
  };

  return (
    <div className="overflow-x-auto">
      <table className="w-full">
        <thead>
          <tr className="border-b border-border">
            <th className="text-left py-4 px-4 text-xs font-bold text-muted-foreground font-caption uppercase tracking-wide">Symbol</th>
            <th className="text-left py-4 px-4 text-xs font-bold text-muted-foreground font-caption uppercase tracking-wide">Exchange</th>
            <th className="text-right py-4 px-4 text-xs font-bold text-muted-foreground font-caption uppercase tracking-wide">Mark Price</th>
            <th className="text-right py-4 px-4 text-xs font-bold text-muted-foreground font-caption uppercase tracking-wide">Index Price</th>
            <th className="text-right py-4 px-4 text-xs font-bold text-muted-foreground font-caption uppercase tracking-wide">Funding Rate</th>
            <th className="text-right py-4 px-4 text-xs font-bold text-muted-foreground font-caption uppercase tracking-wide">Open Interest</th>
            <th className="text-right py-4 px-4 text-xs font-bold text-muted-foreground font-caption uppercase tracking-wide">24h Volume</th>
            <th className="text-right py-4 px-4 text-xs font-bold text-muted-foreground font-caption uppercase tracking-wide">24h Change</th>
          </tr>
        </thead>
        <tbody>
          {markets.map((market, index) => {
            const isPositive = market.change24h >= 0;
            const isFundingPositive = market.fundingRate >= 0;
            const isEven = index % 2 === 0;

            return (
              <tr
                key={market.id}
                onClick={() => onRowClick(market)}
                className={`border-b border-border cursor-pointer transition-smooth hover:bg-muted ${
                  isEven ? 'bg-card' : 'bg-background'
                }`}
              >
                <td className="py-4 px-4"><span className="text-sm font-bold text-foreground font-data">{market.symbol}</span></td>
                <td className="py-4 px-4"><span className="text-sm text-muted-foreground font-caption">{market.exchange}</span></td>
                <td className="py-4 px-4 text-right"><span className="text-sm font-bold text-foreground font-data">${formatPrice(market.markPrice)}</span></td>
                <td className="py-4 px-4 text-right"><span className="text-sm font-medium text-muted-foreground font-data">${formatPrice(market.indexPrice)}</span></td>
                <td className="py-4 px-4 text-right"><span className={`text-sm font-bold font-data ${isFundingPositive ? 'text-success' : 'text-error'}`}>{isFundingPositive ? '+' : ''}{(market.fundingRate * 100).toFixed(4)}%</span></td>
                <td className="py-4 px-4 text-right"><span className="text-sm font-medium text-foreground font-data">{formatVolume(market.openInterest)}</span></td>
                <td className="py-4 px-4 text-right"><span className="text-sm font-medium text-foreground font-data">{formatVolume(market.volume24h)}</span></td>
                <td className="py-4 px-4 text-right">
                  <span className={`flex items-center justify-end gap-1 text-sm font-bold font-data ${isPositive ? 'text-success' : 'text-error'}`}>
                    <Icon name={isPositive ? 'ArrowUpIcon' : 'ArrowDownIcon'} size={12} />
                    {isPositive ? '+' : ''}{market.change24h.toFixed(2)}%
                  </span>
                </td>
              </tr>
            );
          })}
        </tbody>
      </table>
    </div>
  );
}
```

## src/app/markets-overview/components/VolumeAnalysisChart.tsx
```typescript
'use client';

import React from 'react';
import { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';

interface VolumeData {
  time: string;
  spotVolume: number;
  futuresVolume: number;
  totalVolume: number;
}

export default function VolumeAnalysisChart({ data }: { data: VolumeData[] }) {
  const formatValue = (value: number) => value >= 1e9 ? `$${(value/1e9).toFixed(1)}B` : `$${(value/1e6).toFixed(1)}M`;

  return (
    <div className="w-full h-80 bg-card border border-border p-6">
      <div className="mb-6">
        <h3 className="text-lg font-bold text-foreground font-heading mb-2">24-Hour Volume Analysis</h3>
        <p className="text-sm text-muted-foreground font-caption">Trading volume breakdown across spot and futures markets</p>
      </div>
      <ResponsiveContainer width="100%" height="100%">
        <LineChart data={data} margin={{ top: 5, right: 30, left: 20, bottom: 5 }}>
          <CartesianGrid strokeDasharray="3 3" stroke="#333333" />
          <XAxis dataKey="time" stroke="#A3A3A3" style={{ fontSize: '12px', fontFamily: 'JetBrains Mono' }} />
          <YAxis stroke="#A3A3A3" tickFormatter={formatValue} style={{ fontSize: '12px', fontFamily: 'JetBrains Mono' }} />
          <Tooltip contentStyle={{ backgroundColor: '#1A1A1A', border: '1px solid #333' }} />
          <Legend />
          <Line type="monotone" dataKey="spotVolume" stroke="#22C55E" strokeWidth={2} name="Spot" dot={false} />
          <Line type="monotone" dataKey="futuresVolume" stroke="#EF4444" strokeWidth={2} name="Futures" dot={false} />
          <Line type="monotone" dataKey="totalVolume" stroke="#FABF2C" strokeWidth={3} name="Total" dot={false} />
        </LineChart>
      </ResponsiveContainer>
    </div>
  );
}
```

## src/app/markets-overview/components/FilterToolbar.tsx
```typescript
'use client';

import React from 'react';
import Icon from '@/components/ui/AppIcon';

interface FilterToolbarProps {
  selectedExchange: string;
  onExchangeChange: (exchange: string) => void;
  searchQuery: string;
  onSearchChange: (query: string) => void;
  volumeThreshold: string;
  onVolumeThresholdChange: (threshold: string) => void;
}

export default function FilterToolbar({
  selectedExchange,
  onExchangeChange,
  searchQuery,
  onSearchChange,
  volumeThreshold,
  onVolumeThresholdChange
}: FilterToolbarProps) {
  const exchanges = ['All Exchanges', 'Binance', 'Coinbase', 'Kraken', 'Bybit', 'OKX'];
  const volumeThresholds = ['All Volumes', '>$1M', '>$10M', '>$100M', '>$1B'];

  return (
    <div className="bg-card border border-border p-4 mb-6">
      <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
        {/* Search Input */}
        <div className="relative">
          <div className="absolute left-3 top-1/2 -translate-y-1/2">
            <Icon name="MagnifyingGlassIcon" size={20} className="text-muted-foreground" />
          </div>
          <input
            type="text"
            value={searchQuery}
            onChange={(e) => onSearchChange(e.target.value)}
            placeholder="Search trading pairs..."
            className="w-full h-10 pl-10 pr-4 bg-background text-foreground border border-border focus:outline-none focus:ring-2 focus:ring-primary text-sm font-caption"
          />
        </div>

        {/* Exchange Filter */}
        <div className="relative">
          <select
            value={selectedExchange}
            onChange={(e) => onExchangeChange(e.target.value)}
            className="w-full h-10 px-4 bg-background text-foreground border border-border focus:outline-none focus:ring-2 focus:ring-primary text-sm font-caption appearance-none cursor-pointer"
          >
            {exchanges.map((exchange) => (
              <option key={exchange} value={exchange}>
                {exchange}
              </option>
            ))}
          </select>
          <div className="absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none">
            <Icon name="ChevronDownIcon" size={20} className="text-muted-foreground" />
          </div>
        </div>

        {/* Volume Threshold Filter */}
        <div className="relative">
          <select
            value={volumeThreshold}
            onChange={(e) => onVolumeThresholdChange(e.target.value)}
            className="w-full h-10 px-4 bg-background text-foreground border border-border focus:outline-none focus:ring-2 focus:ring-primary text-sm font-caption appearance-none cursor-pointer"
          >
            {volumeThresholds.map((threshold) => (
              <option key={threshold} value={threshold}>
                {threshold}
              </option>
            ))}
          </select>
          <div className="absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none">
            <Icon name="ChevronDownIcon" size={20} className="text-muted-foreground" />
          </div>
        </div>
      </div>
    </div>
  );
}
```

## src/app/markets-overview/components/SpotMarketsTable.tsx
```typescript
import React from 'react';
import Icon from '@/components/ui/AppIcon';

interface SpotMarket {
  id: string;
  pair: string;
  exchange: string;
  price: number;
  volume24h: number;
  change24h: number;
  bid: number;
  ask: number;
  spread: number;
}

interface SpotMarketsTableProps {
  markets: SpotMarket[];
  onRowClick: (market: SpotMarket) => void;
}

export default function SpotMarketsTable({ markets, onRowClick }: SpotMarketsTableProps) {
  const formatPrice = (price: number) => price.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
  const formatVolume = (val: number) => val >= 1e9 ? `$${(val/1e9).toFixed(2)}B` : `$${(val/1e6).toFixed(2)}M`;

  return (
    <div className="overflow-x-auto">
      <table className="w-full">
        <thead>
          <tr className="border-b border-border">
            <th className="text-left py-4 px-4 text-xs font-bold text-muted-foreground font-caption uppercase">Pair</th>
            <th className="text-left py-4 px-4 text-xs font-bold text-muted-foreground font-caption uppercase">Exchange</th>
            <th className="text-right py-4 px-4 text-xs font-bold text-muted-foreground font-caption uppercase">Price</th>
            <th className="text-right py-4 px-4 text-xs font-bold text-muted-foreground font-caption uppercase">Vol 24h</th>
            <th className="text-right py-4 px-4 text-xs font-bold text-muted-foreground font-caption uppercase">24h %</th>
          </tr>
        </thead>
        <tbody>
          {markets.map((market, index) => {
            const isPositive = market.change24h >= 0;
            return (
              <tr key={market.id} onClick={() => onRowClick(market)} className="border-b border-border cursor-pointer hover:bg-muted transition-smooth">
                <td className="py-4 px-4 font-bold font-data text-sm">{market.pair}</td>
                <td className="py-4 px-4 font-caption text-sm text-muted-foreground">{market.exchange}</td>
                <td className="py-4 px-4 text-right font-bold font-data text-sm">${formatPrice(market.price)}</td>
                <td className="py-4 px-4 text-right font-data text-sm text-muted-foreground">{formatVolume(market.volume24h)}</td>
                <td className={`py-4 px-4 text-right font-bold font-data text-sm ${isPositive ? 'text-success' : 'text-error'}`}>
                  {isPositive ? '+' : ''}{market.change24h}%
                </td>
              </tr>
            );
          })}
        </tbody>
      </table>
    </div>
  );
}
```

## src/app/markets-overview/components/MarketSummaryCard.tsx
```typescript
import React from 'react';
import Icon from '@/components/ui/AppIcon';

interface MarketSummaryCardProps {
  title: string;
  value: string;
  change: number;
  changePercent: number;
  icon: string;
}

export default function MarketSummaryCard({ title, value, change, changePercent, icon }: MarketSummaryCardProps) {
  const isPositive = change >= 0;

  return (
    <div className="bg-card border border-border p-6">
      <div className="flex items-start justify-between mb-4">
        <div className="flex items-center gap-3">
          <div className="w-10 h-10 bg-primary flex items-center justify-center">
            <Icon name={icon as any} size={20} className="text-primary-foreground" />
          </div>
          <h3 className="text-sm font-medium text-muted-foreground font-caption uppercase tracking-wide">{title}</h3>
        </div>
      </div>
      <div className="space-y-2">
        <p className="text-2xl font-bold text-foreground font-data">{value}</p>
        <div className="flex items-center gap-2">
          <span className={`flex items-center gap-1 text-xs font-medium font-data ${isPositive ? 'text-success' : 'text-error'}`}>
            <Icon name={isPositive ? 'ArrowUpIcon' : 'ArrowDownIcon'} size={12} />
            {isPositive ? '+' : ''}{changePercent.toFixed(2)}%
          </span>
        </div>
      </div>
    </div>
  );
}
```

## src/app/markets-overview/page.tsx
```typescript
import React from 'react';
import Header from '@/components/common/Header';
import PriceTicker from '@/components/common/PriceTicker';
import { DataSidebar } from '@/app/data/_components/DataSidebar';
import MarketsInteractive from './components/MarketsInteractive';

export const metadata = {
  title: 'Markets Overview - CryptoBrainNews',
};

export default function MarketsOverviewPage() {
  return (
    <div className="min-h-screen bg-black text-white">
      <Header />
      <PriceTicker />
      
      <div className="flex max-w-[2000px] mx-auto border-l border-r border-[#222]">
        <DataSidebar />
        
        <main className="flex-1 min-w-0 bg-[#050505] p-6 md:p-8">
          <div className="mb-8">
            <h1 className="text-4xl font-black font-heading uppercase tracking-tighter mb-2">
              Market <span className="text-primary">Overview</span>
            </h1>
            <div className="h-1 w-20 bg-primary/50"></div>
          </div>
          <MarketsInteractive />
        </main>
      </div>
    </div>
  );
}
```

## src/app/data/layout.tsx
```typescript
import React from 'react';
import Header from '@/components/common/Header';
import PriceTicker from '@/components/common/PriceTicker';
import { DataSidebar } from './_components/DataSidebar';
import { DataBreadcrumb } from './_components/DataBreadcrumb';

export default function DataLayout({ children }: { children: React.ReactNode }) {
  return (
    <div className="min-h-screen bg-black text-white selection:bg-primary selection:text-black">
      {/* Global Nav */}
      <Header />
      <PriceTicker />

      {/* Terminal Grid */}
      <div className="flex max-w-[2000px] mx-auto border-l border-r border-[#222]">
        {/* Sidebar */}
        <DataSidebar />

        {/* Main Content Area */}
        <main className="flex-1 min-w-0 bg-[#050505]">
          <div className="p-6 md:p-8">
            <DataBreadcrumb />
            {children}
          </div>
        </main>
      </div>
    </div>
  );
}
```

## src/app/data/page.tsx
```typescript
import { redirect } from 'next/navigation';

export default function DataRoot() {
  redirect('/markets-overview');
}
```

## src/app/data/_components/DataBreadcrumb.tsx
```typescript
'use client';
import { usePathname } from 'next/navigation';
import Link from 'next/link';

export function DataBreadcrumb() {
  const pathname = usePathname();
  // Simple mapping for demo
  const segments = pathname.split('/').filter(Boolean);

  return (
    <nav className="flex items-center gap-2 text-[10px] uppercase tracking-widest text-gray-500 font-mono mb-6">
      <Link href="/" className="hover:text-white transition-colors">TERMINAL</Link>
      {segments.map((segment, idx) => (
        <span key={segment} className="flex items-center gap-2">
          <span>/</span>
          <span className={idx === segments.length - 1 ? 'text-primary' : 'hover:text-white'}>
            {segment.replace('-', ' ')}
          </span>
        </span>
      ))}
    </nav>
  );
}
```

## src/app/data/_components/DataSidebar.tsx
```typescript
'use client';
import Link from 'next/link';
import { usePathname } from 'next/navigation';
import { useState } from 'react';
import Icon from '@/components/ui/AppIcon';

interface NavSection {
  label: string;
  icon: string;
  children: { label: string; href: string }[];
}

const SECTIONS: NavSection[] = [
  {
    label: 'Market',
    icon: 'ChartBarIcon',
    children: [
      { label: 'Overview', href: '/markets-overview' }, // Mapping to existing
      { label: 'Spot', href: '/markets-overview?tab=spot' },
      { label: 'Futures', href: '/markets-overview?tab=futures' },
      { label: 'Volumes', href: '/markets-overview' },
    ],
  },
  {
    label: 'DeFi',
    icon: 'CircleStackIcon',
    children: [
      { label: 'Overview', href: '/de-fi-analytics' }, // Mapping to existing
      { label: 'TVL Rankings', href: '/de-fi-analytics' },
      { label: 'Yields', href: '/de-fi-analytics' },
      { label: 'Whale Watch', href: '/de-fi-analytics' },
    ],
  },
  {
    label: 'Price Indexes',
    icon: 'CurrencyDollarIcon',
    children: [
      { label: 'Top 100', href: '/price-indexes' },
      { label: 'Gainers/Losers', href: '/price-indexes' },
    ],
  },
  {
    label: 'On-Chain',
    icon: 'CubeTransparentIcon',
    children: [
      { label: 'Gas Tracker', href: '#' }, // Placeholders for future
      { label: 'Active Addresses', href: '#' },
    ],
  },
];

export function DataSidebar() {
  const pathname = usePathname();

  return (
    <aside className="w-64 shrink-0 border-r border-[#222] bg-black min-h-screen sticky top-0 self-start hidden lg:block">
      <div className="p-4">
        <div className="text-[10px] font-black text-gray-500 uppercase tracking-[0.2em] mb-6 font-mono">
          Terminal Nav
        </div>
        <nav className="space-y-1">
          {SECTIONS.map((section) => (
            <SectionGroup key={section.label} section={section} pathname={pathname} />
          ))}
        </nav>
      </div>
    </aside>
  );
}

function SectionGroup({ section, pathname }: { section: NavSection; pathname: string }) {
  const isActive = section.children.some((c) => pathname.includes(c.href));
  const [open, setOpen] = useState(true); // Default open for visibility

  return (
    <div className="mb-2">
      <button
        onClick={() => setOpen(!open)}
        className="w-full flex items-center justify-between px-3 py-2 text-xs font-bold text-gray-300 hover:text-white hover:bg-white/5 rounded transition-colors uppercase tracking-wide"
      >
        <span className="flex items-center gap-2">
          <Icon name={section.icon as any} size={14} className="text-primary" />
          {section.label}
        </span>
        <Icon name={open ? 'ChevronDownIcon' : 'ChevronRightIcon'} size={12} />
      </button>

      {open && (
        <div className="ml-4 mt-1 space-y-0.5 border-l border-[#333] pl-3">
          {section.children.map((item) => {
            return (
              <Link
                key={item.label}
                href={item.href}
                className={`block px-3 py-1.5 text-[11px] font-medium rounded transition-colors ${
                   pathname === item.href
                    ? 'text-primary bg-primary/10 border-r-2 border-primary'
                    : 'text-gray-500 hover:text-white'
                }`}
              >
                {item.label}
              </Link>
            );
          })}
        </div>
      )}
    </div>
  );
}
```

## src/app/layout.tsx
```typescript
import React from 'react';
import type { Metadata, Viewport } from 'next';
import { Merriweather, Inter, JetBrains_Mono, Space_Mono } from 'next/font/google';
import '../styles/globals.css';
import Header from '@/components/common/Header';
import PriceTicker from '@/components/common/PriceTicker';
import Footer from '@/components/layout/Footer';

// Load Fonts Efficiently
const merriweather = Merriweather({ subsets: ['latin'], weight: ['400', '700', '900'], variable: '--font-heading', display: 'swap' });
const inter = Inter({ subsets: ['latin'], weight: ['400', '500', '700'], variable: '--font-body', display: 'swap' });
const jetbrains = JetBrains_Mono({ subsets: ['latin'], variable: '--font-caption', display: 'swap' });
const space = Space_Mono({ subsets: ['latin'], weight: ['400', '700'], variable: '--font-data', display: 'swap' });

export const viewport: Viewport = {
  width: 'device-width',
  initialScale: 1,
  themeColor: '#000000',
};

export const metadata: Metadata = {
  title: { default: 'CryptoBrainNews', template: '%s | CBN' },
  description: 'Institutional Grade Crypto Intelligence Terminal',
};

export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html lang="en" className={`${merriweather.variable} ${inter.variable} ${jetbrains.variable} ${space.variable}`}>
      <body className="flex flex-col min-h-screen">
        <Header />
        <PriceTicker />
        <div className="flex-grow">{children}</div>
        <Footer />
      </body>
    </html>
  );
}
```

## src/app/auth/callback/page.tsx
```typescript
'use client';
import { useEffect } from 'react';
import { useRouter } from 'next/navigation';
import { supabase } from '@/lib/supabase-client';

export default function AuthCallbackPage() {
  const router = useRouter();

  useEffect(() => {
    // Supabase client automatically detects the #access_token hash in the URL
    // We listen for the SIGNED_IN event to know when it's safe to redirect
    const { data: { subscription } } = supabase.auth.onAuthStateChange((event, session) => {
      if (event === 'SIGNED_IN' || session) {
        // Successful login! Redirect to the DeFi page to see the unlocked charts
        router.push('/de-fi-analytics');
      }
    });

    return () => subscription.unsubscribe();
  }, [router]);

  return (
    <div className="min-h-screen bg-black flex flex-col items-center justify-center text-white">
      <div className="animate-spin h-12 w-12 border-4 border-primary border-t-transparent rounded-full mb-6"></div>
      <h1 className="text-2xl font-bold font-heading mb-2">VERIFYING CREDENTIALS</h1>
      <p className="text-gray-500 font-mono text-xs uppercase tracking-widest">Establishing Secure Session...</p>
    </div>
  );
}
```

## src/app/de-fi-analytics/components/YieldCalculator.tsx
```typescript
'use client';
import React, { useState } from 'react';
import Icon from '@/components/ui/AppIcon';

const YieldCalculator = () => {
  const [amount, setAmount] = useState(10000);
  const apy = 12.5;

  return (
    <div className="bg-card border border-border p-6">
      <h2 className="text-xl font-bold font-heading mb-4">Yield Optimizer</h2>
      <div className="space-y-4">
        <div>
          <label className="text-xs font-caption text-muted-foreground uppercase">Investment Amount (USD)</label>
          <input 
            type="number" 
            value={amount} 
            onChange={(e) => setAmount(Number(e.target.value))}
            className="w-full bg-secondary border border-border p-3 text-white font-data mt-1 outline-none focus:border-primary"
          />
        </div>
        <div className="bg-secondary p-4 flex justify-between items-center">
          <div>
            <p className="text-xs font-caption text-muted-foreground">Estimated Yearly Return</p>
            <p className="text-2xl font-bold text-success font-data">${(amount * (apy/100)).toLocaleString()}</p>
          </div>
          <Icon name="ArrowTrendingUpIcon" className="text-success" size={32} />
        </div>
      </div>
    </div>
  );
};
export default YieldCalculator;
```

## src/app/de-fi-analytics/components/StablecoinAnalytics.tsx
```typescript
'use client';
import React from 'react';
import { PieChart, Pie, Cell, ResponsiveContainer, Legend, Tooltip } from 'recharts';

interface StablecoinAnalyticsProps {
  data: any[];
}

const StablecoinAnalytics = ({ data }: StablecoinAnalyticsProps) => {
  const COLORS = ['#FABF2C', '#627EEA', '#26A17B', '#F3BA2F', '#002868'];
  
  const chartData = data.map((s, i) => ({
    name: s.symbol,
    value: s.circulating,
  }));

  return (
    <div className="bg-card border border-border p-6">
      <h2 className="text-xl font-bold font-heading mb-4 text-primary uppercase tracking-widest">Stablecoin Dominance</h2>
      <div className="w-full h-[300px]">
        <ResponsiveContainer width="100%" height="100%">
          <PieChart>
            <Pie data={chartData} innerRadius={60} outerRadius={80} paddingAngle={5} dataKey="value">
              {chartData.map((entry, index) => (
                <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />
              ))}
            </Pie>
            <Tooltip />
            <Legend />
          </PieChart>
        </ResponsiveContainer>
      </div>
    </div>
  );
};
export default StablecoinAnalytics;
```

## src/app/de-fi-analytics/components/OnChainMetrics.tsx
```typescript
'use client';
import React from 'react';
import { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';
import Icon from '@/components/ui/AppIcon';

const OnChainMetrics = () => {
  const mockMetricsData = [
    { date: '2026-01-21', transactions: 1250000, uniqueUsers: 345000 },
    { date: '2026-01-22', transactions: 1320000, uniqueUsers: 367000 },
    { date: '2026-01-23', transactions: 1180000, uniqueUsers: 328000 },
    { date: '2026-01-24', transactions: 1450000, uniqueUsers: 389000 },
    { date: '2026-01-25', transactions: 1560000, uniqueUsers: 412000 },
    { date: '2026-01-26', transactions: 1420000, uniqueUsers: 395000 },
    { date: '2026-01-27', transactions: 1680000, uniqueUsers: 445000 }
  ];

  return (
    <div className="bg-card border border-border p-6">
      <h2 className="text-xl font-bold font-heading mb-4 text-primary uppercase tracking-widest">Network Activity</h2>
      <div className="w-full h-[250px]">
        <ResponsiveContainer width="100%" height="100%">
          <BarChart data={mockMetricsData}>
            <CartesianGrid strokeDasharray="3 3" stroke="#333" vertical={false} />
            <XAxis dataKey="date" stroke="#666" fontSize={10} tickFormatter={(val) => val.split('-')[2]} />
            <YAxis stroke="#666" fontSize={10} />
            <Tooltip contentStyle={{backgroundColor: '#000', borderColor: '#FABF2C'}} />
            <Bar dataKey="transactions" fill="#FABF2C" radius={[2, 2, 0, 0]} />
          </BarChart>
        </ResponsiveContainer>
      </div>
    </div>
  );
};
export default OnChainMetrics;
```

## src/app/de-fi-analytics/components/WhaleWatch.tsx
```typescript
'use client';
import React from 'react';
import { AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';
import Icon from '@/components/ui/AppIcon';

const DATA = [
  { time: '00:00', inflow: 400, net: 240 },
  { time: '04:00', inflow: 300, net: 139 },
  { time: '08:00', inflow: 900, net: 980 }, // WHALE MOVE
  { time: '12:00', inflow: 200, net: 390 },
  { time: '16:00', inflow: 278, net: 480 },
  { time: '20:00', inflow: 189, net: 480 },
];

export default function WhaleWatch() {
  return (
    <div className="bg-[#0a0a0a] border-2 border-primary/20 p-6 shadow-[0_0_50px_rgba(250,191,44,0.05)]">
      <div className="flex justify-between items-start mb-8">
        <div>
          <div className="flex items-center gap-2 mb-1">
            <span className="w-2 h-2 bg-primary animate-pulse rounded-full"></span>
            <h3 className="text-white font-black text-xs uppercase tracking-[0.3em]">Whale Liquidity Tracker</h3>
          </div>
          <p className="text-[10px] text-gray-500 font-mono">ON-CHAIN SIGNAL: SOLANA / ETH BRIDGE</p>
        </div>
        <div className="bg-primary text-black text-[9px] font-black px-2 py-1 uppercase italic">Live Signal</div>
      </div>

      <div className="h-[250px] w-full">
        <ResponsiveContainer width="100%" height="100%">
          <AreaChart data={DATA}>
            <defs>
              <linearGradient id="colorNet" x1="0" y1="0" x2="0" y2="1">
                <stop offset="5%" stopColor="#FABF2C" stopOpacity={0.3}/>
                <stop offset="95%" stopColor="#FABF2C" stopOpacity={0}/>
              </linearGradient>
            </defs>
            <CartesianGrid strokeDasharray="3 3" stroke="#1a1a1a" vertical={false} />
            <XAxis dataKey="time" stroke="#333" fontSize={10} font-family="monospace" />
            <YAxis stroke="#333" fontSize={10} font-family="monospace" tickFormatter={(v) => `$${v}M`} />
            <Tooltip 
              contentStyle={{backgroundColor: '#000', border: '1px solid #FABF2C', borderRadius: '0px'}}
              itemStyle={{color: '#FABF2C', fontSize: '10px'}}
            />
            <Area type="monotone" dataKey="net" stroke="#FABF2C" fillOpacity={1} fill="url(#colorNet)" strokeWidth={3} />
          </AreaChart>
        </ResponsiveContainer>
      </div>

      <div className="mt-6 pt-6 border-t border-white/5 grid grid-cols-2 gap-4">
        <div>
          <p className="text-[10px] text-gray-500 uppercase font-bold">Large Inflow (24h)</p>
          <p className="text-xl font-black text-white">$1.24B</p>
        </div>
        <div className="text-right">
          <p className="text-[10px] text-gray-500 uppercase font-bold">Whale Sentiment</p>
          <p className="text-xl font-black text-green-500 uppercase italic">Bullish</p>
        </div>
      </div>
    </div>
  );
}
```

## src/app/de-fi-analytics/components/ProtocolRankings.tsx
```typescript
'use client';

import React from 'react';
import Icon from '@/components/ui/AppIcon';

interface Protocol {
  name: string;
  chain: string;
  category: string;
  tvl: number;
  change_1d: number;
  change_7d: number;
}

interface ProtocolRankingsProps {
  protocols: Protocol[];
}

const ProtocolRankings = ({ protocols }: ProtocolRankingsProps) => {
  return (
    <div className="bg-card border border-border overflow-hidden">
      <div className="p-6 border-b border-border flex justify-between items-center">
        <h2 className="text-xl font-bold font-heading">Top Protocols by TVL</h2>
        <span className="text-xs font-caption text-muted-foreground italic">Powered by DefiLlama</span>
      </div>
      
      <div className="overflow-x-auto">
        <table className="w-full text-left">
          <thead className="bg-secondary/50 text-xs font-caption uppercase tracking-wider">
            <tr>
              <th className="px-6 py-4">Rank</th>
              <th className="px-6 py-4">Protocol</th>
              <th className="px-6 py-4">Category</th>
              <th className="px-6 py-4 text-right">TVL (USD)</th>
              <th className="px-6 py-4 text-right">24h</th>
            </tr>
          </thead>
          <tbody className="divide-y divide-border">
            {protocols.map((p, index) => (
              <tr key={p.name} className="hover:bg-muted/30 transition-smooth">
                <td className="px-6 py-4 font-data text-sm text-muted-foreground">#{index + 1}</td>
                <td className="px-6 py-4">
                  <div className="font-bold font-heading text-foreground">{p.name}</div>
                  <div className="text-[10px] font-caption text-primary uppercase">{p.chain}</div>
                </td>
                <td className="px-6 py-4">
                  <span className="px-2 py-1 bg-secondary text-[10px] font-bold font-caption">
                    {p.category}
                  </span>
                </td>
                <td className="px-6 py-4 text-right font-data font-bold">
                  ${(p.tvl / 1e9).toFixed(2)}B
                </td>
                <td className={`px-6 py-4 text-right font-data text-sm ${p.change_1d >= 0 ? 'text-success' : 'text-error'}`}>
                  {p.change_1d?.toFixed(2)}%
                </td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>
    </div>
  );
};

export default ProtocolRankings;
```

## src/app/de-fi-analytics/components/DeFiInteractive.tsx
```typescript
'use client';
import React from 'react';
import ProtocolRankings from './ProtocolRankings';
import OnChainMetrics from './OnChainMetrics';
import AlphaGate from '@/components/auth/AlphaGate';
import WhaleWatch from './WhaleWatch';
import { AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, BarChart, Bar } from 'recharts';

const DeFiInteractive = ({ initialProtocols, dexVolume, stableMcap }: any) => {
  return (
    <div className="space-y-12">
      
      {/* 1. PUBLIC INTEL (Protocol Table) */}
      <div className="grid grid-cols-1 lg:grid-cols-12 gap-8">
        <div className="lg:col-span-8">
           <ProtocolRankings protocols={initialProtocols} />
        </div>
        <div className="lg:col-span-4">
           <OnChainMetrics />
        </div>
      </div>

      {/* 2. ALPHA INTEL (Charts locked in the Gate) */}
      <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <AlphaGate>
          <div className="bg-[#0a0a0a] border border-gray-900 p-8 shadow-2xl h-full">
            <h3 className="text-white font-black text-xs uppercase mb-8 border-l-2 border-primary pl-4 tracking-widest">Daily DEX Volume (7DMA)</h3>
            <div className="h-[300px]">
              <ResponsiveContainer width="100%" height="100%">
                <AreaChart data={dexVolume}>
                  <CartesianGrid strokeDasharray="3 3" stroke="#222" vertical={false} />
                  <XAxis dataKey="date" stroke="#444" fontSize={10} />
                  <YAxis stroke="#444" fontSize={10} tickFormatter={(v) => `$${(v/1e9).toFixed(1)}B`} />
                  <Tooltip contentStyle={{backgroundColor:'#000', border:'1px solid #333'}} />
                  <Area type="monotone" dataKey="volume" stroke="#FABF2C" fill="#FABF2C" fillOpacity={0.1} strokeWidth={2} />
                </AreaChart>
              </ResponsiveContainer>
            </div>
          </div>
        </AlphaGate>

        <AlphaGate>
          <div className="bg-[#0a0a0a] border border-gray-900 p-8 shadow-2xl h-full">
            <h3 className="text-white font-black text-xs uppercase mb-8 border-l-2 border-primary pl-4 tracking-widest">Total Stablecoin Supply</h3>
            <div className="h-[300px]">
              <ResponsiveContainer width="100%" height="100%">
                <BarChart data={stableMcap}>
                  <CartesianGrid strokeDasharray="3 3" stroke="#222" vertical={false} />
                  <XAxis dataKey="date" stroke="#444" fontSize={10} />
                  <YAxis stroke="#444" fontSize={10} tickFormatter={(v) => `$${(v/1e9).toFixed(0)}B`} />
                  <Bar dataKey="mcap" fill="#627EEA" radius={[2, 2, 0, 0]} />
                </BarChart>
              </ResponsiveContainer>
            </div>
          </div>
        </AlphaGate>
      </div>

      {/* 3. EXCLUSIVE ALPHA TOOLS */}
      <div className="grid grid-cols-1 lg:grid-cols-12 gap-8">
        <div className="lg:col-span-7">
          <AlphaGate>
            <WhaleWatch />
          </AlphaGate>
        </div>
        <div className="lg:col-span-5 bg-card border border-border p-8 flex items-center justify-center text-center">
            <div>
              <p className="text-primary font-black text-xs tracking-widest mb-2 uppercase">Member Status</p>
              <p className="text-white font-mono text-sm uppercase">Active Intelligence Stream Verified</p>
            </div>
        </div>
      </div>
    </div>
  );
};
export default DeFiInteractive;
```

## src/app/de-fi-analytics/components/TheBlockDashboard.tsx
```typescript
'use client';
import React from 'react';
import { AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, BarChart, Bar } from 'recharts';

export default function TheBlockDashboard({ dexVolume, stableMcap, protocols }: any) {
  return (
    <div className="space-y-12">
      <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <div className="bg-[#0a0a0a] border border-gray-900 p-8 shadow-2xl">
          <h3 className="text-white font-black text-xs uppercase mb-8 border-l-2 border-primary pl-4 tracking-widest">Daily DEX Volume (7DMA)</h3>
          <div className="h-[300px]">
            <ResponsiveContainer width="100%" height="100%">
              <AreaChart data={dexVolume}>
                <CartesianGrid strokeDasharray="3 3" stroke="#222" vertical={false} />
                <XAxis dataKey="date" stroke="#444" fontSize={10} />
                <YAxis stroke="#444" fontSize={10} tickFormatter={(v) => `$${(v/1e9).toFixed(1)}B`} />
                <Tooltip contentStyle={{backgroundColor:'#000', border:'1px solid #333'}} />
                <Area type="monotone" dataKey="volume" stroke="#FABF2C" fill="#FABF2C" fillOpacity={0.1} strokeWidth={2} />
              </AreaChart>
            </ResponsiveContainer>
          </div>
        </div>
        <div className="bg-[#0a0a0a] border border-gray-900 p-8 shadow-2xl">
          <h3 className="text-white font-black text-xs uppercase mb-8 border-l-2 border-primary pl-4 tracking-widest">Total Stablecoin Supply</h3>
          <div className="h-[300px]">
            <ResponsiveContainer width="100%" height="100%">
              <BarChart data={stableMcap}>
                <CartesianGrid strokeDasharray="3 3" stroke="#222" vertical={false} />
                <XAxis dataKey="date" stroke="#444" fontSize={10} />
                <YAxis stroke="#444" fontSize={10} tickFormatter={(v) => `$${(v/1e9).toFixed(0)}B`} />
                <Bar dataKey="mcap" fill="#627EEA" radius={[2, 2, 0, 0]} />
              </BarChart>
            </ResponsiveContainer>
          </div>
        </div>
      </div>
      <div className="bg-[#0a0a0a] border border-gray-900 overflow-hidden shadow-2xl">
        <table className="w-full text-left">
          <thead className="bg-black text-[10px] text-gray-500 font-black uppercase">
            <tr><th className="p-6">Protocol</th><th className="p-6 text-right">TVL</th><th className="p-6 text-right">1D Change</th></tr>
          </thead>
          <tbody className="divide-y divide-gray-900">
            {protocols.map((p: any) => (
              <tr key={p.name} className="hover:bg-white/5 transition-colors">
                <td className="p-6 font-bold text-white text-sm">{p.name} <span className="text-[10px] text-gray-600 ml-2 uppercase font-mono">{p.chain}</span></td>
                <td className="p-6 text-right font-mono text-white text-sm">${(p.tvl/1e9).toFixed(2)}B</td>
                <td className={`p-6 text-right font-mono text-xs ${p.change_1d >= 0 ? 'text-green-500' : 'text-red-500'}`}>{p.change_1d?.toFixed(2)}%</td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>
    </div>
  );
}
```

## src/app/de-fi-analytics/components/TVLChart.tsx
```typescript
'use client';
import React from 'react';
import { AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';

interface TVLChartProps {
  data: any[];
}

const TVLChart = ({ data }: TVLChartProps) => {
  return (
    <div className="bg-card border border-border p-6">
      <div className="flex justify-between items-center mb-6">
        <h2 className="text-2xl font-bold font-heading text-white">Total Value Locked (TVL)</h2>
        <span className="text-xs font-caption text-success">+8.2% (30d)</span>
      </div>
      <div className="w-full h-[400px]">
        <ResponsiveContainer width="100%" height="100%">
          <AreaChart data={data}>
            <defs>
              <linearGradient id="colorTvl" x1="0" y1="0" x2="0" y2="1">
                <stop offset="5%" stopColor="#FABF2C" stopOpacity={0.3}/>
                <stop offset="95%" stopColor="#FABF2C" stopOpacity={0}/>
              </linearGradient>
            </defs>
            <CartesianGrid strokeDasharray="3 3" stroke="#222" vertical={false} />
            <XAxis dataKey="date" stroke="#444" fontSize={12} />
            <YAxis stroke="#444" fontSize={12} tickFormatter={(val) => `$${(val/1e9).toFixed(0)}B`} />
            <Tooltip contentStyle={{backgroundColor: '#000', border: '1px solid #333'}} />
            <Area type="monotone" dataKey="tvl" stroke="#FABF2C" fillOpacity={1} fill="url(#colorTvl)" strokeWidth={3} />
          </AreaChart>
        </ResponsiveContainer>
      </div>
    </div>
  );
};
export default TVLChart;
```

## src/app/de-fi-analytics/page.tsx
```typescript
import React from 'react';
import Header from '@/components/common/Header';
import PriceTicker from '@/components/common/PriceTicker';
import { DataSidebar } from '@/app/data/_components/DataSidebar';
import DeFiInteractive from './components/DeFiInteractive';
import { getDeFiProtocols, getDexVolume, getStablecoinData } from '@/lib/api';

export const metadata = {
  title: 'DeFi Intelligence - CryptoBrainNews',
};

export default async function DeFiAnalyticsPage() {
  const [protocols, dexVolume, stableMcap] = await Promise.all([
    getDeFiProtocols(), 
    getDexVolume(), 
    getStablecoinData()
  ]);

  return (
    <div className="min-h-screen bg-black text-white">
      <Header />
      <PriceTicker />
      
      <div className="flex max-w-[2000px] mx-auto border-l border-r border-[#222]">
        <DataSidebar />
        
        <main className="flex-1 min-w-0 bg-[#050505] p-6 md:p-8">
          <div className="mb-10">
            <h1 className="text-5xl font-black font-heading uppercase tracking-tighter mb-2">
              DeFi <span className="text-primary">Terminal</span>
            </h1>
            <p className="text-gray-500 font-mono text-xs uppercase tracking-[0.3em]">
              Institutional Grade Intelligence Hub
            </p>
          </div>
          
          <DeFiInteractive 
            initialProtocols={protocols} 
            dexVolume={dexVolume} 
            stableMcap={stableMcap} 
          />
        </main>
      </div>
    </div>
  );
}
```

## src/app/not-found.tsx
```typescript
'use client';

import React from 'react';
import { useRouter } from 'next/navigation';
import Icon from '@/components/ui/AppIcon';

export default function NotFound() {
    const router = useRouter();

    const handleGoHome = () => {
        router?.push('/homepage');
    };

    const handleGoBack = () => {
        if (typeof window !== 'undefined') {
            window.history?.back();
        }
    };

    return (
        <div className="min-h-screen flex flex-col items-center justify-center bg-background p-4">
            <div className="text-center max-w-md">
                <div className="flex justify-center mb-6">
                    <div className="relative">
                        <h1 className="text-9xl font-bold text-primary opacity-20">404</h1>
                    </div>
                </div>

                <h2 className="text-2xl font-medium text-foreground mb-2">Page Not Found</h2>
                <p className="text-muted-foreground mb-8">
                    The page you're looking for doesn't exist. Let's get you back!
                </p>

                <div className="flex flex-col sm:flex-row gap-4 justify-center">
                    <button
                        onClick={handleGoBack}
                        className="inline-flex items-center justify-center gap-2 bg-primary text-primary-foreground px-6 py-3 rounded-lg font-medium hover:bg-primary/90 transition-colors duration-200"
                    >
                        <Icon name="ArrowLeftIcon" size={16} />
                        Go Back
                    </button>

                    <button
                        onClick={handleGoHome}
                        className="inline-flex items-center justify-center gap-2 border border-border bg-background text-foreground px-6 py-3 rounded-lg font-medium hover:bg-accent hover:text-accent-foreground transition-colors duration-200"
                    >
                        <Icon name="HomeIcon" size={16} />
                        Back to Home
                    </button>
                </div>
            </div>
        </div>
    );
}
```

## src/app/api/prices/route.ts
```typescript
import { NextResponse } from 'next/server';
import { getLivePrices, FALLBACK_MARKET_DATA } from '@/lib/api';

export async function GET() {
  try {
    // Force fetching from server-side logic
    const prices = await getLivePrices('usd', 'all');
    if (!prices || prices.length === 0) {
      return NextResponse.json(FALLBACK_MARKET_DATA);
    }
    return NextResponse.json(prices);
  } catch (error) {
    return NextResponse.json(FALLBACK_MARKET_DATA);
  }
}
```

## src/app/news/[id]/page.tsx
```typescript
import React from 'react';
import { getRealNews } from '@/lib/api';
import Icon from '@/components/ui/AppIcon';
import Image from 'next/image';

export default async function NewsArticlePage({ params }: any) {
  const { id } = await params;
  const news = await getRealNews();
  const article = news.find((a: any) => String(a.id) === String(id)) || news[0];

  return (
    <div className="bg-black text-white selection:bg-primary selection:text-black">
      {/* Note: Header/Ticker are in layout.tsx now */}
      
      <div className="fixed top-16 left-0 w-full h-1 bg-gray-900 z-[1001]">
        <div className="h-full bg-primary animate-reading-bar"></div>
      </div>

      <main className="container mx-auto px-4 lg:px-8 pt-12 pb-20">
        <div className="grid grid-cols-1 lg:grid-cols-12 gap-12">
          
          <div className="lg:col-span-8">
            <div className="mb-6 flex items-center gap-3">
              <span className="bg-primary text-black px-2 py-0.5 text-[10px] font-black uppercase tracking-widest">
                {article.source}
              </span>
              <span className="text-gray-500 font-mono text-[10px] uppercase">
                {new Date(article.published_on * 1000).toLocaleDateString()}  5 MIN READ
              </span>
            </div>

            <h1 className="text-4xl md:text-6xl font-serif font-black mb-8 leading-[1.1] tracking-tighter">
              {article.title}
            </h1>

            <div className="bg-[#111] border-l-4 border-primary p-6 mb-10 shadow-xl">
              <h4 className="text-primary font-black text-xs uppercase mb-3 tracking-widest flex items-center gap-2">
                <Icon name="LightBulbIcon" size={16} /> Quick Take
              </h4>
              <ul className="space-y-3 text-sm text-gray-300 font-medium list-disc list-inside">
                <li>Major volatility detected across institutional liquidity pools.</li>
                <li>Strategic shift in market sentiment confirmed via on-chain flow.</li>
                <li>Institutional participation reaching multi-year highs in this sector.</li>
              </ul>
            </div>

            <div className="relative w-full h-[450px] mb-12 border border-white/10 group overflow-hidden">
               <img src={article.image} alt={article.title} className="w-full h-full object-cover transition-transform duration-1000 group-hover:scale-105" />
            </div>

            <div className="prose prose-invert max-w-none">
              <div className="text-xl leading-relaxed text-gray-300 space-y-8 font-light">
                {article.body.split('\n').map((p: string, i: number) => (
                  <p key={i} className={i === 0 ? "first-letter:text-7xl first-letter:font-black first-letter:text-primary first-letter:mr-3 first-letter:float-left" : ""}>
                    {p}
                  </p>
                ))}
              </div>
            </div>
          </div>

          <aside className="lg:col-span-4 space-y-8">
            <div className="sticky top-32">
              <div className="bg-[#0a0a0a] border border-gray-900 p-6">
                <h3 className="text-white font-black text-xs uppercase mb-6 tracking-widest border-b border-gray-800 pb-4">
                  Trending Now
                </h3>
                <div className="space-y-6">
                  {news.slice(0, 4).map((n: any, i: number) => (
                    <a href={`/news/${n.id}`} key={i} className="flex gap-4 group">
                      <span className="text-2xl font-serif font-black text-gray-800 group-hover:text-primary transition-colors">
                        0{i+1}
                      </span>
                      <p className="text-xs font-bold text-gray-400 group-hover:text-white transition-colors leading-snug">
                        {n.title}
                      </p>
                    </a>
                  ))}
                </div>
              </div>

              <div className="mt-8 p-6 bg-primary text-black text-center">
                 <h4 className="font-black text-sm uppercase mb-2">Alpha Member Access</h4>
                 <p className="text-[10px] font-bold mb-4 uppercase tracking-tighter">Get deep on-chain metrics for this story</p>
                 <button className="bg-black text-white text-[10px] font-black px-4 py-2 w-full">UPGRADE TO PRO</button>
              </div>
            </div>
          </aside>
        </div>
      </main>
    </div>
  );
}
```

## src/app/article-reader/components/ArticleReaderInteractive.tsx
```typescript
'use client';
import React from 'react';

export default function ArticleReaderInteractive({ article }: any) {
  return (
    <div className="max-w-3xl mx-auto bg-card border border-border p-8 mt-8">
      <div className="flex items-center gap-4 mb-6">
        <span className="bg-primary text-black px-2 py-1 text-xs font-bold uppercase">{article.category}</span>
        <span className="text-gray-400 text-sm">{article.publishedDate}</span>
      </div>
      <h1 className="text-4xl font-serif font-bold text-white mb-8">{article.title}</h1>
      <div className="prose prose-invert max-w-none">
        {article.content.map((block: any, i: number) => (
          <div key={i} className="mb-4">
            {block.type === 'heading' ? <h2 className="text-2xl font-bold mt-8 mb-4">{block.text}</h2> : <p className="text-gray-300 leading-relaxed">{block.text}</p>}
          </div>
        ))}
      </div>
    </div>
  );
}
```

## src/app/article-reader/page.tsx
```typescript
import type { Metadata } from 'next';
import Header from '@/components/common/Header';
import PriceTicker from '@/components/common/PriceTicker';
import Breadcrumb from '@/components/common/Breadcrumb';
import ArticleReaderInteractive from './components/ArticleReaderInteractive';

export const metadata: Metadata = {
  title: 'Bitcoin Reaches New All-Time High - CryptoBrainNews',
};

export default function ArticleReaderPage() {
  // In a real app, we would fetch(props.params.id) here
  // For now, we use the static mock article you provided
  const mockArticle = {
    title: "Bitcoin Reaches New All-Time High Above $50,000",
    publishedDate: "2026-01-28",
    author: { name: "Michael Chen", avatar: "", alt: "Analyst" },
    category: "Markets",
    readTime: 8,
    content: [
      { type: 'paragraph', text: "Bitcoin has shattered previous records by surging past the $50,000 mark..." },
      { type: 'heading', level: 2, text: "Institutional Adoption Drives Price Surge" },
      { type: 'paragraph', text: "The recent price rally can be attributed to several key factors..." }
    ]
  };

  return (
    <div className="min-h-screen bg-background">
      <Header />
      <PriceTicker />
      <main className="pt-8 pb-16 container mx-auto px-4">
        <Breadcrumb />
        <ArticleReaderInteractive article={mockArticle} relatedArticles={[]} trendingStories={[]} currentUrl="https://example.com" />
      </main>
    </div>
  );
}
```

## src/app/learning/page.tsx
```typescript
import React from 'react';
import Header from '@/components/common/Header';
import PriceTicker from '@/components/common/PriceTicker';
import AppImage from '@/components/ui/AppImage';
import Icon from '@/components/ui/AppIcon';

export default function LearningHub() {
  const courses = [
    {
      title: "Bitcoin Fundamentals",
      level: "Beginner",
      duration: "2h  5 Mods",
      image: "https://images.unsplash.com/photo-1518546305927-5a555bb7020d?auto=format&fit=crop&q=80&w=500",
      color: "bg-orange-500"
    },
    {
      title: "DeFi Yield Strategies",
      level: "Intermediate",
      duration: "4h  8 Mods",
      image: "https://images.unsplash.com/photo-1639762681485-074b7f938ba0?auto=format&fit=crop&q=80&w=500",
      color: "bg-blue-500"
    },
    {
      title: "On-Chain Analysis",
      level: "Advanced",
      duration: "6h  12 Mods",
      image: "https://images.unsplash.com/photo-1642104704074-907c0698cbd9?auto=format&fit=crop&q=80&w=500",
      color: "bg-purple-500"
    }
  ];

  return (
    <div className="min-h-screen bg-black text-white">
      <Header />
      <PriceTicker />
      
      <main className="container mx-auto px-4 py-12">
        <div className="text-center mb-16">
          <h1 className="text-6xl font-bold font-serif mb-4">LEARNING <span className="text-primary">HUB.</span></h1>
          <p className="text-gray-400 text-xl font-mono">MASTER THE ON-CHAIN ECONOMY</p>
        </div>

        <div className="mb-8">
          <h2 className="text-2xl font-bold font-serif mb-6 border-b border-gray-800 pb-4">START HERE: FOUNDATIONS</h2>
          <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
            {courses.map((course, i) => (
              <div key={i} className="group cursor-pointer">
                <div className="relative h-64 mb-4 overflow-hidden border border-gray-800 group-hover:border-primary transition-colors">
                  <div className={`absolute top-4 left-4 ${course.color} text-black text-xs font-bold px-2 py-1 uppercase`}>
                    {course.level}
                  </div>
                  <AppImage src={course.image} alt={course.title} fill className="object-cover transition-transform duration-700 group-hover:scale-110 opacity-80 group-hover:opacity-100" />
                </div>
                <div className="flex justify-between items-start">
                  <div>
                    <h3 className="text-2xl font-bold font-serif mb-2 group-hover:text-primary transition-colors">{course.title}</h3>
                    <p className="text-gray-500 text-sm font-mono">{course.duration}</p>
                  </div>
                  <Icon name="ArrowRightIcon" className="text-gray-600 group-hover:text-primary" />
                </div>
              </div>
            ))}
          </div>
        </div>

        <div className="bg-primary text-black p-12 text-center mt-20">
          <h2 className="text-4xl font-bold font-serif mb-4">UNLOCK PREMIUM DEEP DIVES</h2>
          <p className="text-lg font-mono mb-8 max-w-2xl mx-auto">Join the alpha community to get exclusive access to wallet security guides and tax strategies.</p>
          <button className="bg-black text-white px-8 py-4 font-bold uppercase hover:bg-white hover:text-black transition-colors">
            Upgrade to Alpha
          </button>
        </div>
      </main>
    </div>
  );
}
```

## src/app/page.tsx
```typescript
import Homepage from '@/app/homepage/page';

export default function RootPage() {
  return <Homepage />;
}
```

## src/app/go-alpha/page.tsx
```typescript
import React from 'react';
import Header from '@/components/common/Header';
import Icon from '@/components/ui/AppIcon';

export default function GoAlpha() {
  return (
    <div className="min-h-screen bg-black text-white">
      <Header />
      
      <main className="container mx-auto px-4 py-20">
        <div className="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center mb-24">
          <div>
            <div className="inline-block bg-primary text-black font-bold px-3 py-1 text-sm mb-6">THE DEFIANT ALPHA</div>
            <h1 className="text-6xl font-bold font-serif mb-6 leading-tight">
              Join <span className="text-primary underline decoration-4 underline-offset-8">Alpha.</span><br/>
              Learn Together.<br/>
              Earn Together.
            </h1>
            <p className="text-xl text-gray-400 mb-8 leading-relaxed">
              The premium subscription designed for crypto natives who want to up their game. Get institutional-grade reports, private discord access, and yield farming strategies.
            </p>
            <button className="bg-primary text-black text-lg font-bold px-8 py-4 rounded-none hover:bg-white transition-colors">
              Try Free for 21 Days
            </button>
          </div>
          <div className="bg-gray-900 border border-gray-800 p-8 h-96 flex items-center justify-center">
             <div className="text-center">
               <Icon name="LockClosedIcon" className="mx-auto text-primary mb-4" size={64} />
               <p className="text-gray-500 font-mono">PREMIUM CONTENT LOCKED</p>
             </div>
          </div>
        </div>

        {/* Pricing Cards */}
        <div className="max-w-5xl mx-auto mb-24">
          <h2 className="text-center text-3xl font-bold font-serif mb-12">Choose Your Edge</h2>
          <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
            {/* Monthly */}
            <div className="border border-gray-800 p-8 hover:border-gray-600 transition-colors">
              <h3 className="text-primary font-bold mb-2">Alpha Monthly</h3>
              <div className="text-4xl font-bold mb-6">$15 <span className="text-sm text-gray-500 font-normal">/mo</span></div>
              <ul className="space-y-4 mb-8 text-sm text-gray-300">
                <li className="flex gap-2"><Icon name="CheckIcon" className="text-primary" size={16}/> Daily Alpha Newsletter</li>
                <li className="flex gap-2"><Icon name="CheckIcon" className="text-primary" size={16}/> 200+ Premium Tutorials</li>
                <li className="flex gap-2"><Icon name="CheckIcon" className="text-primary" size={16}/> Private Telegram Group</li>
              </ul>
              <button className="w-full border border-white py-3 font-bold hover:bg-white hover:text-black transition-colors">CHOOSE PLAN</button>
            </div>

            {/* Yearly (Highlighted) */}
            <div className="border-2 border-primary bg-gray-900 p-8 transform scale-105 relative">
              <div className="absolute top-0 right-0 bg-primary text-black text-xs font-bold px-2 py-1">BEST VALUE</div>
              <h3 className="text-primary font-bold mb-2">Alpha Yearly</h3>
              <div className="text-4xl font-bold mb-6">$144 <span className="text-sm text-gray-500 font-normal">/yr</span></div>
              <ul className="space-y-4 mb-8 text-sm text-gray-300">
                <li className="flex gap-2"><Icon name="CheckIcon" className="text-primary" size={16}/> All Monthly Features</li>
                <li className="flex gap-2"><Icon name="CheckIcon" className="text-primary" size={16}/> Exclusive Analyst Calls</li>
                <li className="flex gap-2"><Icon name="CheckIcon" className="text-primary" size={16}/> Early Access to Reports</li>
                <li className="flex gap-2"><Icon name="CheckIcon" className="text-primary" size={16}/> Save 20% vs Monthly</li>
              </ul>
              <button className="w-full bg-primary text-black py-3 font-bold hover:bg-white transition-colors">SELECTED</button>
            </div>

            {/* Crypto Payment */}
            <div className="border border-gray-800 p-8 hover:border-gray-600 transition-colors">
              <h3 className="text-primary font-bold mb-2">Pay with Crypto</h3>
              <div className="text-4xl font-bold mb-6">$108 <span className="text-sm text-gray-500 font-normal">/yr</span></div>
              <ul className="space-y-4 mb-8 text-sm text-gray-300">
                <li className="flex gap-2"><Icon name="CheckIcon" className="text-primary" size={16}/> Pay with USDC/ETH</li>
                <li className="flex gap-2"><Icon name="CheckIcon" className="text-primary" size={16}/> No Recurring Fees</li>
                <li className="flex gap-2"><Icon name="CheckIcon" className="text-primary" size={16}/> Save 40% vs Monthly</li>
              </ul>
              <button className="w-full border border-white py-3 font-bold hover:bg-white hover:text-black transition-colors">CONNECT WALLET</button>
            </div>
          </div>
        </div>
      </main>
    </div>
  );
}
```

## src/app/price-indexes/components/CryptoTableRow.tsx
```typescript
'use client';
import React from 'react';
import Icon from '@/components/ui/AppIcon';
import MiniPriceChart from './MiniPriceChart';

export default function CryptoTableRow({ crypto, isStriped, onWatchlistToggle }: any) {
  const price = crypto.price || 0;
  const change24h = crypto.change24h || 0;
  const isPositive = change24h >= 0;

  return (
    <tr className={`transition-colors ${isStriped ? 'bg-card' : 'bg-background'} hover:bg-white/5`}>
      <td className="px-6 py-4">
        <div className="flex items-center gap-4">
          {/* Watchlist Star Button */}
          <button 
            onClick={(e) => { e.stopPropagation(); onWatchlistToggle(); }}
            className="hover:scale-110 transition-transform"
          >
            <Icon 
              name="StarIcon" 
              size={16} 
              variant={crypto.isWatchlisted ? 'solid' : 'outline'}
              className={crypto.isWatchlisted ? 'text-primary' : 'text-gray-600'}
            />
          </button>

          <span className="text-sm font-bold text-muted-foreground font-data w-6 text-center">{crypto.rank}</span>
          
          <div className="flex items-center gap-3">
            <img src={crypto.image} alt={crypto.name} className="w-6 h-6 rounded-full" onError={(e) => (e.currentTarget.style.display = 'none')} />
            <div>
              <div className="font-bold text-sm text-white">{crypto.symbol?.toUpperCase()}</div>
              <div className="text-xs text-muted-foreground">{crypto.name}</div>
            </div>
          </div>
        </div>
      </td>

      <td className="px-6 py-4 text-right font-mono font-bold text-sm text-white">
        ${price > 1 ? price.toLocaleString(undefined, {minimumFractionDigits: 2}) : price.toFixed(6)}
      </td>

      <td className={`px-6 py-4 text-right font-mono font-bold text-sm ${isPositive ? 'text-green-500' : 'text-red-500'}`}>
        {isPositive ? '+' : ''}{change24h.toFixed(2)}%
      </td>

      <td className={`px-6 py-4 text-right font-mono font-bold text-sm ${crypto.change7d >= 0 ? 'text-green-500' : 'text-red-500'}`}>
        {crypto.change7d?.toFixed(2)}%
      </td>

      <td className="px-6 py-4 text-right text-sm font-mono text-muted-foreground">
        ${(crypto.marketCap / 1e9).toFixed(2)}B
      </td>

      <td className="px-6 py-4 text-right text-sm font-mono text-muted-foreground">
        ${(crypto.volume24h / 1e6).toFixed(0)}M
      </td>

      <td className="px-4 py-4 w-32">
        <MiniPriceChart data={crypto.chartData} isPositive={crypto.change7d >= 0} />
      </td>
    </tr>
  );
}```

## src/app/price-indexes/components/PriceIndexesInteractive.tsx
```typescript
'use client';

import React, { useState, useEffect } from 'react';
import { getLivePrices, getRealNews } from '@/lib/api';
import { CRYPTO_CATEGORIES } from '@/lib/categories';
import MarketHighlights from './MarketHighlights';
import CryptoTableRow from './CryptoTableRow';
import Icon from '@/components/ui/AppIcon';
import { supabase } from '@/lib/supabase-client';

export default function PriceIndexesInteractive() {
  const [coins, setCoins] = useState<any[]>([]);
  const [news, setNews] = useState<any[]>([]);
  const [watchlist, setWatchlist] = useState<string[]>([]);
  const [activeCategory, setActiveCategory] = useState('All Coins');
  const [isCategoryMenuOpen, setIsCategoryMenuOpen] = useState(false);
  const [loading, setLoading] = useState(true);
  const [user, setUser] = useState<any>(null);

  // 1. Fetch Data & User Session
  useEffect(() => {
    async function fetchData() {
      setLoading(true);
      
      // Check User
      const { data: { session } } = await supabase.auth.getSession();
      setUser(session?.user || null);

      // Fetch Watchlist if logged in
      if (session?.user) {
        const { data } = await supabase
          .from('user_watchlists')
          .select('symbol');
        if (data) setWatchlist(data.map((item: any) => item.symbol));
      }

      // Fetch Market Data
      const apiCategory = activeCategory === 'All Coins' ? 'all' : activeCategory;
      const [marketData, newsData] = await Promise.all([
        getLivePrices('usd', apiCategory),
        getRealNews()
      ]);
      
      if (Array.isArray(marketData)) {
        setCoins(marketData.map((coin: any, index: number) => ({
          ...coin,
          // Normalize API data
          price: Number(coin.current_price || coin.price || 0),
          change24h: Number(coin.price_change_percentage_24h || 0),
          change7d: Number(coin.price_change_percentage_7d_in_currency || 0),
          marketCap: Number(coin.market_cap || 0),
          volume24h: Number(coin.total_volume || 0),
          chartData: coin.sparkline_in_7d?.price?.map((p: number) => ({ value: p })) || []
        })));
      }
      setNews(newsData);
      setLoading(false);
    }
    fetchData();
  }, [activeCategory]);

  // 2. Handle Watchlist Toggle
  const handleWatchlistToggle = async (symbol: string) => {
    if (!user) {
      alert("Please login to create a watchlist.");
      return;
    }

    const upperSymbol = symbol.toUpperCase();
    if (watchlist.includes(upperSymbol)) {
      // Remove
      const newWatchlist = watchlist.filter(s => s !== upperSymbol);
      setWatchlist(newWatchlist);
      await supabase.from('user_watchlists').delete().match({ user_id: user.id, symbol: upperSymbol });
    } else {
      // Add
      setWatchlist([...watchlist, upperSymbol]);
      await supabase.from('user_watchlists').insert({ user_id: user.id, symbol: upperSymbol });
    }
  };

  const mainCategories = CRYPTO_CATEGORIES.slice(0, 4);
  const moreCategories = CRYPTO_CATEGORIES.slice(4);

  if (loading && coins.length === 0) return <div className="p-20 text-center text-primary font-mono animate-pulse">LOADING LIVE TERMINAL...</div>;

  return (
    <div className="pb-20">
      <div className="mb-8 space-y-6">
        <h1 className="text-4xl font-bold font-heading text-white">Today's Cryptocurrency Prices</h1>
        
        <div className="flex flex-wrap items-center gap-3">
          {mainCategories.map(cat => (
            <button key={cat} onClick={() => setActiveCategory(cat)} className={`px-4 py-2 rounded-full text-xs font-bold transition-colors ${activeCategory === cat ? 'bg-primary text-black' : 'bg-secondary text-muted-foreground hover:text-white'}`}>
              {cat}
            </button>
          ))}
          <div className="relative">
            <button onClick={() => setIsCategoryMenuOpen(!isCategoryMenuOpen)} className={`flex items-center gap-2 px-4 py-2 rounded-full text-xs font-bold transition-colors ${!mainCategories.includes(activeCategory) ? 'bg-primary text-black' : 'bg-secondary text-muted-foreground hover:text-white'}`}>
              {mainCategories.includes(activeCategory) ? 'More Categories' : activeCategory}
              <Icon name="ChevronDownIcon" size={14} />
            </button>
            {isCategoryMenuOpen && (
              <div className="absolute top-full left-0 mt-2 w-64 max-h-80 overflow-y-auto bg-black border border-gray-700 shadow-xl z-50 rounded-lg p-2 grid grid-cols-1">
                {moreCategories.map(cat => (
                  <button key={cat} onClick={() => { setActiveCategory(cat); setIsCategoryMenuOpen(false); }} className="text-left px-3 py-2 text-xs font-medium text-gray-300 hover:bg-primary hover:text-black rounded transition-colors">
                    {cat}
                  </button>
                ))}
              </div>
            )}
          </div>
        </div>
      </div>

      <MarketHighlights coins={coins} news={news} />

      <div className="bg-card border border-border overflow-hidden rounded-lg shadow-xl">
        <div className="overflow-x-auto">
          <table className="w-full text-left">
            <thead className="bg-secondary/50 text-xs uppercase text-muted-foreground font-bold border-b border-border">
              <tr>
                <th className="px-6 py-4">Asset</th>
                <th className="px-6 py-4 text-right">Price</th>
                <th className="px-6 py-4 text-right">24h %</th>
                <th className="px-6 py-4 text-right">7d %</th>
                <th className="px-6 py-4 text-right">Market Cap</th>
                <th className="px-6 py-4 text-right">Volume</th>
                <th className="px-6 py-4 text-right w-32">Trend</th>
              </tr>
            </thead>
            <tbody className="divide-y divide-border">
              {coins.map((coin, index) => (
                <CryptoTableRow 
                  key={coin.id || index} 
                  crypto={{
                    ...coin,
                    // Pass watchlist status to row
                    isWatchlisted: watchlist.includes(coin.symbol?.toUpperCase())
                  }} 
                  isStriped={index % 2 === 0} 
                  onWatchlistToggle={() => handleWatchlistToggle(coin.symbol)}
                />
              ))}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  );
}```

## src/app/price-indexes/components/MiniPriceChart.tsx
```typescript
'use client';
import React from 'react';
import { LineChart, Line, ResponsiveContainer } from 'recharts';

export default function MiniPriceChart({ data, isPositive }: any) {
  return (
    <div className="h-8 w-20 ml-auto">
      <ResponsiveContainer width="100%" height="100%">
        <LineChart data={data}>
          <Line type="monotone" dataKey="value" stroke={isPositive ? '#22C55E' : '#EF4444'} strokeWidth={2} dot={false} />
        </LineChart>
      </ResponsiveContainer>
    </div>
  );
}
```

## src/app/price-indexes/components/MarketHighlights.tsx
```typescript
'use client';
import React from 'react';

interface HighlightCardProps {
  title: string;
  data: any[];
  type: 'gainer' | 'loser';
}

const HighlightCard = ({ title, data, type }: HighlightCardProps) => (
  <div className="bg-card border border-border p-4 flex-1 h-full">
    <div className="flex justify-between items-center mb-4 pb-2 border-b border-border">
      <h3 className="font-bold text-lg text-white">{title}</h3>
      <span className="text-xs text-muted-foreground">24h</span>
    </div>
    <div className="space-y-3">
      {data.length > 0 ? data.map((coin, index) => (
        <div key={index} className="flex justify-between items-center">
          <div className="flex items-center gap-2">
            <img src={coin.image} alt={coin.name} className="w-6 h-6 rounded-full" onError={(e) => e.currentTarget.style.display='none'} />
            <span className="font-bold text-sm text-foreground">{coin.symbol}</span>
          </div>
          <span className={`text-sm font-mono font-bold ${type === 'gainer' ? 'text-green-500' : 'text-red-500'}`}>
            {type === 'gainer' ? '+' : ''}{coin.change24h.toFixed(2)}%
          </span>
        </div>
      )) : <div className="text-muted-foreground text-xs py-4 text-center">Loading...</div>}
    </div>
  </div>
);

export default function MarketHighlights({ coins, news }: { coins: any[], news: any[] }) {
  // Sort by change24h (guaranteed to be a number now)
  const sorted = [...coins].sort((a, b) => b.change24h - a.change24h);
  const gainers = sorted.slice(0, 3);
  const losers = sorted.slice(sorted.length - 3).reverse();

  return (
    <div className="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
      <HighlightCard title="Top Gainers" data={gainers} type="gainer" />
      <HighlightCard title="Top Losers" data={losers} type="loser" />
      
      <div className="bg-card border border-border p-4 flex-1 h-full">
        <h3 className="font-bold text-lg mb-4 pb-2 border-b border-border text-white">Hot Market News</h3>
        <div className="space-y-4">
          {news.length > 0 ? news.map((item, i) => (
            <a href={item.url} target="_blank" key={i} className="flex gap-3 group hover:bg-white/5 p-2 rounded transition-colors">
              <img src={item.image} alt="news" className="w-12 h-12 object-cover rounded" />
              <div>
                <p className="text-xs font-bold line-clamp-2 text-white group-hover:text-primary leading-tight">{item.title}</p>
                <span className="text-[10px] text-muted-foreground mt-1 block">{item.source}  {new Date(item.published_on * 1000).getHours()}h ago</span>
              </div>
            </a>
          )) : <div className="text-xs text-muted-foreground text-center py-4">Loading news...</div>}
        </div>
      </div>
    </div>
  );
}
```

## src/app/price-indexes/page.tsx
```typescript
import type { Metadata } from 'next';
import Breadcrumb from '@/components/common/Breadcrumb';
import PriceIndexesInteractive from './components/PriceIndexesInteractive';

export const metadata = {
  title: 'Price Indexes - CryptoBrainNews',
  description: 'Top 100 Cryptocurrencies by Market Cap',
};

export default function PriceIndexesPage() {
  return (
    <main className="pt-4">
      <div className="container mx-auto px-4 lg:px-8">
        <Breadcrumb />
        <PriceIndexesInteractive />
      </div>
    </main>
  );
}
```

## src/components/layout/DataSidebar.tsx
```typescript
'use client';
import React from 'react';
import Link from 'next/link';
import { usePathname } from 'next/navigation';

const MENU = {
  "Markets": ["Spot", "Futures", "Options", "Crypto Indices"],
  "ETFs": ["Bitcoin ETFs", "Ethereum ETFs", "Solana ETFs"],
  "On-Chain": ["Bitcoin", "Ethereum", "Solana", "Layer 2s"],
  "DeFi": ["TVL", "DEX Volume", "Lending", "Restaking"],
};

export default function DataSidebar() {
  const pathname = usePathname();

  return (
    <aside className="w-64 bg-black border-r border-gray-800 min-h-screen p-6 hidden lg:block sticky top-16 h-[calc(100vh-4rem)] overflow-y-auto">
      <div className="space-y-8">
        {Object.entries(MENU).map(([category, items]) => (
          <div key={category}>
            <h3 className="font-black text-[10px] uppercase text-primary tracking-widest mb-4 border-b border-gray-800 pb-2">{category}</h3>
            <ul className="space-y-1">
              {items.map(item => {
                const href = `/data/${category.toLowerCase()}/${item.toLowerCase().replace(/ /g, '-')}`;
                const isActive = pathname === href;
                return (
                  <li key={item}>
                    <Link 
                      href={href}
                      className={`block text-xs font-bold py-2 px-3 rounded transition-all ${
                        isActive ? 'bg-white/10 text-white border-l-2 border-primary' : 'text-gray-500 hover:text-white hover:bg-white/5'
                      }`}
                    >
                      {item}
                    </Link>
                  </li>
                );
              })}
            </ul>
          </div>
        ))}
      </div>
    </aside>
  );
}
```

## src/components/layout/Sidebar.tsx
```typescript
'use client';
import React from 'react';
import Link from 'next/link';
import { usePathname } from 'next/navigation';

const MENU = {
  "Markets": ["Spot", "Futures", "Options", "Crypto Indices"],
  "ETFs": ["Bitcoin ETFs", "Ethereum ETFs", "Solana ETFs"],
  "Stablecoins": ["USD Pegged", "Non-USD Pegged", "Supply Flow"],
  "On-Chain": ["Bitcoin", "Ethereum", "Solana", "Layer 2s"],
  "DeFi": ["TVL", "DEX Volume", "Lending", "Restaking"],
  "NFTs": ["Marketplaces", "Collections", "Gaming"]
};

export default function Sidebar() {
  const pathname = usePathname();

  return (
    <aside className="w-64 bg-[#f8f9fa] border-r border-gray-200 min-h-screen p-6 hidden lg:block">
      <div className="space-y-8">
        {Object.entries(MENU).map(([category, items]) => (
          <div key={category}>
            <h3 className="font-black text-xs uppercase text-gray-400 tracking-widest mb-4">{category}</h3>
            <ul className="space-y-2">
              {items.map(item => (
                <li key={item}>
                  <Link 
                    href={`/data/${category.toLowerCase()}/${item.toLowerCase().replace(/ /g, '-')}`}
                    className={`block text-sm font-bold transition-colors ${
                      pathname.includes(item.toLowerCase()) ? 'text-primary' : 'text-gray-700 hover:text-black'
                    }`}
                  >
                    {item}
                  </Link>
                </li>
              ))}
            </ul>
          </div>
        ))}
      </div>
    </aside>
  );
}```

## src/components/layout/Footer.tsx
```typescript
import React from 'react';
import Link from 'next/link';
import Icon from '@/components/ui/AppIcon';

export default function Footer() {
  return (
    <footer className="bg-black text-white border-t-4 border-primary pt-16 pb-8">
      <div className="container mx-auto px-4 lg:px-8">
        <div className="grid grid-cols-1 md:grid-cols-4 gap-12 mb-16">
          {/* Brand Column */}
          <div className="space-y-6">
            <div className="flex items-center gap-2">
              <div className="bg-primary w-10 h-10 flex items-center justify-center font-serif font-black text-2xl text-black">
                C
              </div>
              <span className="font-serif text-2xl font-bold tracking-tighter uppercase">
                Crypto<span className="text-primary">Brain</span>
              </span>
            </div>
            <p className="text-gray-400 text-sm leading-relaxed font-caption">
              The definitive source for institutional-grade crypto intelligence, DeFi data, and on-chain education. Leading the transition to the sovereign economy.
            </p>
            <div className="flex gap-4">
              {['Twitter', 'Telegram', 'Discord', 'Linkedin'].map((social) => (
                <div key={social} className="w-8 h-8 bg-gray-800 flex items-center justify-center hover:bg-primary hover:text-black transition-colors cursor-pointer">
                  <span className="text-xs">{social[0]}</span>
                </div>
              ))}
            </div>
          </div>

          {/* Links Column 1 */}
          <div>
            <h4 className="text-primary font-bold uppercase tracking-widest mb-6 text-sm">Network</h4>
            <ul className="space-y-4 text-sm text-gray-400 font-medium">
              <li><Link href="/homepage" className="hover:text-white transition-colors">News Hub</Link></li>
              <li><Link href="/markets-overview" className="hover:text-white transition-colors">Data Terminal</Link></li>
              <li><Link href="/learning" className="hover:text-white transition-colors">Learning Hub</Link></li>
              <li><Link href="/go-alpha" className="hover:text-white transition-colors">Go Alpha</Link></li>
            </ul>
          </div>

          {/* Links Column 2 */}
          <div>
            <h4 className="text-primary font-bold uppercase tracking-widest mb-6 text-sm">Policies</h4>
            <ul className="space-y-4 text-sm text-gray-400 font-medium">
              <li><Link href="#" className="hover:text-white transition-colors">Privacy Policy</Link></li>
              <li><Link href="#" className="hover:text-white transition-colors">Terms of Service</Link></li>
              <li><Link href="#" className="hover:text-white transition-colors">Cookie Policy</Link></li>
              <li><Link href="#" className="hover:text-white transition-colors">Editorial Guidelines</Link></li>
            </ul>
          </div>

          {/* Newsletter */}
          <div>
            <h4 className="text-primary font-bold uppercase tracking-widest mb-6 text-sm">Daily Briefing</h4>
            <p className="text-gray-400 text-sm mb-4">Get the most important alpha delivered to your inbox every morning.</p>
            <div className="flex gap-2">
              <input 
                type="email" 
                placeholder="Email address" 
                className="bg-gray-900 border border-gray-800 px-4 py-2 text-sm w-full focus:outline-none focus:border-primary text-white"
              />
              <button className="bg-primary text-black font-bold px-4 py-2 text-sm hover:bg-white transition-colors">
                JOIN
              </button>
            </div>
          </div>
        </div>

        <div className="border-t border-gray-900 pt-8 flex flex-col md:flex-row justify-between items-center text-xs text-gray-600 font-mono">
          <p> 2026 CRYPTOBRAINNEWS. ALL RIGHTS RESERVED. MARKET DATA BY DEFILLAMA & COINCAP.</p>
          <div className="flex gap-6 mt-4 md:mt-0">
            <span>TWITTER</span>
            <span>TELEGRAM</span>
            <span>DISCORD</span>
          </div>
        </div>
      </div>
    </footer>
  );
}
```

## src/components/ui/AppImage.tsx
```typescript
'use client';

import React, { useState } from 'react';
import Image from 'next/image';

interface AppImageProps {
    src: string;
    alt: string;
    width?: number;
    height?: number;
    className?: string;
    priority?: boolean;
    quality?: number;
    placeholder?: 'blur' | 'empty';
    blurDataURL?: string;
    fill?: boolean;
    sizes?: string;
    onClick?: () => void;
    fallbackSrc?: string;
    [key: string]: any;
}

function AppImage({
    src,
    alt,
    width,
    height,
    className = '',
    priority = false,
    quality = 75,
    placeholder = 'empty',
    blurDataURL,
    fill = false,
    sizes,
    onClick,
    fallbackSrc = '/assets/images/no_image.png', // Ensure this asset exists later
    ...props
}: AppImageProps) {
    const [imageSrc, setImageSrc] = useState(src);
    const [isLoading, setIsLoading] = useState(true);
    const [hasError, setHasError] = useState(false);

    const isExternal = imageSrc.startsWith('http://') || imageSrc.startsWith('https://');
    const isLocal = imageSrc.startsWith('/') || imageSrc.startsWith('./') || imageSrc.startsWith('data:');

    const handleError = () => {
        if (!hasError && imageSrc !== fallbackSrc) {
            // setImageSrc(fallbackSrc); // Commented out to prevent loop if fallback is missing
            setHasError(true);
        }
        setIsLoading(false);
    };

    const handleLoad = () => {
        setIsLoading(false);
        setHasError(false);
    };

    const commonClassName = `${className} ${isLoading ? 'bg-gray-200' : ''} ${onClick ? 'cursor-pointer hover:opacity-90 transition-opacity' : ''}`;

    if (isExternal && !isLocal) {
        const imgStyle: React.CSSProperties = {};
        if (width) imgStyle.width = width;
        if (height) imgStyle.height = height;

        if (fill) {
            return (
                <div className={`relative ${className}`} style={{ width: width || '100%', height: height || '100%' }}>
                    <img
                        src={imageSrc}
                        alt={alt}
                        className={`${commonClassName} absolute inset-0 w-full h-full object-cover`}
                        onError={handleError}
                        onLoad={handleLoad}
                        onClick={onClick}
                        style={imgStyle}
                        {...props}
                    />
                </div>
            );
        }

        return (
            <img
                src={imageSrc}
                alt={alt}
                className={commonClassName}
                onError={handleError}
                onLoad={handleLoad}
                onClick={onClick}
                style={imgStyle}
                {...props}
            />
        );
    }

    const imageProps = {
        src: imageSrc,
        alt,
        className: commonClassName,
        priority,
        quality,
        placeholder,
        blurDataURL,
        unoptimized: true,
        onError: handleError,
        onLoad: handleLoad,
        onClick,
        ...props,
    };

    if (fill) {
        return (
            <div className={`relative ${className}`}>
                <Image
                    {...imageProps}
                    fill
                    sizes={sizes || '100vw'}
                    style={{ objectFit: 'cover' }}
                />
            </div>
        );
    }

    return (
        <Image
            {...imageProps}
            width={width || 400}
            height={height || 300}
        />
    );
}

export default AppImage;
```

## src/components/ui/AppIcon.tsx
```typescript
'use client';

import React from 'react';
import * as HeroIcons from '@heroicons/react/24/outline';
import * as HeroIconsSolid from '@heroicons/react/24/solid';
import { QuestionMarkCircleIcon } from '@heroicons/react/24/outline';

type IconVariant = 'outline' | 'solid';

interface IconProps {
    name: string; 
    variant?: IconVariant;
    size?: number;
    className?: string;
    onClick?: () => void;
    disabled?: boolean;
    [key: string]: any;
}

function Icon({
    name,
    variant = 'outline',
    size = 24,
    className = '',
    onClick,
    disabled = false,
    ...props
}: IconProps) {
    const iconSet = variant === 'solid' ? HeroIconsSolid : HeroIcons;
    const IconComponent = iconSet[name as keyof typeof iconSet] as React.ComponentType<any>;

    if (!IconComponent) {
        return (
            <QuestionMarkCircleIcon
                width={size}
                height={size}
                className={`text-gray-400 ${disabled ? 'opacity-50 cursor-not-allowed' : ''} ${className}`}
                onClick={disabled ? undefined : onClick}
                {...props}
            />
        );
    }

    return (
        <IconComponent
            width={size}
            height={size}
            className={`${disabled ? 'opacity-50 cursor-not-allowed' : onClick ? 'cursor-pointer hover:opacity-80' : ''} ${className}`}
            onClick={disabled ? undefined : onClick}
            {...props}
        />
    );
}

export default Icon;
```

## src/components/auth/AuthButton.tsx
```typescript
'use client';
import { createClient } from '@supabase/supabase-js';
import { useState, useEffect } from 'react';
import Icon from '@/components/ui/AppIcon';

const supabase = createClient(
  process.env.NEXT_PUBLIC_SUPABASE_URL!,
  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
);

export default function AuthButton() {
  const [user, setUser] = useState<any>(null);
  const [email, setEmail] = useState('');
  const [token, setToken] = useState('');
  const [view, setView] = useState<'email' | 'code'>('email');
  const [loading, setLoading] = useState(false);
  const [message, setMessage] = useState('');

  useEffect(() => {
    supabase.auth.getSession().then(({ data: { session } }) => {
      setUser(session?.user ?? null);
    });
    const { data: { subscription } } = supabase.auth.onAuthStateChange((_event, session) => {
      setUser(session?.user ?? null);
    });
    return () => subscription.unsubscribe();
  }, []);

  const handleSendCode = async (e: React.FormEvent) => {
    e.preventDefault();
    setLoading(true);
    setMessage('');
    const { error } = await supabase.auth.signInWithOtp({
      email,
      options: { shouldCreateUser: true }
    });
    setLoading(false);
    if (error) setMessage(error.message);
    else setView('code');
  };

  const handleVerifyCode = async (e: React.FormEvent) => {
    e.preventDefault();
    setLoading(true);
    const { error } = await supabase.auth.verifyOtp({
      email,
      token,
      type: 'email'
    });
    setLoading(false);
    if (error) setMessage(error.message);
  };

  const handleLogout = async () => await supabase.auth.signOut();

  if (user) {
    return (
      <div className="flex items-center gap-4">
        <span className="text-[10px] font-black text-primary uppercase tracking-[0.2em] border border-primary/30 px-2 py-1">Alpha Member</span>
        <button onClick={handleLogout} className="bg-white/10 text-white px-4 py-2 text-[10px] font-black hover:bg-white hover:text-black transition-all uppercase">
          LOGOUT
        </button>
      </div>
    );
  }

  return (
    <div className="flex items-center gap-2">
      {view === 'email' ? (
        <form onSubmit={handleSendCode} className="flex gap-2">
          <input 
            type="email" 
            placeholder="ENTER EMAIL..." 
            value={email}
            onChange={(e) => setEmail(e.target.value)}
            className="bg-black border border-gray-800 px-4 py-2 text-[10px] text-white focus:border-primary outline-none w-48 font-black tracking-widest"
            required
          />
          <button type="submit" disabled={loading} className="bg-primary text-black px-6 py-2 text-[10px] font-black hover:bg-white transition-all uppercase">
            {loading ? 'SENDING...' : 'LOGIN'}
          </button>
        </form>
      ) : (
        <form onSubmit={handleVerifyCode} className="flex gap-2 animate-in fade-in zoom-in duration-300">
          <input 
            type="text" 
            placeholder="6-DIGIT CODE" 
            value={token}
            onChange={(e) => setToken(e.target.value)}
            className="bg-black border border-primary px-4 py-2 text-[10px] text-white focus:ring-2 focus:ring-primary outline-none w-32 font-black tracking-[0.3em]"
            required
          />
          <button type="submit" disabled={loading} className="bg-white text-black px-6 py-2 text-[10px] font-black hover:bg-primary transition-all uppercase">
            {loading ? 'VERIFYING...' : 'CONFIRM'}
          </button>
          <button onClick={() => setView('email')} className="text-gray-500 hover:text-white p-2">
            <Icon name="XMarkIcon" size={16} />
          </button>
        </form>
      )}
      {message && <div className="fixed bottom-4 right-4 bg-red-600 text-white px-6 py-3 text-[10px] font-black tracking-widest shadow-2xl z-[2000]">{message.toUpperCase()}</div>}
    </div>
  );
}
```

## src/components/auth/AlphaGate.tsx
```typescript
'use client';
import React, { useEffect, useState } from 'react';
import { supabase } from '@/lib/supabase-client'; // Use our shared client
import Icon from '@/components/ui/AppIcon';

export default function AlphaGate({ children }: { children: React.ReactNode }) {
  const [session, setSession] = useState<any>(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    // Check active session on mount
    supabase.auth.getSession().then(({ data: { session } }) => {
      setSession(session);
      setLoading(false);
    });

    // Listen for login/logout events
    const { data: { subscription } } = supabase.auth.onAuthStateChange((_event, session) => {
      setSession(session);
    });

    return () => subscription.unsubscribe();
  }, []);

  const handleLogin = async () => {
    await supabase.auth.signInWithOAuth({
      provider: 'google',
      options: { redirectTo: `${window.location.origin}/auth/callback` },
    });
  };

  if (loading) return <div className="h-64 bg-card animate-pulse border border-border"></div>;

  // 1. IF USER IS LOGGED IN -> SHOW CONTENT
  if (session) {
    return <div className="relative">{children}</div>;
  }

  // 2. IF NOT LOGGED IN -> SHOW LOCK SCREEN
  return (
    <div className="relative overflow-hidden border border-border bg-card">
      {/* Blurred Content Background (The "Teaser") */}
      <div className="filter blur-md opacity-30 pointer-events-none select-none grayscale" aria-hidden="true">
        {children}
      </div>

      {/* Lock Overlay */}
      <div className="absolute inset-0 flex flex-col items-center justify-center z-10 bg-black/60 p-6 text-center backdrop-blur-sm">
        <div className="bg-primary/10 border-2 border-primary p-4 rounded-full mb-6 shadow-[0_0_30px_rgba(250,191,44,0.3)]">
          <Icon name="LockClosedIcon" className="text-primary" size={40} />
        </div>
        
        <h3 className="text-3xl font-black font-heading text-white mb-3 uppercase tracking-tighter">
          Alpha Intelligence <span className="text-primary">Locked</span>
        </h3>
        
        <p className="text-gray-300 font-mono text-xs mb-8 max-w-md leading-relaxed">
          This tool utilizes institutional-grade on-chain data. Join 50,000+ traders accessing deep liquidity metrics and yield strategies.
        </p>
        
        <button 
          onClick={handleLogin}
          className="bg-primary text-black font-black px-8 py-4 hover:bg-white transition-all uppercase tracking-[0.2em] text-xs shadow-lg hover:scale-105"
        >
          Unlock Alpha Access
        </button>
      </div>
    </div>
  );
}
```

## src/components/common/Header.tsx
```typescript
'use client';
import React, { useState } from 'react';
import Link from 'next/link';
import { usePathname } from 'next/navigation';
import Icon from '@/components/ui/AppIcon';
import AuthButton from '@/components/auth/AuthButton';

const Header = () => {
  const pathname = usePathname();
  const [hoveredLink, setHoveredLink] = useState<string | null>(null);

  const navConfig = [
    { label: 'NEWS', href: '/homepage', subItems: ['Bitcoin', 'Ethereum', 'DeFi', 'Policy'] },
    { label: 'MARKETS', href: '/markets-overview', subItems: ['Spot', 'Futures', 'ETFs'] },
    { label: 'PRICES', href: '/price-indexes', subItems: ['Top 100', 'Movers'] },
    { label: 'DEFI', href: '/de-fi-analytics', subItems: [] },
    { label: 'LEARNING', href: '/learning', subItems: [] },
  ];

  return (
    <header className="fixed top-0 left-0 right-0 z-[2000] bg-black border-b border-white/10 h-16 shadow-2xl" onMouseLeave={() => setHoveredLink(null)}>
      <div className="container mx-auto px-4 lg:px-8 h-full flex items-center justify-between">
        
        {/* LOGO */}
        <Link href="/homepage" className="flex items-center gap-2 group bg-black">
          <div className="bg-primary text-black font-black p-1 text-xl leading-none transition-all group-hover:rotate-12">CB</div>
          <span className="font-serif font-black text-white text-2xl tracking-tighter">CRYPTO<span className="text-primary">BRAIN</span></span>
        </Link>

        {/* NAVIGATION */}
        <nav className="hidden lg:flex items-center gap-8 h-full">
          {navConfig.map((item) => (
            <div key={item.label} className="relative h-full flex items-center group" onMouseEnter={() => setHoveredLink(item.label)}>
              <Link href={item.href} className={`text-[11px] font-black tracking-[0.1em] transition-colors flex items-center gap-1 ${pathname === item.href || hoveredLink === item.label ? 'text-primary' : 'text-gray-400 hover:text-white'}`}>
                {item.label}
                {item.subItems.length > 0 && <Icon name="ChevronDownIcon" size={10} className="group-hover:rotate-180 transition-transform" />}
              </Link>

              {/* DROPDOWN */}
              {item.subItems.length > 0 && hoveredLink === item.label && (
                <div className="absolute top-16 left-0 w-48 bg-black border border-gray-800 shadow-2xl py-4 animate-in fade-in slide-in-from-top-2 duration-200">
                  {item.subItems.map(sub => (
                    <Link key={sub} href={item.href} className="block px-6 py-2 text-[10px] font-black text-gray-500 hover:text-primary hover:bg-gray-900 transition-colors uppercase tracking-widest">{sub}</Link>
                  ))}
                </div>
              )}
            </div>
          ))}
        </nav>

        {/* ACTIONS */}
        <div className="flex items-center gap-6">
          <div className="hidden lg:flex items-center gap-4 text-gray-500">
            <Icon name="MagnifyingGlassIcon" size={18} className="hover:text-primary cursor-pointer transition-colors" />
            <span className="text-[10px] font-black border border-gray-800 px-2 py-1 hover:text-white cursor-pointer">EN</span>
          </div>
          <Link href="/go-alpha" className="bg-primary text-black text-[10px] font-black px-4 py-2 hover:bg-white transition-all transform hover:-translate-y-0.5 uppercase tracking-widest">Go Alpha</Link>
          <AuthButton />
        </div>
      </div>
    </header>
  );
};
export default Header;```

## src/components/common/Breadcrumb.tsx
```typescript
'use client';

import React from 'react';
import Link from 'next/link';
import { usePathname } from 'next/navigation';
import Icon from '@/components/ui/AppIcon';

interface BreadcrumbItem {
  label: string;
  path: string;
}

interface BreadcrumbProps {
  items?: BreadcrumbItem[];
  className?: string;
}

const Breadcrumb = ({ items, className = '' }: BreadcrumbProps) => {
  const pathname = usePathname();

  const generateBreadcrumbs = (): BreadcrumbItem[] => {
    if (items && items.length > 0) {
      return items;
    }

    // Start with Home
    const breadcrumbs: BreadcrumbItem[] = [
      { label: 'Home', path: '/homepage' }
    ];

    // Split path, filtering out empty strings
    const pathSegments = pathname.split('/').filter(segment => segment);

    // Map for pretty labels
    const pathMap: Record<string, string> = {
      'homepage': 'Home',
      'price-indexes': 'Price Indexes',
      'markets-overview': 'Markets Overview',
      'de-fi-analytics': 'DeFi Analytics',
      'article-reader': 'Article Reader'
    };

    let currentPath = '';
    
    pathSegments.forEach(segment => {
      currentPath += `/${segment}`;
      
      // Prevent adding "Home" twice if we are on /homepage
      if (currentPath === '/homepage') return;

      const label = pathMap[segment] || segment.split('-').map(word => 
        word.charAt(0).toUpperCase() + word.slice(1)
      ).join(' ');
      
      breadcrumbs.push({
        label,
        path: currentPath
      });
    });

    return breadcrumbs;
  };

  const breadcrumbItems = generateBreadcrumbs();

  // If we are just on Home, don't show breadcrumbs
  if (breadcrumbItems.length <= 1 && pathname === '/homepage') {
    return null;
  }

  return (
    <nav 
      className={`flex items-center gap-2 py-4 text-sm font-caption ${className}`}
      aria-label="Breadcrumb"
    >
      {breadcrumbItems.map((item, index) => {
        const isLast = index === breadcrumbItems.length - 1;
        const isFirst = index === 0;

        return (
          <React.Fragment key={item.path}>
            {!isFirst && (
              <Icon 
                name="ChevronRightIcon" 
                size={16} 
                className="text-muted-foreground" 
              />
            )}
            {isLast ? (
              <span 
                className="text-primary font-medium"
                aria-current="page"
              >
                {item.label}
              </span>
            ) : (
              <Link
                href={item.path}
                className="text-muted-foreground hover:text-foreground transition-smooth"
              >
                {item.label}
              </Link>
            )}
          </React.Fragment>
        );
      })}
    </nav>
  );
};

export default Breadcrumb;
```

## src/components/common/PriceTicker.tsx
```typescript
'use client';

import React, { useState, useEffect } from 'react';
import Icon from '@/components/ui/AppIcon';

const PriceTicker = () => {
  const [prices, setPrices] = useState<any[]>([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    async function fetchPrices() {
      try {
        // FETCH FROM OUR LOCAL API ROUTE (/api/prices) - This is the key fix
        const res = await fetch('/api/prices'); 
        const data = await res.json();
        
        if (Array.isArray(data)) {
          const formatted = data.map((c) => ({
            symbol: c.symbol.toUpperCase(),
            price: c.current_price,
            changePercent24h: c.price_change_percentage_24h
          }));
          setPrices(formatted);
        }
      } catch (e) {
        console.error("Ticker client fetch failed", e);
        // If the client fetch fails, we show nothing until the next check
        setPrices([]); 
      } finally {
        setLoading(false);
      }
    }

    fetchPrices();
    const interval = setInterval(fetchPrices, 60000); 
    return () => clearInterval(interval);
  }, []);

  if (loading || prices.length === 0) {
    return (
      <div className="sticky top-16 z-[999] bg-black border-b border-primary/20 h-14 flex items-center px-4">
        <span className="text-xs font-data text-primary animate-pulse tracking-tighter">ESTABLISHING SECURE DATA STREAM...</span>
      </div>
    );
  }

  const displayPrices = [...prices, ...prices];

  return (
    <div className="sticky top-16 z-[999] bg-black border-b border-primary h-14 flex items-center overflow-hidden">
      <div className="flex animate-scroll whitespace-nowrap gap-8 px-4">
        {displayPrices.map((crypto, index) => (
          <div key={`${crypto.symbol}-${index}`} className="flex items-center gap-3">
            <span className="text-sm font-black text-primary font-heading italic">{crypto.symbol}</span>
            <span className="text-sm font-bold text-white font-data">
              ${crypto.price > 1 ? crypto.price.toLocaleString(undefined, {minimumFractionDigits: 2}) : crypto.price.toFixed(4)}
            </span>
            <span className={`text-xs font-bold font-data ${crypto.changePercent24h >= 0 ? 'text-green-400' : 'text-red-400'}`}>
              {crypto.changePercent24h >= 0 ? '' : ''} {Math.abs(crypto.changePercent24h).toFixed(2)}%
            </span>
          </div>
        ))}
      </div>
      <style jsx>{`
        @keyframes scroll { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
        .animate-scroll { animation: scroll 60s linear infinite; }
      `}</style>
    </div>
  );
};

export default PriceTicker;
```

## src/components/common/SearchInterface.tsx
```typescript
'use client';

import React, { useState, useEffect, useRef } from 'react';
import Icon from '@/components/ui/AppIcon';

interface SearchResult {
  id: string;
  title: string;
  category: string;
  date: string;
  url: string;
}

interface SearchInterfaceProps {
  isOpen: boolean;
  onClose: () => void;
  className?: string;
}

const SearchInterface = ({ isOpen, onClose, className = '' }: SearchInterfaceProps) => {
  const [searchQuery, setSearchQuery] = useState('');
  const [searchResults, setSearchResults] = useState<SearchResult[]>([]);
  const [isLoading, setIsLoading] = useState(false);
  const [selectedIndex, setSelectedIndex] = useState(-1);
  const inputRef = useRef<HTMLInputElement>(null);
  const resultsRef = useRef<HTMLDivElement>(null);

  const mockResults: SearchResult[] = [
    {
      id: '1',
      title: 'Bitcoin Reaches New All-Time High Above $50,000',
      category: 'Markets',
      date: '2026-01-28',
      url: '/article-reader?id=1'
    },
    {
      id: '2',
      title: 'Ethereum 2.0 Staking Surpasses 10 Million ETH',
      category: 'DeFi',
      date: '2026-01-27',
      url: '/article-reader?id=2'
    },
    {
      id: '3',
      title: 'Solana Network Upgrade Improves Transaction Speed',
      category: 'Technology',
      date: '2026-01-26',
      url: '/article-reader?id=3'
    },
    {
      id: '4',
      title: 'Major Exchange Lists New DeFi Tokens',
      category: 'Markets',
      date: '2026-01-25',
      url: '/article-reader?id=4'
    }
  ];

  useEffect(() => {
    if (isOpen && inputRef.current) {
      inputRef.current.focus();
    }
  }, [isOpen]);

  useEffect(() => {
    const handleEscape = (e: KeyboardEvent) => {
      if (e.key === 'Escape' && isOpen) {
        onClose();
      }
    };

    document.addEventListener('keydown', handleEscape);
    return () => document.removeEventListener('keydown', handleEscape);
  }, [isOpen, onClose]);

  useEffect(() => {
    if (searchQuery.trim().length > 0) {
      setIsLoading(true);
      const timer = setTimeout(() => {
        const filtered = mockResults.filter(result =>
          result.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
          result.category.toLowerCase().includes(searchQuery.toLowerCase())
        );
        setSearchResults(filtered);
        setIsLoading(false);
        setSelectedIndex(-1);
      }, 300);

      return () => clearTimeout(timer);
    } else {
      setSearchResults([]);
      setSelectedIndex(-1);
    }
  }, [searchQuery]);

  const handleKeyDown = (e: React.KeyboardEvent) => {
    if (searchResults.length === 0) return;

    if (e.key === 'ArrowDown') {
      e.preventDefault();
      setSelectedIndex(prev => 
        prev < searchResults.length - 1 ? prev + 1 : prev
      );
    } else if (e.key === 'ArrowUp') {
      e.preventDefault();
      setSelectedIndex(prev => prev > 0 ? prev - 1 : -1);
    } else if (e.key === 'Enter' && selectedIndex >= 0) {
      e.preventDefault();
      window.location.href = searchResults[selectedIndex].url;
    }
  };

  const handleResultClick = (url: string) => {
    window.location.href = url;
    onClose();
  };

  const handleClear = () => {
    setSearchQuery('');
    setSearchResults([]);
    setSelectedIndex(-1);
    inputRef.current?.focus();
  };

  if (!isOpen) return null;

  return (
    <div className={`fixed inset-0 z-[1001] bg-background ${className}`}>
      <div className="flex items-start justify-center min-h-screen px-4 pt-20">
        <div className="w-full max-w-3xl">
          {/* Search Input */}
          <div className="relative">
            <div className="absolute left-6 top-1/2 -translate-y-1/2">
              <Icon name="MagnifyingGlassIcon" size={24} className="text-muted-foreground" />
            </div>
            <input
              ref={inputRef}
              type="text"
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              onKeyDown={handleKeyDown}
              placeholder="Search crypto news, markets, and analytics..."
              className="w-full h-16 pl-16 pr-16 text-lg bg-card text-foreground border border-border focus:outline-none focus:ring-2 focus:ring-primary rounded-[4px]"
            />
            {searchQuery && (
              <button
                onClick={handleClear}
                className="absolute right-6 top-1/2 -translate-y-1/2 p-2 text-muted-foreground hover:text-foreground transition-smooth"
                aria-label="Clear search"
              >
                <Icon name="XMarkIcon" size={20} />
              </button>
            )}
          </div>

          {/* Search Results */}
          {searchQuery.trim().length > 0 && (
            <div 
              ref={resultsRef}
              className="mt-4 bg-card border border-border shadow-lg max-h-[60vh] overflow-y-auto"
            >
              {isLoading ? (
                <div className="flex items-center justify-center py-12">
                  <div className="text-muted-foreground font-caption">Searching...</div>
                </div>
              ) : searchResults.length > 0 ? (
                <div className="divide-y divide-border">
                  {searchResults.map((result, index) => (
                    <button
                      key={result.id}
                      onClick={() => handleResultClick(result.url)}
                      className={`w-full text-left px-6 py-4 transition-smooth ${
                        index === selectedIndex
                          ? 'bg-primary text-primary-foreground'
                          : 'hover:bg-muted'
                      }`}
                    >
                      <div className="flex items-start justify-between gap-4">
                        <div className="flex-1 min-w-0">
                          <h3 className="text-base font-medium font-heading mb-1 truncate">
                            {result.title}
                          </h3>
                          <div className="flex items-center gap-3 text-xs font-caption">
                            <span className={index === selectedIndex ? 'opacity-80' : 'text-primary'}>
                              {result.category}
                            </span>
                            <span className={index === selectedIndex ? 'opacity-60' : 'text-muted-foreground'}>
                              {new Date(result.date).toLocaleDateString('en-US', {
                                month: 'short',
                                day: 'numeric',
                                year: 'numeric'
                              })}
                            </span>
                          </div>
                        </div>
                        <Icon 
                          name="ArrowRightIcon" 
                          size={20} 
                          className={index === selectedIndex ? 'opacity-80' : 'text-muted-foreground'}
                        />
                      </div>
                    </button>
                  ))}
                </div>
              ) : (
                <div className="flex flex-col items-center justify-center py-12 px-6 text-center">
                  <Icon name="MagnifyingGlassIcon" size={48} className="text-muted-foreground mb-4" />
                  <p className="text-muted-foreground font-caption">
                    No results found for "{searchQuery}"
                  </p>
                  <p className="text-sm text-muted-foreground mt-2">
                    Try different keywords or browse our categories
                  </p>
                </div>
              )}
            </div>
          )}

          {/* Close Button */}
          <button
            onClick={onClose}
            className="mt-8 px-6 py-3 text-sm font-medium text-foreground hover:text-primary transition-smooth flex items-center gap-2"
          >
            <Icon name="XMarkIcon" size={20} />
            Close Search
          </button>

          {/* Keyboard Shortcuts Hint */}
          <div className="mt-8 flex items-center gap-6 text-xs text-muted-foreground font-caption">
            <div className="flex items-center gap-2">
              <kbd className="px-2 py-1 bg-muted border border-border"></kbd>
              <span>Navigate</span>
            </div>
            <div className="flex items-center gap-2">
              <kbd className="px-2 py-1 bg-muted border border-border">Enter</kbd>
              <span>Select</span>
            </div>
            <div className="flex items-center gap-2">
              <kbd className="px-2 py-1 bg-muted border border-border">Esc</kbd>
              <span>Close</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default SearchInterface;
```

## src/styles/globals.css
```typescript
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --font-heading: 'Merriweather', serif;
    --font-body: 'Inter', sans-serif;
    --font-caption: 'JetBrains Mono', monospace;
    --font-data: 'Space Mono', monospace;

    --color-background: #000000;
    --color-foreground: #ffffff;
    --color-primary: #FABF2C; 
    --color-primary-foreground: #000000;
    --color-border: #333333;
    --color-card: #0F0F0F;
    --color-card-foreground: #ffffff;
    --color-muted: #1A1A1A;
    --color-muted-foreground: #A3A3A3;
    --color-success: #22C55E;
    --color-error: #EF4444;
  }

  body {
    @apply bg-[var(--color-background)] text-[var(--color-foreground)] font-body;
  }
  h1, h2, h3, h4, h5, h6 {
    @apply font-heading font-bold;
  }
}
```
