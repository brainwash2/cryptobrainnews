â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
CRYPTOBRAINNEWS - COMPLETE CODE EXPORT FOR CLAUDE OPUS AUDIT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Export Date: Thu Feb 19 03:02:37 AM UTC 2026
Tech Stack: Next.js 16, React 19, TypeScript, Tailwind, Supabase
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“¦ FILE: package.json
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
{
  "name": "cryptobrainnews",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "eslint"
  },
  "dependencies": {
    "@ai-sdk/groq": "^3.0.24",
    "@duneanalytics/client-sdk": "^0.3.5",
    "@heroicons/react": "^2.2.0",
    "@sentry/nextjs": "^10.39.0",
    "@supabase/ssr": "^0.8.0",
    "@supabase/supabase-js": "^2.95.3",
    "@tailwindcss/forms": "^0.5.11",
    "@tailwindcss/typography": "^0.5.19",
    "@upstash/redis": "^1.36.2",
    "@vercel/analytics": "^1.6.1",
    "@vercel/speed-insights": "^1.3.1",
    "ai": "^6.0.86",
    "clsx": "^2.1.1",
    "date-fns": "^4.1.0",
    "lucide-react": "^0.563.0",
    "next": "16.0.8",
    "react": "19.2.1",
    "react-dom": "19.2.1",
    "recharts": "^3.7.0",
    "server-only": "^0.0.1",
    "swr": "^2.4.0",
    "tailwind-merge": "^3.4.0",
    "tailwindcss-animate": "^1.0.7"
  },
  "devDependencies": {
    "@tailwindcss/postcss": "^4",
    "@types/node": "^20.19.33",
    "@types/react": "^19",
    "@types/react-dom": "^19",
    "autoprefixer": "^10.4.19",
    "eslint": "^9",
    "eslint-config-next": "16.0.8",
    "postcss": "^8.4.38",
    "tailwindcss": "^3.4.17",
    "typescript": "^5"
  }
}


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ PROJECT FOLDER STRUCTURE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Tree command not found. Structure not generated.


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“‹ FILE: DUNE_QUERIES.md
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# CryptoBrainNews Dune Analytics Queries

All corrected queries used in production. Copy query IDs from your Dune dashboard and update `src/lib/dune.ts`.

---

## ON-CHAIN METRICS

### Query 1: BTC Active Addresses
```sql
SELECT
  date_trunc('day', block_time) AS day,
  COUNT(*) AS tx_count,
  'bitcoin' AS chain
FROM bitcoin.transactions
WHERE block_time >= NOW() - INTERVAL '{{days}}' day
GROUP BY 1
ORDER BY 1 DESC
```
**Columns**: `day`, `tx_count`, `chain`

---

### Query 2: BTC Daily Transactions
```sql
SELECT
  date_trunc('day', block_time) AS day,
  COUNT(*) AS tx_count,
  'bitcoin' AS chain
FROM bitcoin.transactions
WHERE block_time >= NOW() - INTERVAL '{{days}}' day
GROUP BY 1
ORDER BY 1 DESC
```
**Columns**: `day`, `tx_count`, `chain`

---

### Query 3: ETH Active Addresses
```sql
SELECT
  date_trunc('day', block_time) AS day,
  COUNT(DISTINCT "from") AS active_addresses,
  COUNT(DISTINCT "to") AS receiving_addresses,
  'ethereum' AS chain
FROM ethereum.transactions
WHERE block_time >= NOW() - INTERVAL '{{days}}' day
GROUP BY 1
ORDER BY 1 DESC
```
**Columns**: `day`, `active_addresses`, `receiving_addresses`, `chain`

---

### Query 4: ETH Daily Transactions & Gas
```sql
SELECT
  date_trunc('day', block_time) AS day,
  COUNT(*) AS tx_count,
  AVG(gas_used) AS avg_gas_used,
  AVG(gas_price / 1e9) AS avg_gas_price_gwei,
  'ethereum' AS chain
FROM ethereum.transactions
WHERE block_time >= NOW() - INTERVAL '{{days}}' day
GROUP BY 1
ORDER BY 1 DESC
```
**Columns**: `day`, `tx_count`, `avg_gas_used`, `avg_gas_price_gwei`, `chain`

---

### Query 5: SOL Daily Transactions
```sql
SELECT
  date_trunc('day', block_time) AS day,
  COUNT(*) AS tx_count,
  COUNT(DISTINCT signer) AS active_signers,
  'solana' AS chain
FROM solana.transactions
WHERE block_time >= NOW() - INTERVAL '{{days}}' day
  AND success = true
GROUP BY 1
ORDER BY 1 DESC
LIMIT 500
```
**Columns**: `day`, `tx_count`, `active_signers`, `chain`

---

### Query 6: SOL Daily Fees
```sql
SELECT
  date_trunc('day', block_time) AS day,
  SUM(fee / 1e9) AS total_fees_sol,
  AVG(fee / 1e9) AS avg_fee_sol,
  COUNT(*) AS tx_count,
  'solana' AS chain
FROM solana.transactions
WHERE block_time >= NOW() - INTERVAL '{{days}}' day
  AND success = true
GROUP BY 1
ORDER BY 1 DESC
```
**Columns**: `day`, `total_fees_sol`, `avg_fee_sol`, `tx_count`, `chain`

---

## WHALE TRANSFERS & STABLECOINS

### Query 7: Whale Transfers (Top 100 Addresses)
```sql
SELECT
  block_time,
  blockchain,
  "from" AS whale_address,
  "to" AS recipient,
  contract_address,
  amount_usd
FROM tokens.transfers
WHERE block_time >= NOW() - INTERVAL '{{days}}' day
  AND amount_usd > 100000
ORDER BY block_time DESC, amount_usd DESC
LIMIT 500
```
**Columns**: `block_time`, `blockchain`, `whale_address`, `recipient`, `contract_address`, `amount_usd`

---

### Query 8: Stablecoin Supply & Dominance
```sql
SELECT
  date_trunc('day', block_time) AS day,
  contract_address,
  SUM(amount_usd) AS daily_volume,
  blockchain,
  COUNT(*) AS transfer_count
FROM tokens.transfers
WHERE block_time >= NOW() - INTERVAL '{{days}}' day
  AND amount_usd > 0
GROUP BY 1, 2, 4
ORDER BY 1 DESC, 3 DESC
LIMIT 100
```
**Columns**: `day`, `contract_address`, `daily_volume`, `blockchain`, `transfer_count`

---

### Query 9: Stablecoin Holder Distribution
```sql
SELECT
  "from" AS holder_address,
  contract_address,
  SUM(amount) AS token_balance,
  SUM(amount_usd) AS balance_usd,
  blockchain,
  COUNT(*) AS transfer_count
FROM tokens.transfers
WHERE block_time >= NOW() - INTERVAL '90' day
  AND amount_usd > 0
GROUP BY 1, 2, 5
HAVING SUM(amount_usd) > 1000000
ORDER BY balance_usd DESC
LIMIT 100
```
**Columns**: `holder_address`, `contract_address`, `token_balance`, `balance_usd`, `blockchain`, `transfer_count`

---

## DEX & EXCHANGE DATA

### Query 10: DEX Daily Volumes by Protocol
```sql
SELECT
  date_trunc('day', block_time) AS day,
  project AS dex,
  blockchain,
  SUM(amount_usd) AS volume_usd,
  COUNT(*) AS trade_count
FROM dex.trades
WHERE block_time >= NOW() - INTERVAL '{{days}}' day
  AND amount_usd > 0
GROUP BY 1, 2, 3
ORDER BY 1 DESC, 4 DESC
```
**Columns**: `day`, `dex`, `blockchain`, `volume_usd`, `trade_count`

---

### Query 11: DEX Top Protocols (30-Day Rolling)
```sql
SELECT
  project AS dex,
  blockchain,
  SUM(amount_usd) AS volume_30d_usd,
  COUNT(*) AS trade_count,
  COUNT(DISTINCT tx_hash) AS unique_txs
FROM dex.trades
WHERE block_time >= NOW() - INTERVAL '30' day
  AND amount_usd > 0
GROUP BY 1, 2
ORDER BY 3 DESC
LIMIT 50
```
**Columns**: `dex`, `blockchain`, `volume_30d_usd`, `trade_count`, `unique_txs`

---

### Query 12: DEX Volumes by Blockchain
```sql
SELECT
  date_trunc('day', block_time) AS day,
  blockchain AS chain,
  SUM(amount_usd) AS volume_usd,
  COUNT(*) AS trade_count
FROM dex.trades
WHERE block_time >= NOW() - INTERVAL '{{days}}' day
  AND amount_usd > 0
GROUP BY 1, 2
ORDER BY 1 DESC, 3 DESC
```
**Columns**: `day`, `chain`, `volume_usd`, `trade_count`

---

## LAYER 2 & NFT DATA

### Query 13: L2 Active Addresses Comparison
```sql
SELECT
  date_trunc('day', block_time) AS day,
  'arbitrum' AS chain,
  COUNT(*) AS tx_count,
  COUNT(DISTINCT "from") AS active_addresses
FROM arbitrum.transactions
WHERE block_time >= NOW() - INTERVAL '{{days}}' day
GROUP BY 1

UNION ALL

SELECT
  date_trunc('day', block_time) AS day,
  'optimism' AS chain,
  COUNT(*) AS tx_count,
  COUNT(DISTINCT "from") AS active_addresses
FROM optimism.transactions
WHERE block_time >= NOW() - INTERVAL '{{days}}' day
GROUP BY 1

UNION ALL

SELECT
  date_trunc('day', block_time) AS day,
  'base' AS chain,
  COUNT(*) AS tx_count,
  COUNT(DISTINCT "from") AS active_addresses
FROM base.transactions
WHERE block_time >= NOW() - INTERVAL '{{days}}' day
GROUP BY 1

ORDER BY day DESC, chain
```
**Columns**: `day`, `chain`, `tx_count`, `active_addresses`

---

### Query 14: L2 Gas Fees Comparison
```sql
SELECT
  date_trunc('day', block_time) AS day,
  'arbitrum' AS chain,
  AVG(gas_price / 1e9) AS avg_gas_price_gwei
FROM arbitrum.transactions
WHERE block_time >= NOW() - INTERVAL '{{days}}' day
GROUP BY 1

UNION ALL

SELECT
  date_trunc('day', block_time) AS day,
  'optimism' AS chain,
  AVG(gas_price / 1e9) AS avg_gas_price_gwei
FROM optimism.transactions
WHERE block_time >= NOW() - INTERVAL '{{days}}' day
GROUP BY 1

ORDER BY day DESC, chain
```
**Columns**: `day`, `chain`, `avg_gas_price_gwei`

---

### Query 15: NFT Top Collections by Volume
```sql
SELECT
  collection,
  blockchain,
  SUM(amount_usd) AS volume_7d_usd,
  COUNT(*) AS trade_count,
  COUNT(DISTINCT seller) AS unique_sellers,
  AVG(amount_usd) AS avg_price_usd,
  MIN(amount_usd) AS min_price_usd,
  MAX(amount_usd) AS max_price_usd
FROM nft.trades
WHERE block_time >= NOW() - INTERVAL '7' day
  AND amount_usd > 0
GROUP BY 1, 2
ORDER BY 3 DESC
LIMIT 50
```
**Columns**: `collection`, `blockchain`, `volume_7d_usd`, `trade_count`, `unique_sellers`, `avg_price_usd`, `min_price_usd`, `max_price_usd`

---

### Query 16: NFT Daily Volumes
```sql
SELECT
  date_trunc('day', block_time) AS day,
  collection,
  blockchain,
  SUM(amount_usd) AS volume_usd,
  COUNT(*) AS trade_count,
  AVG(amount_usd) AS avg_price_usd,
  COUNT(DISTINCT buyer) AS unique_buyers
FROM nft.trades
WHERE block_time >= NOW() - INTERVAL '{{days}}' day
  AND amount_usd > 0
GROUP BY 1, 2, 3
ORDER BY 1 DESC, 4 DESC
```
**Columns**: `day`, `collection`, `blockchain`, `volume_usd`, `trade_count`, `avg_price_usd`, `unique_buyers`

---

### Query 17: NFT Sales by Blockchain
```sql
SELECT
  date_trunc('day', block_time) AS day,
  blockchain,
  SUM(amount_usd) AS volume_usd,
  COUNT(*) AS trade_count,
  COUNT(DISTINCT collection) AS active_collections
FROM nft.trades
WHERE block_time >= NOW() - INTERVAL '{{days}}' day
  AND amount_usd > 0
GROUP BY 1, 2
ORDER BY 1 DESC, 3 DESC
```
**Columns**: `day`, `blockchain`, `volume_usd`, `trade_count`, `active_collections`

---

## DEFI & GOVERNANCE

### Query 18: DEX Liquidity Pools Activity
```sql
SELECT
  project AS dex,
  blockchain,
  token_a_symbol,
  token_b_symbol,
  SUM(amount_usd) AS volume_usd,
  COUNT(*) AS swap_count
FROM dex.trades
WHERE block_time >= NOW() - INTERVAL '30' day
  AND amount_usd > 0
GROUP BY 1, 2, 3, 4
ORDER BY 5 DESC
LIMIT 100
```
**Columns**: `dex`, `blockchain`, `token_a_symbol`, `token_b_symbol`, `volume_usd`, `swap_count`

---

### Query 19: DeFi Protocol Users (Active Addresses)
```sql
SELECT
  project AS protocol,
  blockchain,
  COUNT(DISTINCT tx_hash) AS unique_interactions,
  COUNT(*) AS total_swaps,
  SUM(amount_usd) AS volume_30d_usd
FROM dex.trades
WHERE block_time >= NOW() - INTERVAL '30' day
  AND amount_usd > 0
GROUP BY 1, 2
ORDER BY 3 DESC
LIMIT 50
```
**Columns**: `protocol`, `blockchain`, `unique_interactions`, `total_swaps`, `volume_30d_usd`

---

### Query 20: Uniswap DAO Governance Votes
```sql
SELECT
  CURRENT_DATE AS day,
  'uniswap' AS dao,
  'Governance data' AS note
```
**Columns**: `day`, `dao`, `note`

---

### Query 22: General DAO Activity
```sql
SELECT
  CURRENT_DATE AS day,
  'uniswap' AS dao,
  0 AS proposal_count,
  0 AS vote_count
UNION ALL
SELECT
  CURRENT_DATE AS day,
  'aave' AS dao,
  0 AS proposal_count,
  0 AS vote_count
```
**Columns**: `day`, `dao`, `proposal_count`, `vote_count`

---

## MARKET DATA

### Query 23: CEX-to-DEX Volume Comparison
```sql
SELECT
  date_trunc('day', block_time) AS day,
  blockchain,
  SUM(amount_usd) AS volume_usd,
  COUNT(*) AS trade_count
FROM dex.trades
WHERE block_time >= NOW() - INTERVAL '{{days}}' day
  AND amount_usd > 0
GROUP BY 1, 2
ORDER BY 1 DESC, 3 DESC
```
**Columns**: `day`, `blockchain`, `volume_usd`, `trade_count`

---

### Query 24: Token Swap Volume by Token Pair
```sql
SELECT
  token_bought_symbol,
  token_sold_symbol,
  SUM(amount_usd) AS volume_usd,
  COUNT(*) AS swap_count,
  AVG(amount_usd) AS avg_swap_size
FROM dex.trades
WHERE block_time >= NOW() - INTERVAL '30' day
  AND amount_usd > 0
GROUP BY 1, 2
ORDER BY 3 DESC
LIMIT 100
```
**Columns**: `token_bought_symbol`, `token_sold_symbol`, `volume_usd`, `swap_count`, `avg_swap_size`

---

## PARAMETER SETUP

All queries with `{{days}}` parameter:
- **Type**: Number
- **Default**: 30

---

## Query ID Reference

Update these in `src/lib/dune.ts`:

| Query | ID |
|-------|-----|
| BTC_ACTIVE_ADDRESSES | YOUR_ID |
| BTC_DAILY_TRANSACTIONS | YOUR_ID |
| ETH_ACTIVE_ADDRESSES | YOUR_ID |
| ETH_DAILY_TRANSACTIONS | YOUR_ID |
| SOL_DAILY_TRANSACTIONS | YOUR_ID |
| SOL_DAILY_FEES | YOUR_ID |
| WHALE_TRANSFERS | YOUR_ID |
| STABLECOIN_SUPPLY | YOUR_ID |
| STABLECOIN_HOLDERS | YOUR_ID |
| DEX_DAILY_VOLUMES | YOUR_ID |
| DEX_TOP_PROTOCOLS | YOUR_ID |
| DEX_BY_BLOCKCHAIN | YOUR_ID |
| L2_ACTIVE_ADDRESSES | YOUR_ID |
| L2_GAS_FEES | YOUR_ID |
| NFT_TOP_COLLECTIONS | YOUR_ID |
| NFT_DAILY_VOLUMES | YOUR_ID |
| NFT_BY_BLOCKCHAIN | YOUR_ID |
| DEX_LIQUIDITY_POOLS | YOUR_ID |
| DEFI_PROTOCOL_USERS | YOUR_ID |
| UNISWAP_GOVERNANCE | YOUR_ID |
| DAO_ACTIVITY | YOUR_ID |
| CEX_DEX_VOLUME | YOUR_ID |
| TOP_TOKEN_PAIRS | YOUR_ID |



â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ—„ï¸  FILE: supabase_schema.sql
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- 6.1 â€” CMS Strategy: Articles Table (Safe Update)
-- Run this in your Supabase SQL Editor

-- 1. Create table only if it doesn't exist
CREATE TABLE IF NOT EXISTS public.articles (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- 2. Add columns safely (DO block ensures we don't error if columns exist)
DO $$
BEGIN
    ALTER TABLE public.articles ADD COLUMN IF NOT EXISTS title TEXT;
    ALTER TABLE public.articles ADD COLUMN IF NOT EXISTS slug TEXT;
    ALTER TABLE public.articles ADD COLUMN IF NOT EXISTS body TEXT;
    ALTER TABLE public.articles ADD COLUMN IF NOT EXISTS excerpt TEXT;
    ALTER TABLE public.articles ADD COLUMN IF NOT EXISTS image_url TEXT;
    ALTER TABLE public.articles ADD COLUMN IF NOT EXISTS author_name TEXT DEFAULT 'CryptoBrain Editorial';
    ALTER TABLE public.articles ADD COLUMN IF NOT EXISTS author_avatar TEXT;
    ALTER TABLE public.articles ADD COLUMN IF NOT EXISTS category TEXT DEFAULT 'News';
    ALTER TABLE public.articles ADD COLUMN IF NOT EXISTS tags TEXT[] DEFAULT '{}';
    ALTER TABLE public.articles ADD COLUMN IF NOT EXISTS published_at TIMESTAMPTZ DEFAULT NOW();
    ALTER TABLE public.articles ADD COLUMN IF NOT EXISTS is_featured BOOLEAN DEFAULT FALSE;
    ALTER TABLE public.articles ADD COLUMN IF NOT EXISTS source TEXT DEFAULT 'editorial';
    ALTER TABLE public.articles ADD COLUMN IF NOT EXISTS external_url TEXT;
END $$;

-- 3. Ensure Uniqueness on Slug (Drop constraint first to avoid errors, then recreate)
DO $$
BEGIN
  IF NOT EXISTS (SELECT 1 FROM pg_constraint WHERE conname = 'articles_slug_key') THEN
    ALTER TABLE public.articles ADD CONSTRAINT articles_slug_key UNIQUE (slug);
  END IF;
END $$;

-- 4. Recreate Indexes (Drop existing to ensure they match our new definition)
DROP INDEX IF EXISTS idx_articles_published;
CREATE INDEX idx_articles_published ON public.articles (published_at DESC);

DROP INDEX IF EXISTS idx_articles_featured;
CREATE INDEX idx_articles_featured ON public.articles (is_featured) WHERE is_featured = TRUE;

DROP INDEX IF EXISTS idx_articles_slug;
CREATE INDEX idx_articles_slug ON public.articles (slug);

-- 5. Security (RLS)
ALTER TABLE public.articles ENABLE ROW LEVEL SECURITY;

-- 6. Policies (Drop first to avoid "policy already exists" errors)
DROP POLICY IF EXISTS "Public read" ON public.articles;
CREATE POLICY "Public read" ON public.articles FOR SELECT USING (true);

-- (Optional) Write policy for authenticated users
DROP POLICY IF EXISTS "Authenticated write" ON public.articles;
CREATE POLICY "Authenticated write" ON public.articles 
  FOR INSERT 
  TO authenticated 
  WITH CHECK (true);

DROP POLICY IF EXISTS "Authenticated update" ON public.articles;
CREATE POLICY "Authenticated update" ON public.articles 
  FOR UPDATE 
  TO authenticated 
  USING (true);



â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ” FILE: .env.example
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âŒ .env.example not found


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”§ SOURCE CODE FILES (src/)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/advertise/_components/AdvertiseClient.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';
import React, { useState } from 'react';

export default function AdvertiseClient() {
  const [form, setForm] = useState({
    company_name: '',
    contact_name: '',
    email: '',
    telegram: '',
    website: '',
    budget_range: '',
    package_interest: '',
    message: '',
  });
  const [status, setStatus] = useState<'idle' | 'loading' | 'success' | 'error'>('idle');

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setStatus('loading');
    try {
      const res = await fetch('/api/ad-leads', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(form),
      });
      if (!res.ok) throw new Error('Failed');
      setStatus('success');
      setForm({
        company_name: '',
        contact_name: '',
        email: '',
        telegram: '',
        website: '',
        budget_range: '',
        package_interest: '',
        message: '',
      });
    } catch {
      setStatus('error');
    }
  };

  const inputCls =
    'w-full bg-[#0a0a0a] border border-[#1a1a1a] px-4 py-3 text-xs text-white font-mono outline-none focus:border-[#FABF2C]/50 placeholder:text-[#333]';

  if (status === 'success') {
    return (
      <div className="border border-[#FABF2C]/30 bg-[#FABF2C]/[0.02] p-12 text-center">
        <div className="text-4xl mb-4">âœ“</div>
        <h3 className="text-xl font-black text-white uppercase mb-2">Submission Received</h3>
        <p className="text-xs text-[#555] font-mono uppercase tracking-widest">
          Our partnerships team will contact you within 24 hours.
        </p>
      </div>
    );
  }

  return (
    <form onSubmit={handleSubmit} className="space-y-4">
      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
        <input
          required
          placeholder="Company Name *"
          value={form.company_name}
          onChange={(e) => setForm({ ...form, company_name: e.target.value })}
          className={inputCls}
        />
        <input
          placeholder="Contact Name"
          value={form.contact_name}
          onChange={(e) => setForm({ ...form, contact_name: e.target.value })}
          className={inputCls}
        />
      </div>
      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
        <input
          required
          type="email"
          placeholder="Email *"
          value={form.email}
          onChange={(e) => setForm({ ...form, email: e.target.value })}
          className={inputCls}
        />
        <input
          placeholder="Telegram Handle"
          value={form.telegram}
          onChange={(e) => setForm({ ...form, telegram: e.target.value })}
          className={inputCls}
        />
      </div>
      <input
        placeholder="Website URL"
        value={form.website}
        onChange={(e) => setForm({ ...form, website: e.target.value })}
        className={inputCls}
      />
      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
        <select
          required
          value={form.budget_range}
          onChange={(e) => setForm({ ...form, budget_range: e.target.value })}
          className={inputCls}
        >
          <option value="">Budget Range *</option>
          <option value="$1k-$5k">$1,000 â€“ $5,000/mo</option>
          <option value="$5k-$15k">$5,000 â€“ $15,000/mo</option>
          <option value="$15k-$50k">$15,000 â€“ $50,000/mo</option>
          <option value="$50k+">$50,000+/mo</option>
        </select>
        <select
          required
          value={form.package_interest}
          onChange={(e) => setForm({ ...form, package_interest: e.target.value })}
          className={inputCls}
        >
          <option value="">Package Interest *</option>
          <option value="signal">Signal ($2,500/mo)</option>
          <option value="alpha">Alpha ($7,500/mo)</option>
          <option value="institutional">Institutional (Custom)</option>
          <option value="event">Event Sponsorship</option>
        </select>
      </div>
      <textarea
        placeholder="Tell us about your campaign goals..."
        rows={4}
        value={form.message}
        onChange={(e) => setForm({ ...form, message: e.target.value })}
        className={inputCls}
      />
      <button
        type="submit"
        disabled={status === 'loading'}
        className="w-full bg-[#FABF2C] text-black py-3 text-[10px] font-black uppercase tracking-widest hover:bg-white transition-all disabled:opacity-50"
      >
        {status === 'loading' ? 'SUBMITTING...' : 'SUBMIT INQUIRY'}
      </button>
      {status === 'error' && (
        <p className="text-red-500 text-xs text-center font-mono">
          Submission failed. Please try again or email partnerships@cryptobrainnews.com
        </p>
      )}
    </form>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/advertise/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';
import AdvertiseClient from './_components/AdvertiseClient';

export const metadata = {
  title: 'Advertise with CryptoBrainNews | Media Kit',
  description:
    'Reach institutional crypto investors. Sponsored content, banner ads, and event partnerships.',
};

export default function AdvertisePage() {
  return (
    <main className="min-h-screen bg-[#050505] text-white">
      {/* Hero */}
      <section className="py-24 px-4 lg:px-8 border-b border-[#1a1a1a]">
        <div className="max-w-[1200px] mx-auto text-center">
          <span className="text-[10px] font-black text-[#FABF2C] uppercase tracking-[0.4em]">
            Media Kit
          </span>
          <h1 className="text-5xl lg:text-7xl font-black uppercase tracking-tighter mt-4 leading-[0.95]">
            Reach Institutional
            <br />
            <span className="text-[#FABF2C]">Crypto Investors</span>
          </h1>
          <p className="text-gray-400 text-lg mt-8 max-w-2xl mx-auto font-serif leading-relaxed">
            CryptoBrainNews delivers institutional-grade analytics to decision-makers
            in DeFi, TradFi, and Web3. Partner with us to reach this premium audience.
          </p>
        </div>
      </section>

      {/* Stats */}
      <section className="py-16 px-4 lg:px-8 border-b border-[#1a1a1a]">
        <div className="max-w-[1200px] mx-auto grid grid-cols-2 lg:grid-cols-4 gap-6">
          {[
            { label: 'Monthly Visitors', value: '250K+' },
            { label: 'Newsletter Subs', value: '15K+' },
            { label: 'Avg Session', value: '4:32' },
            { label: 'Data Pages', value: '50+' },
          ].map((stat) => (
            <div
              key={stat.label}
              className="bg-[#0a0a0a] border border-[#1a1a1a] p-6 text-center"
            >
              <div className="text-3xl font-black text-[#FABF2C] font-data tabular-nums">
                {stat.value}
              </div>
              <div className="text-[10px] font-black text-[#555] uppercase tracking-widest mt-2">
                {stat.label}
              </div>
            </div>
          ))}
        </div>
      </section>

      {/* Pricing Tiers */}
      <section className="py-20 px-4 lg:px-8 border-b border-[#1a1a1a]">
        <div className="max-w-[1200px] mx-auto">
          <h2 className="text-[10px] font-black text-[#FABF2C] uppercase tracking-[0.4em] mb-12 text-center">
            Partnership Tiers
          </h2>
          <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
            {[
              {
                name: 'Signal',
                price: '$2,500',
                period: '/month',
                features: [
                  'Banner ad rotation (sidebar + footer)',
                  'Newsletter mention (1x/week)',
                  'Logo on partners page',
                  'Basic analytics dashboard',
                ],
              },
              {
                name: 'Alpha',
                price: '$7,500',
                period: '/month',
                featured: true,
                features: [
                  'Everything in Signal',
                  'Sponsored article (2x/month)',
                  'Featured in data terminal',
                  'Custom research co-branding',
                  'Priority newsletter placement',
                ],
              },
              {
                name: 'Institutional',
                price: 'Custom',
                period: '',
                features: [
                  'Everything in Alpha',
                  'Dedicated event partnership',
                  'White-label data feeds',
                  'API co-marketing',
                  'Direct analyst access',
                ],
              },
            ].map((tier) => (
              <div
                key={tier.name}
                className={`border p-8 ${
                  tier.featured
                    ? 'border-[#FABF2C] bg-[#FABF2C]/[0.02] relative'
                    : 'border-[#1a1a1a] bg-[#0a0a0a]'
                }`}
              >
                {tier.featured && (
                  <div className="absolute top-0 right-0 bg-[#FABF2C] text-black text-[8px] font-black px-3 py-1 uppercase">
                    Most Popular
                  </div>
                )}
                <h3 className="text-xs font-black text-[#FABF2C] uppercase tracking-widest">
                  {tier.name}
                </h3>
                <div className="mt-4 mb-6">
                  <span className="text-4xl font-black text-white">{tier.price}</span>
                  <span className="text-sm text-[#555]">{tier.period}</span>
                </div>
                <ul className="space-y-3 mb-8">
                  {tier.features.map((f) => (
                    <li key={f} className="text-xs text-[#888] flex gap-2">
                      <span className="text-[#FABF2C]">â†’</span>
                      {f}
                    </li>
                  ))}
                </ul>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* Contact Form */}
      <section className="py-20 px-4 lg:px-8">
        <div className="max-w-[700px] mx-auto">
          <h2 className="text-[10px] font-black text-[#FABF2C] uppercase tracking-[0.4em] mb-8 text-center">
            Get In Touch
          </h2>
          <AdvertiseClient />
        </div>
      </section>
    </main>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/api/ad-leads/route.ts
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import { NextResponse } from 'next/server';
import { getSupabase } from '@/lib/supabase';

export async function POST(request: Request) {
  try {
    const body = await request.json();

    // Validation
    const required = ['company_name', 'email', 'budget_range', 'package_interest'];
    for (const field of required) {
      if (!body[field]) {
        return NextResponse.json(
          { error: `Missing required field: ${field}` },
          { status: 400 }
        );
      }
    }

    // Basic email validation
    if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(body.email)) {
      return NextResponse.json({ error: 'Invalid email' }, { status: 400 });
    }

    const supabase = getSupabase();
    const { error } = await supabase.from('ad_leads').insert({
      company_name: body.company_name,
      contact_name: body.contact_name || null,
      email: body.email,
      telegram: body.telegram || null,
      website: body.website || null,
      budget_range: body.budget_range,
      package_interest: body.package_interest,
      message: body.message || null,
      source_page: '/advertise',
    });

    if (error) {
      console.error('[AdLeads] Insert error:', error);
      return NextResponse.json({ error: 'Failed to submit' }, { status: 500 });
    }

    return NextResponse.json({ success: true });
  } catch {
    return NextResponse.json({ error: 'Invalid request' }, { status: 400 });
  }
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/api/events/route.ts
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import { NextResponse } from 'next/server';
import { cached } from '@/lib/cache';
import { getSupabase } from '@/lib/supabase';
import type { CryptoEvent } from '@/lib/types';

export async function GET(request: Request) {
  const { searchParams } = new URL(request.url);
  const type = searchParams.get('type');
  const featured = searchParams.get('featured');

  const events = await cached(
    `events:${type || 'all'}:${featured || 'all'}`,
    async () => {
      const supabase = getSupabase();
      let query = supabase
        .from('events')
        .select('*')
        .gte('start_date', new Date().toISOString())
        .order('start_date', { ascending: true });

      if (type) query = query.eq('event_type', type);
      if (featured === 'true') query = query.eq('is_featured', true);

      const { data, error } = await query.limit(100);
      if (error || !data) return [];

      return data as CryptoEvent[];
    },
    300
  );

  return NextResponse.json(events);
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/api/news/ai/route.ts
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import { NextResponse } from 'next/server';
import { generateText } from 'ai';
import { createGroq } from '@ai-sdk/groq';

export async function GET() {
  const groqKey = process.env.GROQ_API_KEY?.trim();
  if (!groqKey) return NextResponse.json([]);

  const groq = createGroq({ apiKey: groqKey });

  try {
    // 1. Switch to CryptoCompare (Verified working source)
    const newsRes = await fetch(
      'https://min-api.cryptocompare.com/data/v2/news/?lang=EN',
      { next: { revalidate: 600 } }
    );
    
    if (!newsRes.ok) return NextResponse.json([]);

    const newsData = await newsRes.json();
    const rawArticles = newsData.Data?.slice(0, 4) || [];

    // 2. AI Summarization
    const enriched = await Promise.all(
      rawArticles.map(async (article: any) => {
        try {
          const { text } = await generateText({
            model: groq('llama-3.3-70b-versatile'),
            prompt: `Task: Summarize this headline into 3 bullets (6 words max each). End with SENTIMENT: [Positive/Negative/Neutral].
            Headline: "${article.title}"`,
          });

          const [bulletsRaw, sentimentRaw] = text.split('SENTIMENT:');
          const bullets = bulletsRaw.trim().split('\n')
            .map(l => l.replace(/^[â€¢\-\d\.]+\s*/, '').trim())
            .filter(l => l.length > 2)
            .slice(0, 3);

          return {
            id: String(article.id),
            title: article.title,
            url: article.url,
            source: article.source_info?.name || 'Wire',
            bullets,
            sentiment: (sentimentRaw || 'Neutral').trim().replace(/[.\s]/g, ''),
          };
        } catch { return null; }
      })
    );

    return NextResponse.json(enriched.filter(Boolean));
  } catch (error) {
    return NextResponse.json([]);
  }
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/api/prices/route.ts
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import { NextResponse } from 'next/server';
import { getLivePrices } from '@/lib/api';
import { FALLBACK_MARKET_DATA } from '@/lib/fallback-data';

export async function GET() {
  try {
    const prices = await getLivePrices();
    return NextResponse.json(prices || FALLBACK_MARKET_DATA);
  } catch (error) {
    return NextResponse.json(FALLBACK_MARKET_DATA);
  }
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/auth/callback/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';

import { useEffect } from 'react';
import { useRouter } from 'next/navigation';
import { getSupabase } from '@/lib/supabase';

export default function AuthCallbackPage() {
  const router = useRouter();

  useEffect(() => {
    const supabase = getSupabase();
    
    const { data: { subscription } } = supabase.auth.onAuthStateChange((event, session) => {
      if (event === 'SIGNED_IN' && session) {
        router.push('/');
        router.refresh();
      }
    });

    return () => subscription.unsubscribe();
  }, [router]);

  return (
    <div className="min-h-screen bg-black flex items-center justify-center">
      <div className="text-primary font-mono text-xs animate-pulse uppercase tracking-[0.3em]">
        Finalizing authentication...
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/_components/charts/AreaChartCard.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';

import React, { useEffect, useState } from 'react';
import { AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';

interface AreaChartCardProps {
  title: string;
  subtitle?: string;
  source?: string;
  data: any[];
  xKey: string;
  yKey: string;
  yFormat?: 'usd' | 'number' | 'percent';
  color?: string;
  height?: number;
}

export default function AreaChartCard({ title, subtitle, source, data, xKey, yKey, yFormat = 'usd', color = '#FABF2C', height = 320 }: AreaChartCardProps) {
  // Delay render until client-side to ensure parent dimensions are calculated
  const [isMounted, setIsMounted] = useState(false);

  useEffect(() => {
    setIsMounted(true);
  }, []);

  const formatValue = (v: any) => {
    const val = Number(v);
    if (yFormat === 'usd') {
      if (val >= 1e9) return `$${(val / 1e9).toFixed(1)}B`;
      if (val >= 1e6) return `$${(val / 1e6).toFixed(1)}M`;
      return `$${val.toLocaleString()}`;
    }
    return val.toLocaleString();
  };

  return (
    <div className="bg-[#0a0a0a] border border-[#1a1a1a] p-6">
      <div className="flex items-start justify-between mb-6">
        <div>
          <h3 className="text-white font-black text-xs uppercase tracking-widest border-l-2 border-primary pl-3">{title}</h3>
          {subtitle && <p className="text-[10px] text-[#555] font-mono mt-1 pl-3">{subtitle}</p>}
        </div>
        {source && <span className="text-[9px] font-mono text-[#333] uppercase">{source}</span>}
      </div>
      
      {/* Explicitly set height on the wrapper div to satisfy Recharts */}
      <div style={{ width: '100%', height: height - 80, position: 'relative' }}>
        {isMounted ? (
          <ResponsiveContainer width="100%" height="100%">
            <AreaChart data={data} margin={{ top: 5, right: 0, left: 0, bottom: 0 }}>
              <defs>
                <linearGradient id={`grad-${yKey}`} x1="0" y1="0" x2="0" y2="1">
                  <stop offset="5%" stopColor={color} stopOpacity={0.3} />
                  <stop offset="95%" stopColor={color} stopOpacity={0} />
                </linearGradient>
              </defs>
              <CartesianGrid strokeDasharray="3 3" stroke="#1a1a1a" vertical={false} />
              <XAxis 
                dataKey={xKey} 
                stroke="#444" 
                fontSize={10} 
                fontFamily="monospace" 
                minTickGap={30}
                tickLine={false}
                axisLine={false}
              />
              <YAxis 
                stroke="#444" 
                fontSize={10} 
                fontFamily="monospace" 
                tickFormatter={formatValue} 
                width={45}
                tickLine={false}
                axisLine={false}
              />
              <Tooltip 
                contentStyle={{ backgroundColor: '#000', border: '1px solid #333' }}
                formatter={(value: any) => [formatValue(value), yKey]}
                labelStyle={{ color: '#888', fontSize: 10 }}
                cursor={{ stroke: '#333', strokeWidth: 1 }}
              />
              <Area 
                type="monotone" 
                dataKey={yKey} 
                stroke={color} 
                fill={`url(#grad-${yKey})`} 
                strokeWidth={2} 
                animationDuration={1000}
              />
            </AreaChart>
          </ResponsiveContainer>
        ) : (
          /* Skeleton loader to prevent layout shift */
          <div className="absolute inset-0 flex items-end justify-between px-4 pb-4 opacity-20">
             <div className="w-[10%] h-[30%] bg-gray-700 rounded-t" />
             <div className="w-[10%] h-[50%] bg-gray-700 rounded-t" />
             <div className="w-[10%] h-[40%] bg-gray-700 rounded-t" />
             <div className="w-[10%] h-[70%] bg-gray-700 rounded-t" />
             <div className="w-[10%] h-[60%] bg-gray-700 rounded-t" />
             <div className="w-[10%] h-[80%] bg-gray-700 rounded-t" />
          </div>
        )}
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/_components/charts/BarChartCard.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';

import React from 'react';
import { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';

interface BarChartCardProps {
  title: string;
  subtitle?: string;
  source?: string;
  data: any[];
  xKey: string;
  yKey: string;
  yFormat?: 'usd' | 'number' | 'percent';
  color?: string;
  height?: number;
}

export default function BarChartCard({ title, subtitle, source, data, xKey, yKey, yFormat = 'usd', color = '#627EEA', height = 320 }: BarChartCardProps) {
  const formatValue = (v: any) => {
    const val = Number(v);
    if (yFormat === 'usd') return `$${val.toLocaleString()}`;
    return val.toLocaleString();
  };

  return (
    <div className="bg-[#0a0a0a] border border-[#1a1a1a] p-6">
      <div className="flex items-start justify-between mb-6">
        <div>
          <h3 className="text-white font-black text-xs uppercase tracking-widest border-l-2 border-primary pl-3">{title}</h3>
          {subtitle && <p className="text-[10px] text-[#555] font-mono mt-1 pl-3">{subtitle}</p>}
        </div>
      </div>
      <div style={{ height: height - 80 }}>
        <ResponsiveContainer width="100%" height="100%">
          <BarChart data={data}>
            <CartesianGrid strokeDasharray="3 3" stroke="#1a1a1a" vertical={false} />
            <XAxis dataKey={xKey} stroke="#444" fontSize={10} fontFamily="monospace" />
            <YAxis stroke="#444" fontSize={10} fontFamily="monospace" tickFormatter={formatValue} />
            <Tooltip 
              contentStyle={{ backgroundColor: '#000', border: '1px solid #333' }}
              formatter={(value: any) => [formatValue(value), yKey]}
            />
            <Bar dataKey={yKey} fill={color} radius={[2, 2, 0, 0]} />
          </BarChart>
        </ResponsiveContainer>
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/_components/charts/DataTable.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';

import React from 'react';

interface Column {
  key: string;
  label: string;
  align?: 'left' | 'right' | 'center';
}

interface DataTableProps {
  columns: Column[];
  rows: Record<string, any>[];
  maxRows?: number;
}

export default function DataTable({ columns, rows, maxRows = 50 }: DataTableProps) {
  const displayRows = rows.slice(0, maxRows);

  if (displayRows.length === 0) {
    return (
      <div className="bg-[#0a0a0a] border border-[#1a1a1a] p-12 text-center text-[#333] font-mono text-xs uppercase">
        No data available
      </div>
    );
  }

  return (
    <div className="bg-[#0a0a0a] border border-[#1a1a1a] overflow-hidden">
      <div className="overflow-x-auto">
        <table className="w-full text-left border-collapse">
          <thead>
            <tr className="border-b border-[#1a1a1a] bg-[#080808]">
              {columns.map((col) => (
                <th
                  key={col.key}
                  className={`px-6 py-3 text-[10px] font-black text-[#555] uppercase tracking-widest ${
                    col.align === 'right' ? 'text-right' : col.align === 'center' ? 'text-center' : 'text-left'
                  }`}
                >
                  {col.label}
                </th>
              ))}
            </tr>
          </thead>
          <tbody>
            {displayRows.map((row, i) => (
              <tr key={i} className="border-b border-[#111] hover:bg-white/[0.02] transition-colors">
                {columns.map((col) => (
                  <td
                    key={col.key}
                    className={`px-6 py-3 text-sm font-mono ${
                      col.align === 'right' ? 'text-right' : col.align === 'center' ? 'text-center' : 'text-left'
                    } ${col.key === 'name' || col.key === 'protocol' ? 'font-bold text-white' : 'text-[#888]'}`}
                  >
                    {row[col.key]}
                  </td>
                ))}
              </tr>
            ))}
          </tbody>
        </table>
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/_components/ChartSkeleton.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
export function ChartSkeleton() {
  return (
    <div className="space-y-8 animate-pulse">
      {/* Metrics Row */}
      <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
        {[1, 2, 3, 4].map((i) => (
          <div key={i} className="bg-[#0a0a0a] border border-[#1a1a1a] p-6 h-24">
            <div className="h-3 bg-[#222] w-1/2 mb-2 rounded" />
            <div className="h-6 bg-[#333] w-3/4 rounded" />
          </div>
        ))}
      </div>
      {/* Chart Area */}
      <div className="bg-[#0a0a0a] border border-[#1a1a1a] p-6 h-[400px]">
        <div className="flex justify-between mb-8">
           <div className="h-4 bg-[#333] w-48 rounded" />
           <div className="h-3 bg-[#222] w-24 rounded" />
        </div>
        <div className="h-full bg-[#111] rounded" />
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/_components/DataBreadcrumb.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';

import { usePathname } from 'next/navigation';
import Link from 'next/link';

const LABELS: Record<string, string> = {
  data: 'Terminal',
  markets: 'Markets',
  spot: 'Spot',
  futures: 'Futures',
  indices: 'Crypto Indices',
  options: 'Options',
  prices: 'Prices',
  volumes: 'Exchange Volumes',
  etfs: 'ETFs',
  bitcoin: 'Bitcoin',
  ethereum: 'Ethereum',
  comparison: 'Comparison',
  stablecoins: 'Stablecoins',
  usd: 'USD Pegged',
  chains: 'By Chain',
  onchain: 'On-Chain',
  solana: 'Solana',
  flows: 'CEX Flows',
  gas: 'Gas Tracker',
  scaling: 'Scaling',
  'l2-comparison': 'L2 Comparison',
  optimistic: 'Optimistic Rollups',
  zk: 'ZK Rollups',
  defi: 'DeFi',
  'dex-volume': 'DEX Volume',
  tvl: 'TVL Rankings',
  yields: 'Yields',
  lending: 'Lending',
  revenue: 'Protocol Revenue',
  'whale-watch': 'Whale Watch',
  'large-swaps': 'Large Swaps',
  nfts: 'NFTs',
  volume: 'Sales Volume',
  collections: 'Top Collections',
};

export function DataBreadcrumb() {
  const pathname = usePathname();
  const segments = pathname.split('/').filter(Boolean);

  return (
    <nav className="flex items-center gap-1.5 text-xs text-muted-foreground font-caption mb-6">
      {segments.map((segment, idx) => {
        const href = '/' + segments.slice(0, idx + 1).join('/');
        const isLast = idx === segments.length - 1;
        const label = LABELS[segment] || segment.replace(/-/g, ' ');
        return (
          <span key={href} className="flex items-center gap-1.5">
            {idx > 0 && <span className="text-border">/</span>}
            {isLast ? (
              <span className="text-foreground font-semibold capitalize">
                {label}
              </span>
            ) : (
              <Link
                href={href}
                className="hover:text-primary transition-colors capitalize"
              >
                {label}
              </Link>
            )}
          </span>
        );
      })}
    </nav>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/_components/DataHeader.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';
import React from 'react';

export function DataHeader({
  title,
  description,
  filters,
}: {
  title: string;
  description?: string;
  filters?: React.ReactNode;
}) {
  return (
    <div className="mb-10 space-y-6">
      <div>
        <h1 className="text-4xl font-black text-white uppercase tracking-tighter font-heading">
          {title}
        </h1>
        {description && (
          <p className="text-[#555] font-mono text-[10px] uppercase tracking-[0.3em] mt-2">
            {description}
          </p>
        )}
      </div>
      {filters && <div className="flex flex-wrap gap-3">{filters}</div>}
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/_components/DataSidebar.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';

import { usePathname } from 'next/navigation';
import Link from 'next/link';
import { useState } from 'react';
import Icon from '@/components/ui/AppIcon';
import { DATA_SECTIONS } from '@/lib/sidebar-config';
import type { SidebarSection } from '@/lib/types';

export function DataSidebar() {
  const pathname = usePathname();
  const [mobileOpen, setMobileOpen] = useState(false);

  return (
    <>
      {/* Mobile toggle */}
      <button
        onClick={() => setMobileOpen(!mobileOpen)}
        className="lg:hidden fixed bottom-4 right-4 z-50 w-12 h-12 bg-primary text-black flex items-center justify-center shadow-xl"
        aria-label="Toggle sidebar"
      >
        <Icon name={mobileOpen ? 'XMarkIcon' : 'Bars3Icon'} size={20} />
      </button>

      {/* Sidebar */}
      <aside
        className={`
          w-64 shrink-0 border-r border-[#1a1a1a] bg-black min-h-screen sticky top-[6.5rem] self-start
          ${mobileOpen ? 'fixed inset-0 z-40 block' : 'hidden lg:block'}
        `}
      >
        <div className="p-4 h-[calc(100vh-6.5rem)] overflow-y-auto">
          <div className="text-[10px] font-black text-gray-500 uppercase tracking-[0.2em] mb-6 font-mono">
            Data Terminal
          </div>
          <nav className="space-y-1">
            {DATA_SECTIONS.map((section) => (
              <SectionGroup
                key={section.label}
                section={section}
                pathname={pathname}
              />
            ))}
          </nav>
        </div>
      </aside>
    </>
  );
}

function SectionGroup({
  section,
  pathname,
}: {
  section: SidebarSection;
  pathname: string;
}) {
  const isActive = section.children.some(
    (c) => pathname === c.href || pathname.startsWith(c.href + '/')
  );
  const [open, setOpen] = useState(isActive);

  return (
    <div className="mb-2">
      <button
        onClick={() => setOpen(!open)}
        className={`
          w-full flex items-center justify-between px-3 py-2 text-xs font-bold
          text-gray-300 hover:text-white hover:bg-white/5 rounded transition-colors
          uppercase tracking-wide
          ${isActive ? 'bg-white/10 text-white' : ''}
        `}
      >
        <span className="flex items-center gap-2">
          <Icon name={section.icon} size={14} className="text-primary" />
          {section.label}
        </span>
        <Icon
          name={open ? 'ChevronDownIcon' : 'ChevronRightIcon'}
          size={12}
        />
      </button>
      {open && (
        <div className="ml-4 mt-1 space-y-0.5 border-l border-[#333] pl-3">
          {section.children.map((item) => {
            const isItemActive = pathname === item.href;
            return (
              <Link
                key={item.href}
                href={item.href}
                className={`
                  block px-3 py-1.5 text-[11px] font-medium rounded transition-colors
                  ${
                    isItemActive
                      ? 'text-primary bg-primary/10 border-r-2 border-primary'
                      : 'text-gray-500 hover:text-white'
                  }
                `}
              >
                {item.label}
              </Link>
            );
          })}
        </div>
      )}
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/_components/DataTable.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';
import React from 'react';

export interface DataColumn {
  key: string;
  label: string;
  format?: (value: any) => string;
  align?: 'left' | 'right' | 'center';
  width?: string;
}

export interface DataTableProps {
  columns: DataColumn[];
  data: Record<string, any>[];
  loading?: boolean;
  emptyMessage?: string;
}

export function DataTable({
  columns,
  data,
  loading = false,
  emptyMessage = 'No data available',
}: DataTableProps) {
  if (loading) {
    return (
      <div className="py-12 text-center">
        <div className="inline-block animate-pulse">
          <div className="h-3 w-48 bg-[#1a1a1a] rounded mb-2" />
          <div className="h-3 w-64 bg-[#1a1a1a] rounded" />
        </div>
      </div>
    );
  }

  if (data.length === 0) {
    return (
      <div className="py-20 text-center border border-dashed border-[#1a1a1a]">
        <p className="text-[#333] font-mono text-xs uppercase tracking-widest">{emptyMessage}</p>
      </div>
    );
  }

  return (
    <div className="overflow-x-auto">
      <table className="w-full text-xs">
        <thead>
          <tr className="border-b border-[#1a1a1a]">
            {columns.map((col) => (
              <th
                key={col.key}
                style={{ width: col.width, textAlign: col.align || 'left' }}
                className="px-4 py-3 font-black text-[#555] uppercase tracking-widest text-left"
              >
                {col.label}
              </th>
            ))}
          </tr>
        </thead>
        <tbody>
          {data.map((row, idx) => (
            <tr
              key={idx}
              className="border-b border-[#0a0a0a] hover:bg-[#0a0a0a] transition-colors"
            >
              {columns.map((col) => (
                <td key={col.key} style={{ textAlign: col.align || 'left' }} className="px-4 py-4">
                  <span className="text-[#aaa]">
                    {col.format ? col.format(row[col.key]) : row[col.key] ?? 'â€”'}
                  </span>
                </td>
              ))}
            </tr>
          ))}
        </tbody>
      </table>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/_components/MetricCard.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';

interface MetricCardProps {
  label: string;
  value: string;
  trend?: number;
}

export function MetricCard({ label, value, trend }: MetricCardProps) {
  return (
    <div className="bg-card border border-border p-4 flex flex-col justify-between h-full hover:border-primary/50 transition-colors">
      <span className="text-xs font-bold text-muted-foreground uppercase tracking-wider font-caption">
        {label}
      </span>
      <div className="mt-2 flex items-end justify-between">
        <span className="text-2xl font-black text-foreground font-data tabular-nums">
          {value}
        </span>
        {trend !== undefined && (
          <span className={`text-xs font-bold font-mono ${trend >= 0 ? 'text-success' : 'text-error'}`}>
            {trend > 0 ? '+' : ''}{trend}%
          </span>
        )}
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/defi/_components/DeFiClient.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';
import React, { useState, useMemo } from 'react';
import { formatNumber } from '../../_lib/formatters';

interface Protocol {
  name: string;
  tvl: number;
  chainTvls?: Record<string, number>;
}

export default function DeFiClient({ protocols }: { protocols: Protocol[] }) {
  const [search, setSearch] = useState('');
  const [chain, setChain] = useState('all');

  const filtered = useMemo(() => {
    let result = (protocols || []).slice(0, 100);
    if (search) {
      const q = search.toLowerCase();
      result = result.filter((p) => p.name?.toLowerCase().includes(q));
    }
    return result.sort((a, b) => (b.tvl || 0) - (a.tvl || 0));
  }, [protocols, search, chain]);

  const totalTVL = filtered.reduce((sum, p) => sum + (p.tvl || 0), 0);

  return (
    <div className="space-y-8">
      <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div className="bg-[#0a0a0a] border border-[#1a1a1a] p-6">
          <div className="text-2xl font-black text-[#FABF2C]">${formatNumber(totalTVL)}</div>
          <div className="text-[9px] font-black text-[#555] uppercase tracking-widest mt-2">
            Total TVL
          </div>
        </div>
      </div>

      <div className="flex gap-3 mb-6">
        <input
          type="text"
          placeholder="Search protocol..."
          value={search}
          onChange={(e) => setSearch(e.target.value)}
          className="flex-1 bg-[#0a0a0a] border border-[#1a1a1a] px-4 py-2 text-xs font-mono outline-none focus:border-[#FABF2C]/50 placeholder:text-[#333] uppercase"
        />
      </div>

      <div className="border border-[#1a1a1a] overflow-hidden">
        <table className="w-full text-xs">
          <thead className="border-b border-[#1a1a1a] bg-[#0a0a0a]">
            <tr>
              <th className="px-4 py-3 text-left font-black text-[#555] uppercase tracking-widest">Protocol</th>
              <th className="px-4 py-3 text-right font-black text-[#555] uppercase tracking-widest">TVL</th>
            </tr>
          </thead>
          <tbody>
            {filtered.slice(0, 50).map((p) => (
              <tr key={p.name} className="border-b border-[#0a0a0a] hover:bg-[#0a0a0a] transition-colors">
                <td className="px-4 py-4 text-[#aaa]">{p.name}</td>
                <td className="px-4 py-4 text-right font-black text-[#FABF2C]">${formatNumber(p.tvl || 0)}</td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>

      {filtered.length === 0 && (
        <div className="py-20 text-center border border-dashed border-[#1a1a1a]">
          <p className="text-[#333] font-mono text-xs uppercase tracking-widest">No protocols found</p>
        </div>
      )}
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/defi/dex-volume/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React, { Suspense } from 'react';
import { getDexVolume } from '@/lib/api';
import { getDailyDexVolume, QUERY_IDS } from '@/lib/dune';
import { MetricCard } from '../../_components/MetricCard';
import AreaChartCard from '../../_components/charts/AreaChartCard';
import { ChartSkeleton } from '../../_components/ChartSkeleton';

export const metadata = { title: 'DEX Volume | CryptoBrainNews' };

// 1. The Main Page (Instant Load)
export default function DexVolumePage() {
  return (
    <div className="space-y-8">
      <div>
        <h1 className="text-3xl font-black text-white font-heading uppercase tracking-tighter">
          DEX <span className="text-primary">Volume</span>
        </h1>
        <p className="text-[#444] font-mono text-[10px] uppercase tracking-[0.3em] mt-1">
          Decentralized Exchange Trading Activity
        </p>
      </div>

      {/* 2. The Suspense Boundary (Streaming) */}
      <Suspense fallback={<ChartSkeleton />}>
        <AsyncDexData />
      </Suspense>
    </div>
  );
}

// 3. The Data Fetching Component (Runs in background)
async function AsyncDexData() {
  // Fetch Llama first (fast)
  const llamaPromise = getDexVolume();
  
  // Fetch Dune (slow/timeout)
  const dunePromise = (async () => {
    const queryId = QUERY_IDS.DAILY_DEX_VOLUME as number;
    if (queryId === 0) return null;
    try {
      // 15s timeout
      const timeout = new Promise((_, reject) => setTimeout(() => reject(new Error('Timeout')), 15000));
      return await Promise.race([getDailyDexVolume(30), timeout]) as any[];
    } catch {
      return null;
    }
  })();

  const [llamaVolume, duneVolume] = await Promise.all([llamaPromise, dunePromise]);

  let chartData: any[] = llamaVolume;
  let source = "DefiLlama";
  let yKey = "volume";
  let xKey = "date";
  let duneSuccess = false;

  if (duneVolume && duneVolume.length > 0) {
    chartData = duneVolume;
    source = "Dune Analytics";
    yKey = "volume_usd";
    xKey = "day";
    duneSuccess = true;
  }

  const totalVol = chartData.reduce((sum, d) => sum + (Number(d[yKey]) || 0), 0);

  return (
    <div className="space-y-8">
      <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
        <MetricCard 
          label="30d Volume" 
          value={totalVol >= 1e12 ? `$${(totalVol / 1e12).toFixed(2)}T` : `$${(totalVol / 1e9).toFixed(2)}B`} 
        />
        <MetricCard label="Source" value={source} />
        <MetricCard label="Data Points" value={String(chartData.length)} />
        <MetricCard label="Status" value={duneSuccess ? "Live On-Chain" : "Aggregated"} />
      </div>

      <AreaChartCard
        title="Global DEX Volume"
        subtitle={duneSuccess ? "On-chain data directly from Dune Analytics" : "Aggregated data via DefiLlama"}
        source={source}
        data={chartData}
        xKey={xKey}
        yKey={yKey}
        yFormat="usd"
        height={400}
      />
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/defi/error.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';
export default function DeFiError({ error, reset }: { error: Error; reset: () => void }) {
  return (
    <main className="min-h-screen bg-[#050505] py-10 px-4 lg:px-8">
      <div className="max-w-[1400px] mx-auto">
        <div className="py-20 text-center border border-dashed border-red-500/20">
          <p className="text-red-500 font-mono text-xs uppercase tracking-widest mb-4">Error Loading DeFi Data</p>
          <button
            onClick={reset}
            className="bg-[#FABF2C] text-black font-black text-xs px-6 py-2 uppercase tracking-widest hover:bg-white transition-all"
          >
            Retry
          </button>
        </div>
      </div>
    </main>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/defi/large-swaps/loading.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
export default function LargeSwapsLoading() {
  return (
    <div className="space-y-8 animate-pulse">
      <div>
        <div className="h-8 w-64 bg-white/5 mb-2" />
        <div className="h-4 w-48 bg-white/5" />
      </div>
      <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
        {[1, 2, 3, 4].map((i) => (
          <div key={i} className="h-24 bg-white/5 border border-white/5" />
        ))}
      </div>
      <div className="bg-white/5 border border-white/5 h-[600px]" />
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/defi/large-swaps/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';

export const metadata = { title: 'Large DEX Swaps' };

interface DexSwap {
  tx_hash: string;
  block_time: string;
  project: string;
  token_a_symbol: string;
  token_b_symbol: string;
  usd_amount: number;
}

// NOTE: Add your large DEX swaps API integration here
async function getLargeDexSwaps(): Promise<DexSwap[]> {
  try {
    // TODO: Replace with your actual API call
    // Example from Dune Analytics:
    // const res = await fetch('https://api.dune.com/api/v1/query/{QUERY_ID}/results', {
    //   headers: { 'X-DUNE-API-KEY': process.env.DUNE_API_KEY }
    // });
    // return res.json().data.rows;
    return [];
  } catch (error) {
    console.error('Failed to fetch large swaps:', error);
    return [];
  }
}

function formatUsd(val: number | null | undefined) {
  if (!val) return '$0';
  return val >= 1e6 ? `$${(val / 1e6).toFixed(2)}M` : `$${(val / 1e3).toFixed(0)}K`;
}

export default async function LargeSwapsPage() {
  const swaps = await getLargeDexSwaps();

  const totalVolume = swaps.reduce((acc, s) => acc + (s.usd_amount || 0), 0);
  const avgSwap = swaps.length > 0 ? totalVolume / swaps.length : 0;

  // Find top active pair
  const pairCounts: Record<string, number> = {};
  swaps.forEach((s) => {
    const pair = `${s.token_a_symbol}/${s.token_b_symbol}`;
    pairCounts[pair] = (pairCounts[pair] || 0) + 1;
  });
  const topPair = Object.entries(pairCounts).sort((a, b) => b[1] - a[1])[0]?.[0] || 'â€”';

  return (
    <div className="space-y-8">
      <div>
        <h1 className="text-3xl font-black text-foreground font-heading mb-1">
          DEX <span className="text-[#FABF2C]">Flow</span>
        </h1>
        <p className="text-[#555] font-mono text-[10px] uppercase tracking-[0.3em]">
          Live trades &gt; $100k on Uniswap, Curve, Balancer
        </p>
      </div>

      <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
        <div className="border border-[#1a1a1a] bg-[#0a0a0a] p-4">
          <p className="text-[9px] text-[#555] uppercase font-mono mb-2">24h Volume (Sample)</p>
          <p className="text-2xl font-black text-[#FABF2C]">{formatUsd(totalVolume)}</p>
        </div>
        <div className="border border-[#1a1a1a] bg-[#0a0a0a] p-4">
          <p className="text-[9px] text-[#555] uppercase font-mono mb-2">Avg Trade Size</p>
          <p className="text-2xl font-black text-[#FABF2C]">{formatUsd(avgSwap)}</p>
        </div>
        <div className="border border-[#1a1a1a] bg-[#0a0a0a] p-4">
          <p className="text-[9px] text-[#555] uppercase font-mono mb-2">Top Active Pair</p>
          <p className="text-2xl font-black text-[#FABF2C]">{topPair}</p>
        </div>
        <div className="border border-[#1a1a1a] bg-[#0a0a0a] p-4">
          <p className="text-[9px] text-[#555] uppercase font-mono mb-2">Source</p>
          <p className="text-2xl font-black text-[#FABF2C]">Dune</p>
        </div>
      </div>

      <div className="bg-card border border-border overflow-hidden">
        <div className="overflow-x-auto">
          <table className="w-full text-left text-xs">
            <thead className="bg-secondary/50 text-[#555] uppercase tracking-wider font-mono border-b border-[#1a1a1a]">
              <tr>
                <th className="px-6 py-3">Time</th>
                <th className="px-6 py-3">DEX</th>
                <th className="px-6 py-3">Pair</th>
                <th className="px-6 py-3 text-right">Value (USD)</th>
                <th className="px-6 py-3">Action</th>
                <th className="px-6 py-3 text-center">Tx</th>
              </tr>
            </thead>
            <tbody className="divide-y divide-border">
              {swaps.map((swap, i) => (
                <tr key={`${swap.tx_hash}-${i}`} className={`hover:bg-primary/5 transition-colors group ${i % 2 === 0 ? 'bg-[#080808]' : 'bg-[#0b0b0b]'}`}>
                  <td className="px-6 py-3 text-[#555] font-data whitespace-nowrap">
                    {new Date(swap.block_time).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}
                  </td>
                  <td className="px-6 py-3 font-bold text-white capitalize">
                    {swap.project}
                  </td>
                  <td className="px-6 py-3 text-[#555] font-data">
                    <span className="text-white font-bold">{swap.token_a_symbol}</span>
                    <span className="mx-1 text-[#444]">/</span>
                    <span>{swap.token_b_symbol}</span>
                  </td>
                  <td className="px-6 py-3 text-right font-data font-bold text-[#FABF2C]">
                    {formatUsd(swap.usd_amount)}
                  </td>
                  <td className="px-6 py-3 text-right text-xs font-mono text-[#00d672]">
                    SWAP
                  </td>
                  <td className="px-6 py-3 text-center">
                    <a
                      href={`https://etherscan.io/tx/${swap.tx_hash}`}
                      target="_blank"
                      rel="noopener noreferrer"
                      className="text-[#555] hover:text-white transition-colors"
                    >
                      â†—
                    </a>
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </div>

      {swaps.length === 0 && (
        <div className="py-20 text-center border border-dashed border-[#1a1a1a]">
          <p className="text-[#555] font-mono text-xs uppercase">No large swaps data available â€¢ Add your Dune API integration</p>
        </div>
      )}
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/defi/lending/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';
import { MetricCard } from '../../_components/MetricCard';

export const metadata = { title: 'defi / lending | CryptoBrainNews' };

export default function Page() {
  return (
    <div className="space-y-8">
      <div>
        <h1 className="text-3xl font-black text-white font-heading uppercase tracking-tighter">
          defi / lending <span className="text-primary">Data</span>
        </h1>
        <p className="text-[#444] font-mono text-[10px] uppercase tracking-[0.3em] mt-1">
          Coming Soon â€¢ Powered by Dune Analytics
        </p>
      </div>
      <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
        <MetricCard label="Status" value="Building" />
        <MetricCard label="Source" value="Dune" />
      </div>
      <div className="p-20 border-2 border-dashed border-[#1a1a1a] text-center text-[#333] font-mono text-xs uppercase tracking-[0.3em]">
        Data pipeline initializing...
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/defi/loading.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
export default function DeFiLoading() {
  return (
    <main className="min-h-screen bg-[#050505] py-10 px-4 lg:px-8">
      <div className="max-w-[1400px] mx-auto">
        <div className="h-10 w-48 bg-[#1a1a1a] rounded mb-4 animate-pulse" />
        <div className="h-4 w-80 bg-[#0a0a0a] rounded mb-10 animate-pulse" />
        <div className="h-96 bg-[#0a0a0a] border border-[#1a1a1a] rounded animate-pulse" />
      </div>
    </main>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/defi/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';
import DeFiClient from './_components/DeFiClient';

export const metadata = {
  title: 'DeFi Data | CryptoBrainNews',
  description: 'DeFi protocol TVL, yields, and decentralized finance analytics.',
};

export const dynamic = 'force-dynamic';

async function getDeFiData() {
  try {
    const res = await fetch('https://api.llama.fi/protocols', {
      next: { revalidate: 600 },
    });
    if (!res.ok) throw new Error('Failed');
    return await res.json();
  } catch {
    return [];
  }
}

export default async function DeFiPage() {
  const protocols = await getDeFiData();

  return (
    <main className="min-h-screen bg-[#050505] py-10 px-4 lg:px-8">
      <div className="max-w-[1400px] mx-auto">
        <h1 className="text-4xl font-black text-white uppercase tracking-tighter mb-2">DeFi Protocols</h1>
        <p className="text-[#555] font-mono text-[10px] uppercase tracking-[0.3em] mb-10">
          Total Value Locked & Protocol Analysis
        </p>
        <DeFiClient protocols={protocols} />
      </div>
    </main>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/defi/revenue/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';

export const metadata = { title: 'Protocol Revenue | CryptoBrainNews' };

interface ProtocolRevenue {
  protocol: string;
  revenue_7d: number;
  revenue_30d: number;
}

// NOTE: Add your protocol revenue API integration here
async function getProtocolRevenue(): Promise<ProtocolRevenue[]> {
  try {
    // TODO: Replace with your actual API call
    // Example from Dune Analytics:
    // const res = await fetch('https://api.dune.com/api/v1/query/{QUERY_ID}/results', {
    //   headers: { 'X-DUNE-API-KEY': process.env.DUNE_API_KEY }
    // });
    // return res.json();
    return [];
  } catch (error) {
    console.error('Failed to fetch protocol revenue:', error);
    return [];
  }
}

export default async function ProtocolRevenuePage() {
  const data = await getProtocolRevenue();

  const formatUsd = (n: number): string => {
    if (n >= 1e9) return `$${(n / 1e9).toFixed(2)}B`;
    if (n >= 1e6) return `$${(n / 1e6).toFixed(1)}M`;
    return `$${n.toLocaleString()}`;
  };

  const formattedRows = data.map((row) => ({
    protocol: row.protocol,
    revenue_7d: formatUsd(row.revenue_7d),
    revenue_30d: formatUsd(row.revenue_30d),
  }));

  return (
    <div className="space-y-8">
      <div className="grid grid-cols-2 lg:grid-cols-3 gap-4">
        <div className="border border-[#1a1a1a] bg-[#0a0a0a] p-4">
          <p className="text-[9px] text-[#555] uppercase font-mono mb-2">Protocols Tracked</p>
          <p className="text-2xl font-black text-[#FABF2C]">{data.length}</p>
        </div>
        <div className="border border-[#1a1a1a] bg-[#0a0a0a] p-4">
          <p className="text-[9px] text-[#555] uppercase font-mono mb-2">Top Protocol</p>
          <p className="text-2xl font-black text-[#FABF2C]">{data[0]?.protocol || 'â€”'}</p>
        </div>
        <div className="border border-[#1a1a1a] bg-[#0a0a0a] p-4">
          <p className="text-[9px] text-[#555] uppercase font-mono mb-2">Source</p>
          <p className="text-2xl font-black text-[#FABF2C]">Dune Analytics</p>
        </div>
      </div>

      <div className="bg-card border border-border overflow-hidden">
        <div className="overflow-x-auto">
          <table className="w-full text-left text-xs">
            <thead className="bg-secondary/50 text-[#555] uppercase tracking-wider font-mono border-b border-[#1a1a1a]">
              <tr>
                <th className="px-6 py-3">Protocol</th>
                <th className="px-6 py-3 text-right">7d Revenue</th>
                <th className="px-6 py-3 text-right">30d Revenue</th>
              </tr>
            </thead>
            <tbody className="divide-y divide-border">
              {formattedRows.map((row, i) => (
                <tr key={row.protocol} className={`hover:bg-primary/5 transition-colors ${i % 2 === 0 ? 'bg-[#080808]' : 'bg-[#0b0b0b]'}`}>
                  <td className="px-6 py-3 font-semibold text-white">{row.protocol}</td>
                  <td className="px-6 py-3 text-right font-bold text-[#FABF2C]">{row.revenue_7d}</td>
                  <td className="px-6 py-3 text-right font-bold text-[#FABF2C]">{row.revenue_30d}</td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </div>

      {data.length === 0 && (
        <div className="py-20 text-center border border-dashed border-[#1a1a1a]">
          <p className="text-[#555] font-mono text-xs uppercase">No protocol revenue data available â€¢ Add your Dune API integration</p>
        </div>
      )}
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/defi/stablecoins/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';

export const metadata = {
  title: 'Stablecoin Intelligence | CryptoBrainNews',
  description: 'Aggregate stablecoin market cap and liquidity flows.',
};

export const dynamic = 'force-dynamic';

interface StablecoinData {
  date: Date;
  mcap: number;
}

// NOTE: Add your stablecoin data API integration here
async function getStablecoinData(): Promise<StablecoinData[]> {
  try {
    // TODO: Replace with your actual API call
    // Example: const res = await fetch('https://api.defillama.com/stablecoins');
    // const data = await res.json();
    // return data.map((d: any) => ({ date: new Date(d.date * 1000), mcap: d.total }));
    return [];
  } catch (error) {
    console.error('Failed to fetch stablecoin data:', error);
    return [];
  }
}

export default async function StablecoinsPage() {
  const data = await getStablecoinData();
  const currentMcap = data.length > 0 ? data[data.length - 1]?.mcap || 0 : 0;

  return (
    <div className="space-y-8">
      <div>
        <h1 className="text-3xl font-black text-white font-heading uppercase tracking-tighter mb-1">
          Stablecoin <span className="text-[#FABF2C]">Intelligence</span>
        </h1>
        <p className="text-[#555] font-mono text-[10px] uppercase tracking-[0.3em] mt-1">Aggregate Market Cap & Liquidity Flows</p>
      </div>

      <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div className="border border-[#1a1a1a] bg-[#0a0a0a] p-6">
          <p className="text-[9px] text-[#555] uppercase font-mono mb-2">Total Circulating</p>
          <p className="text-3xl font-black text-[#FABF2C]">${(currentMcap / 1e9).toFixed(2)}B</p>
        </div>
        <div className="border border-[#1a1a1a] bg-[#0a0a0a] p-6">
          <p className="text-[9px] text-[#555] uppercase font-mono mb-2">Dominance</p>
          <p className="text-3xl font-black text-[#FABF2C]">72.4%</p>
        </div>
        <div className="border border-[#1a1a1a] bg-[#0a0a0a] p-6">
          <p className="text-[9px] text-[#555] uppercase font-mono mb-2">Data Source</p>
          <p className="text-3xl font-black text-[#FABF2C]">DefiLlama</p>
        </div>
      </div>

      <div className="bg-card border border-border p-8 text-center">
        {data.length === 0 ? (
          <p className="text-[#555] font-mono text-xs uppercase">
            ğŸ’¾ Chart Visualization Module Loading... Add your API to src/lib/api.ts
          </p>
        ) : (
          <p className="text-[#333] font-mono text-xs uppercase italic">Chart data available</p>
        )}
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/defi/tvl/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';
import { getDeFiProtocols } from '@/lib/api';

export const metadata = {
  title: 'DeFi TVL | CryptoBrainNews',
  description: 'DeFi Protocol Rankings by Total Value Locked.',
};

export const dynamic = 'force-dynamic';

export default async function TVLPage() {
  const protocols = await getDeFiProtocols();

  const formatUsd = (val: number) => {
    if (val >= 1e9) return `$${(val / 1e9).toFixed(2)}B`;
    if (val >= 1e6) return `$${(val / 1e6).toFixed(1)}M`;
    return `$${val.toLocaleString()}`;
  };

  const formattedRows = protocols.map((p, i) => ({
    rank: i + 1,
    name: p.name,
    category: p.category || 'N/A',
    chain: 'Multi',
    tvl: p.tvl >= 1e9 ? `$${(p.tvl / 1e9).toFixed(2)}B` : `$${(p.tvl / 1e6).toFixed(1)}M`,
    change_1d: 'â€”',
  }));

  const totalTvl = protocols.reduce((sum, p) => sum + p.tvl, 0);

  return (
    <div className="space-y-8">
      <div>
        <h1 className="text-3xl font-black text-white font-heading uppercase tracking-tighter mb-1">
          TVL <span className="text-[#FABF2C]">Rankings</span>
        </h1>
        <p className="text-[#555] font-mono text-[10px] uppercase tracking-[0.3em] mt-1">
          Total Value Locked by Protocol
        </p>
      </div>

      <div className="grid grid-cols-2 lg:grid-cols-3 gap-4">
        <div className="border border-[#1a1a1a] bg-[#0a0a0a] p-4">
          <p className="text-[9px] text-[#555] uppercase font-mono mb-2">Total DeFi TVL</p>
          <p className="text-2xl font-black text-[#FABF2C]">{formatUsd(totalTvl)}</p>
        </div>
        <div className="border border-[#1a1a1a] bg-[#0a0a0a] p-4">
          <p className="text-[9px] text-[#555] uppercase font-mono mb-2">Protocols Tracked</p>
          <p className="text-2xl font-black text-[#FABF2C]">{protocols.length}</p>
        </div>
        <div className="border border-[#1a1a1a] bg-[#0a0a0a] p-4">
          <p className="text-[9px] text-[#555] uppercase font-mono mb-2">Source</p>
          <p className="text-2xl font-black text-[#FABF2C]">DefiLlama</p>
        </div>
      </div>

      <div className="bg-card border border-border overflow-hidden">
        <div className="overflow-x-auto">
          <table className="w-full text-left text-xs">
            <thead className="bg-secondary/50 text-[#555] uppercase tracking-wider font-mono border-b border-[#1a1a1a]">
              <tr>
                <th className="px-6 py-3">#</th>
                <th className="px-6 py-3">Protocol</th>
                <th className="px-6 py-3">Category</th>
                <th className="px-6 py-3">Chain</th>
                <th className="px-6 py-3 text-right">TVL</th>
                <th className="px-6 py-3 text-right">24H</th>
              </tr>
            </thead>
            <tbody className="divide-y divide-border">
              {formattedRows.map((row, i) => (
                <tr key={row.name} className={`hover:bg-primary/5 transition-colors ${i % 2 === 0 ? 'bg-[#080808]' : 'bg-[#0b0b0b]'}`}>
                  <td className="px-6 py-3 text-[#555]">{row.rank}</td>
                  <td className="px-6 py-3 font-semibold text-white">{row.name}</td>
                  <td className="px-6 py-3 text-[#888] text-[10px]">{row.category}</td>
                  <td className="px-6 py-3 text-[#888]">{row.chain}</td>
                  <td className="px-6 py-3 text-right font-bold text-[#FABF2C]">{row.tvl}</td>
                  <td className="px-6 py-3 text-right text-[#888]">{row.change_1d}</td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/defi/whale-watch/error.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';

export default function WhaleWatchError({
  error,
  reset,
}: {
  error: Error;
  reset: () => void;
}) {
  return (
    <div className="min-h-[50vh] flex flex-col items-center justify-center text-center p-6 border border-[#1a1a1a] bg-[#0a0a0a]">
      <div className="text-4xl mb-4">ğŸ‹</div>
      <h3 className="text-xl font-bold font-heading text-white mb-2">
        Data Stream Interrupted
      </h3>
      <p className="text-sm text-[#666] font-mono mb-6 max-w-md">
        The on-chain feed is currently unresponsive. This is often due to Dune Analytics rate limits or timeouts.
      </p>
      <button
        onClick={reset}
        className="bg-primary text-black font-black text-xs px-6 py-3 uppercase tracking-widest hover:bg-white transition-colors"
      >
        Retry Connection
      </button>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/defi/whale-watch/loading.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
export default function WhaleWatchLoading() {
  return (
    <div className="space-y-8 animate-pulse">
      <div>
        <div className="h-8 w-64 bg-white/5 mb-2" />
        <div className="h-4 w-48 bg-white/5" />
      </div>

      <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
        {[1, 2, 3, 4].map((i) => (
          <div key={i} className="h-24 bg-white/5 border border-white/5" />
        ))}
      </div>

      <div className="bg-white/5 border border-white/5 h-[600px]" />
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/defi/whale-watch/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import { getWhaleTransfers } from '@/lib/dune';

export const metadata = { title: 'ğŸ‹ Whale Watch' };

function shortenAddress(addr: string | null | undefined): string {
  if (!addr || addr.length < 10) return addr || 'â€”';
  return `${addr.slice(0, 6)}â€¦${addr.slice(-4)}`;
}

function formatUsd(value: number | null | undefined): string {
  const numValue = Number(value) || 0;
  if (numValue === 0) return '$0';
  if (numValue >= 1_000_000) return `$${(numValue / 1_000_000).toFixed(1)}M`;
  if (numValue >= 1_000) return `$${(numValue / 1_000).toFixed(0)}K`;
  return `$${numValue.toFixed(0)}`;
}

export default async function WhaleWatchPage() {
  const transfers = await getWhaleTransfers();
  const totalVolume = transfers.reduce((s, t) => {
    const amount = Number(t.amount_usd) || 0;
    return s + amount;
  }, 0);
  const uniqueWhales = new Set(transfers.map((t) => t.whale_address || t.sender)).size;

  return (
    <div className="space-y-8">
      <div>
        <h1 className="text-3xl font-black text-white font-heading uppercase tracking-tighter mb-1">ğŸ‹ Whale <span className="text-[#FABF2C]">Watch</span></h1>
        <p className="text-[#555] font-mono text-[10px] uppercase tracking-[0.3em] mt-1">Large onâ€‘chain transfers (last 24h)</p>
      </div>

      <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
        <div className="border border-[#1a1a1a] bg-[#0a0a0a] p-4">
          <p className="text-[9px] text-[#555] uppercase font-mono mb-2">Transfers</p>
          <p className="text-2xl font-black text-[#FABF2C]">{transfers.length}</p>
        </div>
        <div className="border border-[#1a1a1a] bg-[#0a0a0a] p-4">
          <p className="text-[9px] text-[#555] uppercase font-mono mb-2">Total Volume</p>
          <p className="text-2xl font-black text-[#FABF2C]">{formatUsd(totalVolume)}</p>
        </div>
        <div className="border border-[#1a1a1a] bg-[#0a0a0a] p-4">
          <p className="text-[9px] text-[#555] uppercase font-mono mb-2">Unique Whales</p>
          <p className="text-2xl font-black text-[#FABF2C]">{uniqueWhales}</p>
        </div>
        <div className="border border-[#1a1a1a] bg-[#0a0a0a] p-4">
          <p className="text-[9px] text-[#555] uppercase font-mono mb-2">Data Source</p>
          <p className="text-2xl font-black text-[#FABF2C]">Dune</p>
        </div>
      </div>

      {transfers.length === 0 ? (
        <div className="bg-[#0a0a0a] border border-[#1a1a1a] p-12 text-center">
          <div className="text-4xl mb-4">ğŸ‹</div>
          <p className="text-[#555] font-mono text-xs uppercase">No whale transfers found. Dune API key may not be configured.</p>
        </div>
      ) : (
        <div className="bg-[#0a0a0a] border border-[#1a1a1a] overflow-hidden">
          <div className="overflow-x-auto">
            <table className="w-full text-left text-xs">
              <thead className="bg-[#080808] text-[#555] uppercase tracking-wider font-mono border-b border-[#1a1a1a]">
                <tr>
                  <th className="px-6 py-3">Time</th>
                  <th className="px-6 py-3">Token</th>
                  <th className="px-6 py-3">From</th>
                  <th className="px-6 py-3">To</th>
                  <th className="px-6 py-3 text-right">Amount</th>
                  <th className="px-6 py-3 text-right">USD Value</th>
                  <th className="px-6 py-3">Tx</th>
                </tr>
              </thead>
              <tbody className="divide-y divide-[#0a0a0a]">
                {transfers.slice(0, 50).map((tx, i) => (
                  <tr key={`${tx.tx_hash}-${i}`} className={`hover:bg-[#111] transition-colors ${i % 2 === 0 ? 'bg-[#080808]' : 'bg-[#0b0b0b]'}`}>
                    <td className="px-6 py-3 text-[#555] font-data whitespace-nowrap">
                      {new Date(tx.block_time).toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' })}
                    </td>
                    <td className="px-6 py-3 font-semibold text-white">{tx.token_symbol || 'ETH'}</td>
                    <td className="px-6 py-3 text-[#555] font-data">
                      <a href={`https://etherscan.io/address/${tx.whale_address || tx.sender}`} target="_blank" rel="noopener" className="hover:text-[#FABF2C]">
                        {shortenAddress(tx.whale_address || tx.sender)}
                      </a>
                    </td>
                    <td className="px-6 py-3 text-[#555] font-data">
                      <a href={`https://etherscan.io/address/${tx.recipient || tx.to}`} target="_blank" rel="noopener" className="hover:text-[#FABF2C]">
                        {shortenAddress(tx.recipient || tx.to)}
                      </a>
                    </td>
                    <td className="px-6 py-3 text-right font-data text-white">
                      {Number(tx.amount || 0).toLocaleString(undefined, { maximumFractionDigits: 2 })}
                    </td>
                    <td className="px-6 py-3 text-right font-bold text-[#FABF2C]">
                      {formatUsd(tx.amount_usd)}
                    </td>
                    <td className="px-6 py-3">
                      <a href={`https://etherscan.io/tx/${tx.tx_hash}`} target="_blank" rel="noopener" className="text-[#FABF2C] hover:underline font-data">
                        View â†—
                      </a>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        </div>
      )}
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/defi/yields/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';
import { getTopYields, type YieldPool } from '@/lib/api';
import { MetricCard } from '../../_components/MetricCard';
import DataTable from '../../_components/charts/DataTable';

export const metadata = { title: 'DeFi Yields | CryptoBrainNews' };

export default async function YieldsPage() {
  const yields = await getTopYields();

  // Calculate stats
  const avgApy = yields.reduce((sum, p) => sum + p.apy, 0) / yields.length;
  const topPool = yields.reduce((prev, current) => (prev.apy > current.apy) ? prev : current);

  // Format for Table
  const formattedRows = yields.map((row, i) => ({
    rank: i + 1,
    project: row.project,
    chain: row.chain,
    symbol: row.symbol,
    tvl: `$${(row.tvlUsd / 1e6).toFixed(1)}M`,
    apy: `${row.apy.toFixed(2)}%`,
    trend: row.apyPct1D, // For color coding if we added it, simple string for now
  }));

  return (
    <div className="space-y-8">
      <div>
        <h1 className="text-3xl font-black text-white font-heading uppercase tracking-tighter">
          DeFi <span className="text-primary">Yields</span>
        </h1>
        <p className="text-[#444] font-mono text-[10px] uppercase tracking-[0.3em] mt-1">
          Top Opportunities â€¢ Risk-Adjusted by TVL
        </p>
      </div>

      <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
        <MetricCard label="Opportunities" value={String(yields.length)} />
        <MetricCard label="Avg APY (Top 50)" value={`${avgApy.toFixed(2)}%`} />
        <MetricCard label="Highest APY" value={`${topPool.apy.toFixed(2)}%`} />
        <MetricCard label="Source" value="DefiLlama API" />
      </div>

      <DataTable
        columns={[
          { key: 'rank', label: '#' },
          { key: 'project', label: 'Protocol' },
          { key: 'chain', label: 'Chain' },
          { key: 'symbol', label: 'Token' },
          { key: 'tvl', label: 'TVL', align: 'right' },
          { key: 'apy', label: 'APY', align: 'right' },
        ]}
        rows={formattedRows}
      />
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/etfs/bitcoin/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';
import { MetricCard } from '../../_components/MetricCard';

export const metadata = { title: 'etfs / bitcoin | CryptoBrainNews' };

export default function Page() {
  return (
    <div className="space-y-8">
      <div>
        <h1 className="text-3xl font-black text-white font-heading uppercase tracking-tighter">
          etfs / bitcoin <span className="text-primary">Data</span>
        </h1>
        <p className="text-[#444] font-mono text-[10px] uppercase tracking-[0.3em] mt-1">
          Coming Soon â€¢ Powered by Dune Analytics
        </p>
      </div>
      <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
        <MetricCard label="Status" value="Building" />
        <MetricCard label="Source" value="Dune" />
      </div>
      <div className="p-20 border-2 border-dashed border-[#1a1a1a] text-center text-[#333] font-mono text-xs uppercase tracking-[0.3em]">
        Data pipeline initializing...
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/etfs/comparison/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';
import { MetricCard } from '../../_components/MetricCard';

export const metadata = { title: 'etfs / comparison | CryptoBrainNews' };

export default function Page() {
  return (
    <div className="space-y-8">
      <div>
        <h1 className="text-3xl font-black text-white font-heading uppercase tracking-tighter">
          etfs / comparison <span className="text-primary">Data</span>
        </h1>
        <p className="text-[#444] font-mono text-[10px] uppercase tracking-[0.3em] mt-1">
          Coming Soon â€¢ Powered by Dune Analytics
        </p>
      </div>
      <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
        <MetricCard label="Status" value="Building" />
        <MetricCard label="Source" value="Dune" />
      </div>
      <div className="p-20 border-2 border-dashed border-[#1a1a1a] text-center text-[#333] font-mono text-xs uppercase tracking-[0.3em]">
        Data pipeline initializing...
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/etfs/_components/ETFsClient.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';
import React, { useState } from 'react';

const MOCK_ETFS = [
  { ticker: 'IBIT', issuer: 'iShares', asset: 'BTC', aum: 15200000000, flow_24h: 124000000 },
  { ticker: 'FBTC', issuer: 'Fidelity', asset: 'BTC', aum: 10800000000, flow_24h: 89000000 },
  { ticker: 'ETHA', issuer: 'Grayscale', asset: 'ETH', aum: 8400000000, flow_24h: 45000000 },
  { ticker: 'ETHH', issuer: 'iShares', asset: 'ETH', aum: 6200000000, flow_24h: 32000000 },
];

export default function ETFsClient({ etfData }: { etfData: any }) {
  const [asset, setAsset] = useState('all');

  const filtered = asset === 'all' ? MOCK_ETFS : MOCK_ETFS.filter((e) => e.asset === asset);

  const totalAUM = filtered.reduce((sum, e) => sum + e.aum, 0);
  const totalFlow = filtered.reduce((sum, e) => sum + e.flow_24h, 0);

  return (
    <div className="space-y-8">
      <div className="flex gap-3 flex-wrap">
        {['all', 'BTC', 'ETH'].map((a) => (
          <button
            key={a}
            onClick={() => setAsset(a)}
            className={`px-4 py-2 text-[10px] font-black uppercase tracking-widest border transition-all ${
              asset === a
                ? 'bg-[#FABF2C] text-black border-[#FABF2C]'
                : 'bg-transparent text-[#555] border-[#1a1a1a]'
            }`}
          >
            {a === 'all' ? 'All ETFs' : a}
          </button>
        ))}
      </div>

      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div className="bg-[#0a0a0a] border border-[#1a1a1a] p-6">
          <div className="text-2xl font-black text-[#FABF2C]">${(totalAUM / 1e9).toFixed(1)}B</div>
          <div className="text-[9px] font-black text-[#555] uppercase tracking-widest mt-2">Total AUM</div>
        </div>
        <div className="bg-[#0a0a0a] border border-[#1a1a1a] p-6">
          <div className="text-2xl font-black text-[#FABF2C]">${(totalFlow / 1e6).toFixed(0)}M</div>
          <div className="text-[9px] font-black text-[#555] uppercase tracking-widest mt-2">24h Net Flows</div>
        </div>
      </div>

      <div className="border border-[#1a1a1a] overflow-hidden">
        <table className="w-full text-xs">
          <thead className="border-b border-[#1a1a1a] bg-[#0a0a0a]">
            <tr>
              <th className="px-4 py-3 text-left font-black text-[#555] uppercase">Ticker</th>
              <th className="px-4 py-3 text-left font-black text-[#555] uppercase">Issuer</th>
              <th className="px-4 py-3 text-right font-black text-[#555] uppercase">AUM</th>
              <th className="px-4 py-3 text-right font-black text-[#555] uppercase">24h Flow</th>
            </tr>
          </thead>
          <tbody>
            {filtered.map((etf) => (
              <tr key={etf.ticker} className="border-b border-[#0a0a0a] hover:bg-[#0a0a0a]">
                <td className="px-4 py-4 text-white font-bold">{etf.ticker}</td>
                <td className="px-4 py-4 text-[#aaa]">{etf.issuer}</td>
                <td className="px-4 py-4 text-right text-[#FABF2C]">${(etf.aum / 1e9).toFixed(1)}B</td>
                <td className="px-4 py-4 text-right text-[#FABF2C]">${(etf.flow_24h / 1e6).toFixed(0)}M</td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/etfs/error.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';
export default function ETFsError({ error, reset }: { error: Error; reset: () => void }) {
  return (
    <main className="min-h-screen bg-[#050505] py-10 px-4 lg:px-8">
      <div className="max-w-[1400px] mx-auto">
        <div className="py-20 text-center border border-dashed border-red-500/20">
          <p className="text-red-500 font-mono text-xs uppercase tracking-widest mb-4">Error Loading ETF Data</p>
          <button
            onClick={reset}
            className="bg-[#FABF2C] text-black font-black text-xs px-6 py-2 uppercase tracking-widest hover:bg-white transition-all"
          >
            Retry
          </button>
        </div>
      </div>
    </main>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/etfs/ethereum/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';
import { MetricCard } from '../../_components/MetricCard';

export const metadata = { title: 'etfs / ethereum | CryptoBrainNews' };

export default function Page() {
  return (
    <div className="space-y-8">
      <div>
        <h1 className="text-3xl font-black text-white font-heading uppercase tracking-tighter">
          etfs / ethereum <span className="text-primary">Data</span>
        </h1>
        <p className="text-[#444] font-mono text-[10px] uppercase tracking-[0.3em] mt-1">
          Coming Soon â€¢ Powered by Dune Analytics
        </p>
      </div>
      <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
        <MetricCard label="Status" value="Building" />
        <MetricCard label="Source" value="Dune" />
      </div>
      <div className="p-20 border-2 border-dashed border-[#1a1a1a] text-center text-[#333] font-mono text-xs uppercase tracking-[0.3em]">
        Data pipeline initializing...
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/etfs/loading.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
export default function ETFsLoading() {
  return (
    <main className="min-h-screen bg-[#050505] py-10 px-4 lg:px-8">
      <div className="max-w-[1400px] mx-auto">
        <div className="h-10 w-40 bg-[#1a1a1a] rounded mb-10 animate-pulse" />
        <div className="h-48 bg-[#0a0a0a] border border-[#1a1a1a] rounded animate-pulse" />
      </div>
    </main>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/etfs/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'text';
import ETFsClient from './_components/ETFsClient';

export const metadata = {
  title: 'ETF Data | CryptoBrainNews',
  description: 'Bitcoin and Ethereum spot ETF flows and holdings data.',
};

export const dynamic = 'force-dynamic';

async function getETFData() {
  try {
    // Use public API â€” real data would come from SoSoValue or CoinShares
    const res = await fetch(
      'https://api.glassnode.com/v1/metrics/assets/price_latest?assets=BTC,ETH',
      { next: { revalidate: 600 } }
    );
    if (!res.ok) throw new Error('Failed');
    return await res.json();
  } catch {
    return null;
  }
}

export default async function ETFsPage() {
  const etfData = await getETFData();

  return (
    <main className="min-h-screen bg-[#050505] py-10 px-4 lg:px-8">
      <div className="max-w-[1400px] mx-auto">
        <h1 className="text-4xl font-black text-white uppercase tracking-tighter mb-2">Spot ETFs</h1>
        <p className="text-[#555] font-mono text-[10px] uppercase tracking-[0.3em] mb-10">
          BTC & ETH Spot ETF Flows & Holdings
        </p>
        <ETFsClient etfData={etfData} />
      </div>
    </main>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/exchanges/_components/ExchangesClient.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';
import React, { useState } from 'react';

const MOCK_DEXES = [
  { name: 'Uniswap', volume_24h: 2100000000, volume_7d: 14200000000, chain: 'Multi' },
  { name: 'Curve', volume_24h: 1850000000, volume_7d: 12400000000, chain: 'Multi' },
  { name: 'Raydium', volume_24h: 890000000, volume_7d: 5200000000, chain: 'Solana' },
  { name: '0x Protocol', volume_24h: 624000000, volume_7d: 3800000000, chain: 'Multi' },
];

export default function ExchangesClient() {
  const [timeframe, setTimeframe] = useState('24h');

  const totalVolume = MOCK_DEXES.reduce((sum, d) => sum + (timeframe === '24h' ? d.volume_24h : d.volume_7d), 0);

  return (
    <div className="space-y-8">
      <div className="flex gap-3 flex-wrap">
        {['24h', '7d'].map((tf) => (
          <button
            key={tf}
            onClick={() => setTimeframe(tf)}
            className={`px-4 py-2 text-[10px] font-black uppercase tracking-widest border transition-all ${
              timeframe === tf
                ? 'bg-[#FABF2C] text-black border-[#FABF2C]'
                : 'bg-transparent text-[#555] border-[#1a1a1a]'
            }`}
          >
            {tf}
          </button>
        ))}
      </div>

      <div className="bg-[#0a0a0a] border border-[#1a1a1a] p-6">
        <div className="text-2xl font-black text-[#FABF2C]">${(totalVolume / 1e9).toFixed(2)}B</div>
        <div className="text-[9px] font-black text-[#555] uppercase tracking-widest mt-2">Total {timeframe} Volume</div>
      </div>

      <div className="border border-[#1a1a1a] overflow-hidden">
        <table className="w-full text-xs">
          <thead className="border-b border-[#1a1a1a] bg-[#0a0a0a]">
            <tr>
              <th className="px-4 py-3 text-left font-black text-[#555] uppercase">Protocol</th>
              <th className="px-4 py-3 text-right font-black text-[#555] uppercase">{timeframe} Volume</th>
              <th className="px-4 py-3 text-right font-black text-[#555] uppercase">Chain</th>
            </tr>
          </thead>
          <tbody>
            {MOCK_DEXES.map((dex) => (
              <tr key={dex.name} className="border-b border-[#0a0a0a] hover:bg-[#0a0a0a]">
                <td className="px-4 py-4 text-white font-bold">{dex.name}</td>
                <td className="px-4 py-4 text-right text-[#FABF2C]">
                  ${(timeframe === '24h' ? dex.volume_24h : dex.volume_7d) / 1e9).toFixed(2)}B
                </td>
                <td className="px-4 py-4 text-right text-[#aaa]">{dex.chain}</td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/exchanges/error.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';
export default function ExchangesError({ error, reset }: { error: Error; reset: () => void }) {
  return (
    <main className="min-h-screen bg-[#050505] py-10 px-4 lg:px-8">
      <div className="max-w-[1400px] mx-auto">
        <div className="py-20 text-center border border-dashed border-red-500/20">
          <p className="text-red-500 font-mono text-xs uppercase tracking-widest mb-4">Error Loading DEX Data</p>
          <button
            onClick={reset}
            className="bg-[#FABF2C] text-black font-black text-xs px-6 py-2 uppercase tracking-widest hover:bg-white transition-all"
          >
            Retry
          </button>
        </div>
      </div>
    </main>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/exchanges/loading.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
export default function ExchangesLoading() {
  return (
    <main className="min-h-screen bg-[#050505] py-10 px-4 lg:px-8">
      <div className="max-w-[1400px] mx-auto">
        <div className="h-10 w-48 bg-[#1a1a1a] rounded mb-10 animate-pulse" />
        <div className="h-48 bg-[#0a0a0a] border border-[#1a1a1a] rounded animate-pulse" />
      </div>
    </main>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/exchanges/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';
import React, { useState, useMemo } from 'react';

interface Props {
  volumes: any[];
}

export default function ExchangesClient({ volumes }: Props) {
  const [selectedDex, setSelectedDex] = useState<string | null>(null);

  const dexes = useMemo(() => {
    const unique = new Set<string>();
    volumes.forEach((v) => {
      if (v.dex) unique.add(v.dex);
    });
    return Array.from(unique).sort();
  }, [volumes]);

  const filtered = useMemo(() => {
    if (!selectedDex) return volumes.slice(0, 100);
    return volumes.filter((v) => v.dex === selectedDex).slice(0, 100);
  }, [volumes, selectedDex]);

  const totalVolume = filtered.reduce((sum, v) => sum + (v.volume_usd || 0), 0);
  const averageVolume = filtered.length > 0 ? totalVolume / filtered.length : 0;

  return (
    <div className="space-y-8">
      {/* Filter Buttons */}
      <div className="flex gap-2 flex-wrap">
        <button
          onClick={() => setSelectedDex(null)}
          className={`px-4 py-2 text-[10px] font-black uppercase tracking-widest border transition-all ${
            selectedDex === null
              ? 'bg-[#FABF2C] text-black border-[#FABF2C]'
              : 'bg-transparent text-[#555] border-[#1a1a1a] hover:text-white'
          }`}
        >
          All DEXs ({dexes.length})
        </button>
        {dexes.slice(0, 10).map((dex) => (
          <button
            key={dex}
            onClick={() => setSelectedDex(dex)}
            className={`px-4 py-2 text-[10px] font-black uppercase tracking-widest border transition-all ${
              selectedDex === dex
                ? 'bg-[#FABF2C] text-black border-[#FABF2C]'
                : 'bg-transparent text-[#555] border-[#1a1a1a] hover:text-white'
            }`}
          >
            {dex}
          </button>
        ))}
      </div>

      {/* Summary Stats */}
      <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div className="bg-[#0a0a0a] border border-[#1a1a1a] p-6">
          <p className="text-[9px] font-mono text-[#555] uppercase mb-2">Total Volume</p>
          <p className="text-2xl font-black text-[#FABF2C]">
            ${(totalVolume / 1e9).toFixed(2)}B
          </p>
        </div>
        <div className="bg-[#0a0a0a] border border-[#1a1a1a] p-6">
          <p className="text-[9px] font-mono text-[#555] uppercase mb-2">Avg Volume</p>
          <p className="text-2xl font-black text-[#FABF2C]">
            ${(averageVolume / 1e6).toFixed(1)}M
          </p>
        </div>
        <div className="bg-[#0a0a0a] border border-[#1a1a1a] p-6">
          <p className="text-[9px] font-mono text-[#555] uppercase mb-2">Trades Count</p>
          <p className="text-2xl font-black text-[#FABF2C]">
            {filtered.reduce((sum, v) => sum + (v.trade_count || 0), 0).toLocaleString()}
          </p>
        </div>
      </div>

      {/* Data Table */}
      <div className="border border-[#1a1a1a] overflow-hidden">
        <table className="w-full text-xs">
          <thead className="bg-[#0a0a0a] border-b border-[#1a1a1a]">
            <tr>
              <th className="px-4 py-3 text-left font-black text-[#555] uppercase tracking-wider">Date</th>
              <th className="px-4 py-3 text-left font-black text-[#555] uppercase tracking-wider">DEX</th>
              <th className="px-4 py-3 text-left font-black text-[#555] uppercase tracking-wider">Blockchain</th>
              <th className="px-4 py-3 text-right font-black text-[#555] uppercase tracking-wider">Volume</th>
              <th className="px-4 py-3 text-right font-black text-[#555] uppercase tracking-wider">Trades</th>
              <th className="px-4 py-3 text-right font-black text-[#555] uppercase tracking-wider">Traders</th>
            </tr>
          </thead>
          <tbody>
            {filtered.map((vol, i) => (
              <tr
                key={i}
                className={`border-b border-[#0a0a0a] hover:bg-[#0a0a0a] transition-colors ${
                  i % 2 === 0 ? 'bg-[#080808]' : 'bg-[#0b0b0b]'
                }`}
              >
                <td className="px-4 py-3 text-[#aaa] font-mono">
                  {typeof vol.day === 'string' ? vol.day.slice(0, 10) : 'â€”'}
                </td>
                <td className="px-4 py-3 text-white font-black uppercase">{vol.dex || 'â€”'}</td>
                <td className="px-4 py-3 text-[#888] font-mono">{vol.blockchain || 'â€”'}</td>
                <td className="px-4 py-3 text-right text-[#FABF2C] font-black">
                  ${(vol.volume_usd / 1e6).toFixed(1)}M
                </td>
                <td className="px-4 py-3 text-right text-[#888] font-mono">
                  {vol.trade_count?.toLocaleString() || 'â€”'}
                </td>
                <td className="px-4 py-3 text-right text-[#888] font-mono">
                  {vol.unique_traders?.toLocaleString() || 'â€”'}
                </td>
              </tr>
            ))}
          </tbody>
        </table>

        {filtered.length === 0 && (
          <div className="py-12 text-center">
            <p className="text-[#555] text-xs font-mono uppercase">No DEX volume data</p>
          </div>
        )}
      </div>

      {/* Footer */}
      <div className="text-[9px] text-[#555] font-mono uppercase">
        <p>ğŸ“Š Data includes top decentralized exchanges across major blockchains</p>
        <p>ğŸ”„ Refreshed every hour â€¢ Last update: Today</p>
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/governance/_components/GovernanceClient.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';
import React from 'react';

const MOCK_DAOS = [
  { dao: 'Aave', proposal_count: 487, active_votes: 12, avg_turnout: 28.5, gov_token: 'AAVE' },
  { dao: 'Uniswap', proposal_count: 78, active_votes: 5, avg_turnout: 21.3, gov_token: 'UNI' },
  { dao: 'Compound', proposal_count: 156, active_votes: 8, avg_turnout: 18.7, gov_token: 'COMP' },
  { dao: 'Curve', proposal_count: 203, active_votes: 15, avg_turnout: 35.2, gov_token: 'CRV' },
];

export default function GovernanceClient() {
  return (
    <div className="space-y-8">
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
        {[
          { label: 'Total DAOs', value: MOCK_DAOS.length },
          { label: 'Active Proposals', value: MOCK_DAOS.reduce((sum, d) => sum + d.active_votes, 0) },
          { label: 'Avg Turnout', value: (MOCK_DAOS.reduce((sum, d) => sum + d.avg_turnout, 0) / MOCK_DAOS.length).toFixed(1) + '%' },
        ].map((stat) => (
          <div key={stat.label} className="bg-[#0a0a0a] border border-[#1a1a1a] p-6">
            <div className="text-2xl font-black text-[#FABF2C]">{stat.value}</div>
            <div className="text-[9px] font-black text-[#555] uppercase tracking-widest mt-2">{stat.label}</div>
          </div>
        ))}
      </div>

      <div className="border border-[#1a1a1a] overflow-hidden">
        <table className="w-full text-xs">
          <thead className="border-b border-[#1a1a1a] bg-[#0a0a0a]">
            <tr>
              <th className="px-4 py-3 text-left font-black text-[#555] uppercase">DAO</th>
              <th className="px-4 py-3 text-right font-black text-[#555] uppercase">Proposals</th>
              <th className="px-4 py-3 text-right font-black text-[#555] uppercase">Active Votes</th>
              <th className="px-4 py-3 text-right font-black text-[#555] uppercase">Avg Turnout</th>
            </tr>
          </thead>
          <tbody>
            {MOCK_DAOS.map((dao) => (
              <tr key={dao.dao} className="border-b border-[#0a0a0a] hover:bg-[#0a0a0a]">
                <td className="px-4 py-4 text-white font-bold">{dao.dao}</td>
                <td className="px-4 py-4 text-right text-[#aaa]">{dao.proposal_count}</td>
                <td className="px-4 py-4 text-right text-[#FABF2C]">{dao.active_votes}</td>
                <td className="px-4 py-4 text-right text-[#888]">{dao.avg_turnout}%</td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/governance/error.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';
export default function GovernanceError({ error, reset }: { error: Error; reset: () => void }) {
  return (
    <main className="min-h-screen bg-[#050505] py-10 px-4 lg:px-8">
      <div className="max-w-[1400px] mx-auto">
        <div className="py-20 text-center border border-dashed border-red-500/20">
          <p className="text-red-500 font-mono text-xs uppercase tracking-widest mb-4">Error Loading Governance Data</p>
          <button
            onClick={reset}
            className="bg-[#FABF2C] text-black font-black text-xs px-6 py-2 uppercase tracking-widest hover:bg-white transition-all"
          >
            Retry
          </button>
        </div>
      </div>
    </main>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/governance/loading.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
export default function GovernanceLoading() {
  return (
    <main className="min-h-screen bg-[#050505] py-10 px-4 lg:px-8">
      <div className="max-w-[1400px] mx-auto">
        <div className="h-10 w-48 bg-[#1a1a1a] rounded mb-10 animate-pulse" />
        <div className="h-48 bg-[#0a0a0a] border border-[#1a1a1a] rounded animate-pulse" />
      </div>
    </main>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/governance/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';

interface Props {
  data: any[];
}

export default function GovernanceClient({ data }: Props) {
  return (
    <div className="border border-[#1a1a1a] bg-[#0a0a0a] p-8">
      <h3 className="text-xs font-black text-white uppercase tracking-[0.3em] mb-6">
        DAO Activity
      </h3>
      {data.length === 0 ? (
        <div className="py-12 text-center">
          <p className="text-[#555] text-xs font-mono uppercase">No governance data available</p>
        </div>
      ) : (
        <div className="space-y-4">
          {data.map((row: any, i: number) => (
            <div key={i} className="border-b border-[#111] pb-4 last:border-0">
              <div className="flex justify-between items-center mb-3">
                <span className="text-[#FABF2C] font-black uppercase tracking-wide">
                  {row.dao?.toUpperCase() || 'DAO'}
                </span>
                <span className="text-[#555] text-[9px] font-mono">
                  {typeof row.day === 'string' ? row.day.slice(0, 10) : 'Today'}
                </span>
              </div>
              <div className="grid grid-cols-2 gap-4 text-xs">
                <div className="bg-[#050505] p-3 border border-[#111]">
                  <p className="text-[#555] font-mono text-[9px] mb-1">Proposals</p>
                  <p className="font-black text-white">{row.proposal_count || 0}</p>
                </div>
                <div className="bg-[#050505] p-3 border border-[#111]">
                  <p className="text-[#555] font-mono text-[9px] mb-1">Votes</p>
                  <p className="font-black text-white">{row.vote_count || 0}</p>
                </div>
              </div>
            </div>
          ))}
        </div>
      )}

      {/* Footer Info */}
      <div className="mt-8 pt-6 border-t border-[#111]">
        <p className="text-[9px] text-[#555] font-mono uppercase">
          ğŸ’¡ Governance data is updated daily. Last refresh: Today
        </p>
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/l2/_components/L2Client.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';
import React from 'react';

const L2_DATA = [
  { name: 'Arbitrum', tvl: 4200000000, tx_24h: 45000000, avg_fee: 0.15, token: 'ARB' },
  { name: 'Optimism', tvl: 2100000000, tx_24h: 28000000, avg_fee: 0.18, token: 'OP' },
  { name: 'Base', tvl: 1800000000, tx_24h: 22000000, avg_fee: 0.08, token: 'None' },
  { name: 'ZkSync', tvl: 890000000, tx_24h: 8500000, avg_fee: 0.05, token: 'ZK' },
];

export default function L2Client() {
  const totalTVL = L2_DATA.reduce((sum, l2) => sum + l2.tvl, 0);

  return (
    <div className="space-y-8">
      <div className="bg-[#0a0a0a] border border-[#1a1a1a] p-6">
        <div className="text-2xl font-black text-[#FABF2C]">${(totalTVL / 1e9).toFixed(1)}B</div>
        <div className="text-[9px] font-black text-[#555] uppercase tracking-widest mt-2">Total L2 TVL</div>
      </div>

      <div className="border border-[#1a1a1a] overflow-hidden">
        <table className="w-full text-xs">
          <thead className="border-b border-[#1a1a1a] bg-[#0a0a0a]">
            <tr>
              <th className="px-4 py-3 text-left font-black text-[#555] uppercase">Network</th>
              <th className="px-4 py-3 text-right font-black text-[#555] uppercase">TVL</th>
              <th className="px-4 py-3 text-right font-black text-[#555] uppercase">24h Txs</th>
              <th className="px-4 py-3 text-right font-black text-[#555] uppercase">Avg Fee</th>
            </tr>
          </thead>
          <tbody>
            {L2_DATA.map((l2) => (
              <tr key={l2.name} className="border-b border-[#0a0a0a] hover:bg-[#0a0a0a]">
                <td className="px-4 py-4 text-white font-bold">{l2.name}</td>
                <td className="px-4 py-4 text-right text-[#FABF2C]">${(l2.tvl / 1e9).toFixed(2)}B</td>
                <td className="px-4 py-4 text-right text-[#aaa]">{(l2.tx_24h / 1e6).toFixed(1)}M</td>
                <td className="px-4 py-4 text-right text-[#888]">${l2.avg_fee.toFixed(2)}</td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/l2/error.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';
export default function L2Error({ error, reset }: { error: Error; reset: () => void }) {
  return (
    <main className="min-h-screen bg-[#050505] py-10 px-4 lg:px-8">
      <div className="max-w-[1400px] mx-auto">
        <div className="py-20 text-center border border-dashed border-red-500/20">
          <p className="text-red-500 font-mono text-xs uppercase tracking-widest mb-4">Error Loading L2 Data</p>
          <button
            onClick={reset}
            className="bg-[#FABF2C] text-black font-black text-xs px-6 py-2 uppercase tracking-widest hover:bg-white transition-all"
          >
            Retry
          </button>
        </div>
      </div>
    </main>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/l2/loading.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
export default function L2Loading() {
  return (
    <main className="min-h-screen bg-[#050505] py-10 px-4 lg:px-8">
      <div className="max-w-[1400px] mx-auto">
        <div className="h-10 w-40 bg-[#1a1a1a] rounded mb-10 animate-pulse" />
        <div className="h-48 bg-[#0a0a0a] border border-[#1a1a1a] rounded animate-pulse" />
      </div>
    </main>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/l2/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';

interface Props {
  addresses: any[];
  fees: any[];
}

export default function L2Client({ addresses, fees }: Props) {
  const chains = ['arbitrum', 'optimism', 'base', 'zksync'];

  return (
    <div className="space-y-8">
      {/* Summary Stats */}
      <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
        {chains.map((chain) => {
          const latestAddresses = addresses.find((a) => a.chain === chain);
          const latestFees = fees.find((f) => f.chain === chain);

          return (
            <div key={chain} className="border border-[#1a1a1a] bg-[#0a0a0a] p-4">
              <p className="text-[9px] text-[#555] uppercase font-black mb-2">
                {chain.toUpperCase()}
              </p>
              <div className="space-y-2">
                <div>
                  <p className="text-[8px] text-[#444] font-mono">Active Addr</p>
                  <p className="text-lg font-black text-[#FABF2C]">
                    {latestAddresses?.active_addresses?.toLocaleString() || 'â€”'}
                  </p>
                </div>
                <div>
                  <p className="text-[8px] text-[#444] font-mono">Gas (gwei)</p>
                  <p className="text-sm font-black text-[#00d672]">
                    {latestFees?.avg_gas_price_gwei?.toFixed(2) || 'â€”'}
                  </p>
                </div>
              </div>
            </div>
          );
        })}
      </div>

      {/* Active Addresses Chart */}
      <div className="border border-[#1a1a1a] bg-[#0a0a0a] p-6">
        <h3 className="text-xs font-black text-white uppercase tracking-[0.3em] mb-6">
          Active Addresses (90d)
        </h3>
        {addresses.length === 0 ? (
          <p className="text-[#555] text-xs">Loading data...</p>
        ) : (
          <div className="space-y-4">
            {addresses.slice(0, 20).map((row, i) => (
              <div key={i} className="flex items-center gap-3">
                <span className="text-[10px] font-mono text-[#555] w-16">
                  {typeof row.day === 'string' ? row.day.slice(0, 10) : 'â€”'}
                </span>
                <span className="text-[10px] font-black text-white w-20">
                  {row.chain?.toUpperCase()}
                </span>
                <div className="flex-1 bg-[#050505] h-6 relative">
                  <div
                    className="h-full bg-[#FABF2C] transition-all"
                    style={{
                      width: `${Math.min(
                        (row.active_addresses / 500000) * 100,
                        100
                      )}%`,
                    }}
                  />
                </div>
                <span className="text-[10px] font-black text-[#FABF2C] w-24 text-right">
                  {(row.active_addresses / 1000).toFixed(0)}K
                </span>
              </div>
            ))}
          </div>
        )}
      </div>

      {/* Gas Fees Comparison */}
      <div className="border border-[#1a1a1a] bg-[#0a0a0a] p-6">
        <h3 className="text-xs font-black text-white uppercase tracking-[0.3em] mb-6">
          Average Gas Price (Gwei)
        </h3>
        {fees.length === 0 ? (
          <p className="text-[#555] text-xs">Loading data...</p>
        ) : (
          <div className="space-y-3">
            {fees.slice(0, 15).map((row, i) => (
              <div key={i} className="flex justify-between items-center border-b border-[#111] pb-2">
                <div>
                  <p className="text-[10px] font-mono text-[#555]">
                    {typeof row.day === 'string' ? row.day.slice(0, 10) : 'â€”'}
                  </p>
                  <p className="text-[9px] font-black text-white">
                    {row.chain?.toUpperCase()}
                  </p>
                </div>
                <span className="text-[12px] font-black text-[#00d672]">
                  {row.avg_gas_price_gwei?.toFixed(2) || 'â€”'} Gwei
                </span>
              </div>
            ))}
          </div>
        )}
      </div>

      {/* Info Footer */}
      <div className="border border-[#1a1a1a] bg-[#0a0a0a] p-4">
        <p className="text-[9px] text-[#555] font-mono uppercase">
          ğŸ“Š L2 data covers Arbitrum, Optimism, Base, and ZkSync â€¢ Updated: Daily
        </p>
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/layout.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
export const dynamic = 'force-dynamic';
import React, { Suspense } from 'react';
import { DataSidebar } from './_components/DataSidebar';
import { DataBreadcrumb } from './_components/DataBreadcrumb';

export const metadata = {
  title: 'Data Terminal | CryptoBrainNews',
  description: 'Institutional-grade on-chain data, DeFi analytics, and market intelligence.',
};

export default function DataTerminalLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <div className="flex max-w-[2000px] mx-auto border-x border-[#1a1a1a] min-h-screen">
      <DataSidebar />
      <main className="flex-1 min-w-0 bg-[#050505] p-4 sm:p-6 lg:p-10">
        <DataBreadcrumb />
        <Suspense
          fallback={
            <div className="flex items-center justify-center h-64">
              <span className="text-primary font-mono text-xs animate-pulse uppercase tracking-[0.3em]">
                Loading terminal data...
              </span>
            </div>
          }
        >
          {children}
        </Suspense>
      </main>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/_lib/formatters.ts
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
export function formatNumber(value: number | string): string {
  const num = typeof value === 'string' ? parseFloat(value) : value;
  if (isNaN(num)) return 'â€”';
  if (num >= 1e9) return (num / 1e9).toFixed(2) + 'B';
  if (num >= 1e6) return (num / 1e6).toFixed(2) + 'M';
  if (num >= 1e3) return (num / 1e3).toFixed(2) + 'K';
  return num.toFixed(2);
}

export function formatPercent(value: number | string): string {
  const num = typeof value === 'string' ? parseFloat(value) : value;
  return (isNaN(num) ? 0 : num).toFixed(2) + '%';
}

export function formatDate(timestamp: number | string): string {
  const date = typeof timestamp === 'string' ? new Date(timestamp) : new Date(timestamp * 1000);
  return date.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' });
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/market/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';
import Link from 'next/link';
import { getLiveMarketPrices } from '@/lib/api';

export const metadata = {
  title: 'Markets Overview | CryptoBrainNews',
  description: 'Cryptocurrency market overview and data sections.',
};

export const dynamic = 'force-dynamic';

async function getMarketData() {
  try {
    return await getLiveMarketPrices();
  } catch {
    return [];
  }
}

const MARKET_SECTIONS = [
  { title: 'Spot', slug: 'spot', description: 'Real-time spot prices', icon: 'ğŸ’°' },
  { title: 'Futures', slug: 'futures', description: 'Perpetual & futures data', icon: 'ğŸ“ˆ' },
  { title: 'Indices', slug: 'indices', description: 'Crypto indices', icon: 'ğŸ“Š' },
  { title: 'Options', slug: 'options', description: 'Options market data', icon: 'âš™ï¸' },
  { title: 'Prices', slug: 'prices', description: 'Price tracking', icon: 'ğŸ’¹' },
  { title: 'Volumes', slug: 'volumes', description: 'Exchange volumes', icon: 'ğŸ“‰' },
];

export default async function MarketsPage() {
  const prices = await getMarketData();

  const topCoins = prices.slice(0, 4);
  const totalMarketCap = prices.reduce((sum, p) => sum + (p.market_cap || 0), 0);
  const totalVolume = prices.reduce((sum, p) => sum + (p.total_volume || 0), 0);

  return (
    <main className="min-h-screen bg-[#050505] py-10 px-4 lg:px-8">
      <div className="max-w-[1400px] mx-auto space-y-10">
        <div>
          <h1 className="text-4xl font-black text-white uppercase tracking-tighter mb-2">
            Market <span className="text-[#FABF2C]">Data</span>
          </h1>
          <p className="text-[#555] font-mono text-[10px] uppercase tracking-[0.3em]">
            Global Cryptocurrency Market Overview
          </p>
        </div>

        {/* Quick Stats */}
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
          <div className="border border-[#1a1a1a] bg-[#0a0a0a] p-6">
            <p className="text-[9px] text-[#555] uppercase font-mono mb-2">Global Market Cap</p>
            <p className="text-2xl font-black text-[#FABF2C]">
              ${(totalMarketCap / 1e12).toFixed(2)}T
            </p>
          </div>
          <div className="border border-[#1a1a1a] bg-[#0a0a0a] p-6">
            <p className="text-[9px] text-[#555] uppercase font-mono mb-2">24h Volume</p>
            <p className="text-2xl font-black text-[#FABF2C]">
              ${(totalVolume / 1e9).toFixed(1)}B
            </p>
          </div>
          <div className="border border-[#1a1a1a] bg-[#0a0a0a] p-6">
            <p className="text-[9px] text-[#555] uppercase font-mono mb-2">Assets Tracked</p>
            <p className="text-2xl font-black text-[#FABF2C]">{prices.length}</p>
          </div>
          <div className="border border-[#1a1a1a] bg-[#0a0a0a] p-6">
            <p className="text-[9px] text-[#555] uppercase font-mono mb-2">Status</p>
            <p className="text-2xl font-black text-green-500">Live</p>
          </div>
        </div>

        {/* Top 4 Coins */}
        {topCoins.length > 0 && (
          <div>
            <h2 className="text-xs font-black text-white uppercase tracking-[0.3em] mb-4">
              Top Assets
            </h2>
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
              {topCoins.map((coin) => (
                <div
                  key={coin.id}
                  className="p-6 border border-[#1a1a1a] bg-[#0a0a0a] hover:border-[#FABF2C]/50 transition-all"
                >
                  <div className="flex items-center gap-3 mb-3">
                    {coin.image && (
                      <img
                        src={coin.image}
                        alt={coin.name}
                        className="w-6 h-6 rounded-full"
                      />
                    )}
                    <div>
                      <p className="text-xs font-black text-white">{coin.symbol.toUpperCase()}</p>
                      <p className="text-[8px] text-[#555]">#{coin.market_cap_rank}</p>
                    </div>
                  </div>
                  <p className="text-lg font-black text-[#FABF2C] mb-2">
                    ${coin.current_price?.toLocaleString('en-US', { maximumFractionDigits: 2 }) || 'â€”'}
                  </p>
                  <p
                    className={`text-xs font-black ${
                      (coin.price_change_percentage_24h || 0) >= 0 ? 'text-green-500' : 'text-red-500'
                    }`}
                  >
                    {(coin.price_change_percentage_24h || 0) >= 0 ? '+' : ''}
                    {coin.price_change_percentage_24h?.toFixed(2) || '0.00'}%
                  </p>
                </div>
              ))}
            </div>
          </div>
        )}

        {/* Market Sections Grid */}
        <div>
          <h2 className="text-xs font-black text-white uppercase tracking-[0.3em] mb-6">
            Data Sections
          </h2>
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            {MARKET_SECTIONS.map((section) => (
              <Link
                key={section.slug}
                href={`/data/markets/${section.slug}`}
                className="border border-[#1a1a1a] hover:border-[#FABF2C] bg-[#0a0a0a] hover:bg-[#0a0a0a]/80 p-6 transition-all group"
              >
                <div className="text-2xl mb-3">{section.icon}</div>
                <h3 className="text-lg font-black text-white uppercase mb-2 group-hover:text-[#FABF2C] transition-colors">
                  {section.title}
                </h3>
                <p className="text-xs text-[#555]">{section.description}</p>
                <div className="mt-4 text-[#FABF2C] text-xs font-black uppercase opacity-0 group-hover:opacity-100 transition-opacity">
                  Explore â†’
                </div>
              </Link>
            ))}
          </div>
        </div>
      </div>
    </main>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/markets/_components/MarketsClient.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';
import React from 'react';
import { formatNumber } from '../../_lib/formatters';

export default function MarketsClient({ global }: { global: any }) {
  if (!global?.data) {
    return (
      <div className="py-20 text-center border border-dashed border-[#1a1a1a]">
        <p className="text-[#333] font-mono text-xs uppercase tracking-widest">No data available</p>
      </div>
    );
  }

  const {
    total_market_cap,
    total_volume,
    btc_dominance,
    eth_dominance,
    market_cap_change_percentage_24h_usd,
  } = global.data;

  const btcCap = total_market_cap?.btc || 0;
  const ethCap = total_market_cap?.eth || 0;
  const usdCap = total_market_cap?.usd || 0;
  const usdVolume = total_volume?.usd || 0;

  return (
    <div className="space-y-10">
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
        {[
          { label: 'Total Market Cap (USD)', value: `$${formatNumber(usdCap)}` },
          { label: '24h Volume (USD)', value: `$${formatNumber(usdVolume)}` },
          { label: 'BTC Dominance', value: `${btc_dominance?.toFixed(2) || 'â€”'}%` },
          { label: '24h Change', value: `${market_cap_change_percentage_24h_usd?.toFixed(2) || 'â€”'}%` },
        ].map((stat) => (
          <div
            key={stat.label}
            className="bg-[#0a0a0a] border border-[#1a1a1a] p-6 hover:border-[#FABF2C]/30 transition-all"
          >
            <div className="text-2xl font-black text-[#FABF2C] font-data tabular-nums">
              {stat.value}
            </div>
            <div className="text-[9px] font-black text-[#555] uppercase tracking-widest mt-2">
              {stat.label}
            </div>
          </div>
        ))}
      </div>

      <div className="border border-[#1a1a1a] p-8 bg-[#0a0a0a]">
        <h3 className="text-xs font-black text-white uppercase tracking-[0.3em] mb-6">
          Top Markets by Cap
        </h3>
        <div className="space-y-3">
          {[
            { name: 'Bitcoin', cap: btcCap, pct: btc_dominance },
            { name: 'Ethereum', cap: ethCap, pct: eth_dominance },
          ].map((market) => (
            <div key={market.name} className="flex justify-between items-center pb-3 border-b border-[#111]">
              <span className="text-xs font-bold text-white uppercase">{market.name}</span>
              <div className="text-right">
                <div className="text-xs font-black text-[#FABF2C]">${formatNumber(market.cap)}</div>
                <div className="text-[9px] text-[#555]">{market.pct?.toFixed(1) || 'â€”'}%</div>
              </div>
            </div>
          ))}
        </div>
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/markets/error.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';
export default function MarketsError({ error, reset }: { error: Error; reset: () => void }) {
  return (
    <main className="min-h-screen bg-[#050505] py-10 px-4 lg:px-8">
      <div className="max-w-[1400px] mx-auto">
        <div className="py-20 text-center border border-dashed border-red-500/20">
          <p className="text-red-500 font-mono text-xs uppercase tracking-widest mb-4">Error Loading Data</p>
          <button
            onClick={reset}
            className="bg-[#FABF2C] text-black font-black text-xs px-6 py-2 uppercase tracking-widest hover:bg-white transition-all"
          >
            Retry
          </button>
        </div>
      </div>
    </main>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/markets/futures/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';
import { MetricCard } from '../../_components/MetricCard';

export const metadata = { title: 'markets / futures | CryptoBrainNews' };

export default function Page() {
  return (
    <div className="space-y-8">
      <div>
        <h1 className="text-3xl font-black text-white font-heading uppercase tracking-tighter">
          markets / futures <span className="text-primary">Data</span>
        </h1>
        <p className="text-[#444] font-mono text-[10px] uppercase tracking-[0.3em] mt-1">
          Coming Soon â€¢ Powered by Dune Analytics
        </p>
      </div>
      <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
        <MetricCard label="Status" value="Building" />
        <MetricCard label="Source" value="Dune" />
      </div>
      <div className="p-20 border-2 border-dashed border-[#1a1a1a] text-center text-[#333] font-mono text-xs uppercase tracking-[0.3em]">
        Data pipeline initializing...
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/markets/indices/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';
import { MetricCard } from '../../_components/MetricCard';

export const metadata = { title: 'markets / indices | CryptoBrainNews' };

export default function Page() {
  return (
    <div className="space-y-8">
      <div>
        <h1 className="text-3xl font-black text-white font-heading uppercase tracking-tighter">
          markets / indices <span className="text-primary">Data</span>
        </h1>
        <p className="text-[#444] font-mono text-[10px] uppercase tracking-[0.3em] mt-1">
          Coming Soon â€¢ Powered by Dune Analytics
        </p>
      </div>
      <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
        <MetricCard label="Status" value="Building" />
        <MetricCard label="Source" value="Dune" />
      </div>
      <div className="p-20 border-2 border-dashed border-[#1a1a1a] text-center text-[#333] font-mono text-xs uppercase tracking-[0.3em]">
        Data pipeline initializing...
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/markets/loading.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
export default function MarketsLoading() {
  return (
    <main className="min-h-screen bg-[#050505] py-10 px-4 lg:px-8">
      <div className="max-w-[1400px] mx-auto">
        <div className="h-10 w-40 bg-[#1a1a1a] rounded mb-4 animate-pulse" />
        <div className="h-4 w-64 bg-[#0a0a0a] rounded mb-10 animate-pulse" />
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
          {[...Array(4)].map((_, i) => (
            <div key={i} className="h-32 bg-[#0a0a0a] border border-[#1a1a1a] rounded animate-pulse" />
          ))}
        </div>
      </div>
    </main>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/markets/options/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';
import { MetricCard } from '../../_components/MetricCard';

export const metadata = { title: 'markets / options | CryptoBrainNews' };

export default function Page() {
  return (
    <div className="space-y-8">
      <div>
        <h1 className="text-3xl font-black text-white font-heading uppercase tracking-tighter">
          markets / options <span className="text-primary">Data</span>
        </h1>
        <p className="text-[#444] font-mono text-[10px] uppercase tracking-[0.3em] mt-1">
          Coming Soon â€¢ Powered by Dune Analytics
        </p>
      </div>
      <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
        <MetricCard label="Status" value="Building" />
        <MetricCard label="Source" value="Dune" />
      </div>
      <div className="p-20 border-2 border-dashed border-[#1a1a1a] text-center text-[#333] font-mono text-xs uppercase tracking-[0.3em]">
        Data pipeline initializing...
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/markets/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';
import MarketsClient from './_components/MarketsClient';

export const metadata = {
  title: 'Markets Data | CryptoBrainNews',
  description: 'Global crypto market capitalization, trading volume, and price indexes.',
};

export const dynamic = 'force-dynamic';

async function getMarketData() {
  try {
    const res = await fetch('https://api.coingecko.com/api/v3/global', {
      next: { revalidate: 300 },
    });
    if (!res.ok) throw new Error('Failed to fetch');
    return await res.json();
  } catch {
    return null;
  }
}

export default async function MarketsPage() {
  const global = await getMarketData();

  return (
    <main className="min-h-screen bg-[#050505] py-10 px-4 lg:px-8">
      <div className="max-w-[1400px] mx-auto">
        <h1 className="text-4xl font-black text-white uppercase tracking-tighter mb-2">
          Markets
        </h1>
        <p className="text-[#555] font-mono text-[10px] uppercase tracking-[0.3em] mb-10">
          Global Market Capitalization & Trading Volume
        </p>

        <MarketsClient global={global} />
      </div>
    </main>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/markets/prices/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';
import { MetricCard } from '../../_components/MetricCard';

export const metadata = { title: 'markets / prices | CryptoBrainNews' };

export default function Page() {
  return (
    <div className="space-y-8">
      <div>
        <h1 className="text-3xl font-black text-white font-heading uppercase tracking-tighter">
          markets / prices <span className="text-primary">Data</span>
        </h1>
        <p className="text-[#444] font-mono text-[10px] uppercase tracking-[0.3em] mt-1">
          Coming Soon â€¢ Powered by Dune Analytics
        </p>
      </div>
      <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
        <MetricCard label="Status" value="Building" />
        <MetricCard label="Source" value="Dune" />
      </div>
      <div className="p-20 border-2 border-dashed border-[#1a1a1a] text-center text-[#333] font-mono text-xs uppercase tracking-[0.3em]">
        Data pipeline initializing...
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/markets/spot/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';
import { getLiveMarketPrices } from '@/lib/api';
import type { CoinMarketData } from '@/lib/types';

export const metadata = {
  title: 'Spot Markets | CryptoBrainNews',
  description: 'Real-time spot market prices and data.',
};

export const dynamic = 'force-dynamic';

async function getSpotData(): Promise<CoinMarketData[]> {
  try {
    return await getLiveMarketPrices();
  } catch (error) {
    console.error('Failed to fetch spot market data:', error);
    return [];
  }
}

// Format price with appropriate decimals
function fmtPrice(price: number): string {
  if (price >= 1000) return price.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
  if (price >= 1) return price.toFixed(2);
  if (price >= 0.01) return price.toFixed(4);
  return price.toFixed(6);
}

// Format large numbers
function fmtCompact(val: number): string {
  if (val >= 1e12) return `$${(val / 1e12).toFixed(2)}T`;
  if (val >= 1e9) return `$${(val / 1e9).toFixed(2)}B`;
  if (val >= 1e6) return `$${(val / 1e6).toFixed(1)}M`;
  if (val >= 1e3) return `$${(val / 1e3).toFixed(0)}K`;
  return `$${val.toFixed(0)}`;
}

// Color class for percentage change
function changeColor(val: number | null | undefined): string {
  if (!val) return 'text-[#555]';
  if (val > 0) return 'text-[#00d672]';
  if (val < 0) return 'text-[#ff4757]';
  return 'text-[#555]';
}

function fmtChange(val: number | null | undefined): string {
  if (!val) return '0.00%';
  const prefix = val > 0 ? '+' : '';
  return `${prefix}${val.toFixed(2)}%`;
}

export default async function SpotMarketPage() {
  const prices = await getSpotData();

  return (
    <main className="min-h-screen bg-[#050505] py-10 px-4 lg:px-8">
      <div className="max-w-[1400px] mx-auto space-y-8">
        <div>
          <h1 className="text-4xl font-black text-white uppercase tracking-tighter mb-2">
            Spot <span className="text-[#FABF2C]">Markets</span>
          </h1>
          <p className="text-[#555] font-mono text-[10px] uppercase tracking-[0.3em]">
            Real-Time Cryptocurrency Spot Prices
          </p>
        </div>

        {/* Metric Cards */}
        <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
          <div className="border border-[#1a1a1a] bg-[#0a0a0a] p-4">
            <p className="text-[9px] text-[#555] uppercase font-mono mb-2">Assets Tracked</p>
            <p className="text-2xl font-black text-[#FABF2C]">{prices.length}</p>
          </div>
          <div className="border border-[#1a1a1a] bg-[#0a0a0a] p-4">
            <p className="text-[9px] text-[#555] uppercase font-mono mb-2">Total Market Cap</p>
            <p className="text-2xl font-black text-[#FABF2C]">
              ${(prices.reduce((sum, p) => sum + (p.market_cap || 0), 0) / 1e12).toFixed(2)}T
            </p>
          </div>
          <div className="border border-[#1a1a1a] bg-[#0a0a0a] p-4">
            <p className="text-[9px] text-[#555] uppercase font-mono mb-2">24h Volume</p>
            <p className="text-2xl font-black text-[#FABF2C]">
              ${(prices.reduce((sum, p) => sum + (p.total_volume || 0), 0) / 1e9).toFixed(1)}B
            </p>
          </div>
          <div className="border border-[#1a1a1a] bg-[#0a0a0a] p-4">
            <p className="text-[9px] text-[#555] uppercase font-mono mb-2">Data Source</p>
            <p className="text-2xl font-black text-[#FABF2C]">CoinGecko</p>
          </div>
        </div>

        {/* Price Table */}
        <div className="border border-[#1a1a1a] bg-[#080808] overflow-hidden">
          <div className="overflow-x-auto">
            <table className="w-full border-collapse">
              <thead className="sticky top-0 z-10 bg-[#0a0a0a] border-b-2 border-[#1a1a1a]">
                <tr>
                  <th className="px-3 py-2 text-left">
                    <span className="text-[10px] font-black text-[#555] uppercase tracking-wider">#</span>
                  </th>
                  <th className="px-3 py-2 text-left">
                    <span className="text-[10px] font-black text-[#555] uppercase tracking-wider">Asset</span>
                  </th>
                  <th className="px-3 py-2 text-right">
                    <span className="text-[10px] font-black text-[#555] uppercase tracking-wider">Price</span>
                  </th>
                  <th className="px-3 py-2 text-right">
                    <span className="text-[10px] font-black text-[#555] uppercase tracking-wider">24h %</span>
                  </th>
                  <th className="px-3 py-2 text-right">
                    <span className="text-[10px] font-black text-[#555] uppercase tracking-wider">7d %</span>
                  </th>
                  <th className="px-3 py-2 text-right">
                    <span className="text-[10px] font-black text-[#555] uppercase tracking-wider">Mkt Cap</span>
                  </th>
                  <th className="px-3 py-2 text-right">
                    <span className="text-[10px] font-black text-[#555] uppercase tracking-wider">Vol 24h</span>
                  </th>
                </tr>
              </thead>
              <tbody>
                {prices.slice(0, 100).map((coin, idx) => (
                  <tr
                    key={coin.id}
                    className={`border-b border-[#111] hover:bg-[#0f0f0f] transition-colors ${
                      idx % 2 === 0 ? 'bg-[#080808]' : 'bg-[#0b0b0b]'
                    }`}
                  >
                    <td className="px-3 py-[10px] w-10">
                      <span className="text-[11px] font-mono text-[#444] tabular-nums">
                        {coin.market_cap_rank || 'â€”'}
                      </span>
                    </td>
                    <td className="px-3 py-[10px]">
                      <div className="flex items-center gap-2.5 min-w-[140px]">
                        {coin.image && (
                          <img
                            src={coin.image}
                            alt={coin.name}
                            className="w-5 h-5 rounded-full flex-shrink-0"
                            loading="lazy"
                            onError={(e) => {
                              e.currentTarget.style.display = 'none';
                            }}
                          />
                        )}
                        <div className="flex items-center gap-2">
                          <span className="text-[12px] font-bold text-white tracking-wide">
                            {coin.symbol.toUpperCase()}
                          </span>
                          <span className="text-[10px] text-[#444] font-mono hidden xl:inline truncate max-w-[100px]">
                            {coin.name}
                          </span>
                        </div>
                      </div>
                    </td>
                    <td className="px-3 py-[10px] text-right">
                      <span className="text-[12px] font-mono font-bold text-white tabular-nums">
                        ${fmtPrice(coin.current_price || 0)}
                      </span>
                    </td>
                    <td className="px-3 py-[10px] text-right">
                      <span className={`text-[11px] font-mono font-bold tabular-nums ${changeColor(coin.price_change_percentage_24h)}`}>
                        {fmtChange(coin.price_change_percentage_24h)}
                      </span>
                    </td>
                    <td className="px-3 py-[10px] text-right">
                      <span className={`text-[11px] font-mono font-bold tabular-nums ${changeColor(coin.price_change_percentage_7d)}`}>
                        {fmtChange(coin.price_change_percentage_7d)}
                      </span>
                    </td>
                    <td className="px-3 py-[10px] text-right">
                      <span className="text-[11px] font-mono text-[#888] tabular-nums">
                        {fmtCompact(coin.market_cap || 0)}
                      </span>
                    </td>
                    <td className="px-3 py-[10px] text-right">
                      <span className="text-[11px] font-mono text-[#666] tabular-nums">
                        {fmtCompact(coin.total_volume || 0)}
                      </span>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>

          {prices.length === 0 && (
            <div className="py-20 text-center">
              <p className="text-[#333] font-mono text-xs uppercase tracking-widest">
                No price data available
              </p>
            </div>
          )}
        </div>

        {/* Footer */}
        <div className="flex justify-between items-center text-[9px] font-mono text-[#333] uppercase tracking-widest px-1">
          <span>DATA: COINGECKO â€¢ REFRESH: 60S</span>
          <span>{prices.length} ASSETS</span>
        </div>
      </div>
    </main>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/markets/volumes/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';
import { MetricCard } from '../../_components/MetricCard';

export const metadata = { title: 'markets / volumes | CryptoBrainNews' };

export default function Page() {
  return (
    <div className="space-y-8">
      <div>
        <h1 className="text-3xl font-black text-white font-heading uppercase tracking-tighter">
          markets / volumes <span className="text-primary">Data</span>
        </h1>
        <p className="text-[#444] font-mono text-[10px] uppercase tracking-[0.3em] mt-1">
          Coming Soon â€¢ Powered by Dune Analytics
        </p>
      </div>
      <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
        <MetricCard label="Status" value="Building" />
        <MetricCard label="Source" value="Dune" />
      </div>
      <div className="p-20 border-2 border-dashed border-[#1a1a1a] text-center text-[#333] font-mono text-xs uppercase tracking-[0.3em]">
        Data pipeline initializing...
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/nfts/collections/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';
import { MetricCard } from '../../_components/MetricCard';

export const metadata = { title: 'nfts / collections | CryptoBrainNews' };

export default function Page() {
  return (
    <div className="space-y-8">
      <div>
        <h1 className="text-3xl font-black text-white font-heading uppercase tracking-tighter">
          nfts / collections <span className="text-primary">Data</span>
        </h1>
        <p className="text-[#444] font-mono text-[10px] uppercase tracking-[0.3em] mt-1">
          Coming Soon â€¢ Powered by Dune Analytics
        </p>
      </div>
      <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
        <MetricCard label="Status" value="Building" />
        <MetricCard label="Source" value="Dune" />
      </div>
      <div className="p-20 border-2 border-dashed border-[#1a1a1a] text-center text-[#333] font-mono text-xs uppercase tracking-[0.3em]">
        Data pipeline initializing...
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/nfts/_components/NFTsClient.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';
import React, { useState } from 'react';

const MOCK_NFTS = [
  { collection: 'Pudgy Penguins', volume_24h: 2400000, floor_price: 1850, sales_count: 156 },
  { collection: 'Doodles', volume_24h: 1680000, floor_price: 15.2, sales_count: 89 },
  { collection: 'Blur Blur Blur', volume_24h: 1240000, floor_price: 0.85, sales_count: 2340 },
  { collection: 'MomokaKu', volume_24h: 890000, floor_price: 22.5, sales_count: 45 },
];

export default function NFTsClient({ nftData }: { nftData: any }) {
  const [sortBy, setSortBy] = useState('volume');

  const sorted = [...MOCK_NFTS].sort((a, b) => {
    if (sortBy === 'volume') return b.volume_24h - a.volume_24h;
    if (sortBy === 'floor') return b.floor_price - a.floor_price;
    return b.sales_count - a.sales_count;
  });

  const totalVolume = MOCK_NFTS.reduce((sum, n) => sum + n.volume_24h, 0);

  return (
    <div className="space-y-8">
      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div className="bg-[#0a0a0a] border border-[#1a1a1a] p-6">
          <div className="text-2xl font-black text-[#FABF2C]">${(totalVolume / 1e6).toFixed(1)}M</div>
          <div className="text-[9px] font-black text-[#555] uppercase tracking-widest mt-2">24h Volume</div>
        </div>
        <div className="bg-[#0a0a0a] border border-[#1a1a1a] p-6">
          <div className="text-2xl font-black text-[#FABF2C]">{MOCK_NFTS.length}</div>
          <div className="text-[9px] font-black text-[#555] uppercase tracking-widest mt-2">Top Collections</div>
        </div>
      </div>

      <div className="flex gap-3 flex-wrap">
        {['volume', 'floor', 'sales'].map((s) => (
          <button
            key={s}
            onClick={() => setSortBy(s)}
            className={`px-4 py-2 text-[10px] font-black uppercase tracking-widest border transition-all ${
              sortBy === s
                ? 'bg-[#FABF2C] text-black border-[#FABF2C]'
                : 'bg-transparent text-[#555] border-[#1a1a1a]'
            }`}
          >
            Sort by {s}
          </button>
        ))}
      </div>

      <div className="border border-[#1a1a1a] overflow-hidden">
        <table className="w-full text-xs">
          <thead className="border-b border-[#1a1a1a] bg-[#0a0a0a]">
            <tr>
              <th className="px-4 py-3 text-left font-black text-[#555] uppercase">Collection</th>
              <th className="px-4 py-3 text-right font-black text-[#555] uppercase">24h Volume</th>
              <th className="px-4 py-3 text-right font-black text-[#555] uppercase">Floor Price</th>
              <th className="px-4 py-3 text-right font-black text-[#555] uppercase">Sales</th>
            </tr>
          </thead>
          <tbody>
            {sorted.map((nft) => (
              <tr key={nft.collection} className="border-b border-[#0a0a0a] hover:bg-[#0a0a0a]">
                <td className="px-4 py-4 text-white font-bold">{nft.collection}</td>
                <td className="px-4 py-4 text-right text-[#FABF2C]">${(nft.volume_24h / 1e6).toFixed(2)}M</td>
                <td className="px-4 py-4 text-right text-[#aaa]">{nft.floor_price} ETH</td>
                <td className="px-4 py-4 text-right text-[#888]">{nft.sales_count}</td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/nfts/error.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';
export default function NFTsError({ error, reset }: { error: Error; reset: () => void }) {
  return (
    <main className="min-h-screen bg-[#050505] py-10 px-4 lg:px-8">
      <div className="max-w-[1400px] mx-auto">
        <div className="py-20 text-center border border-dashed border-red-500/20">
          <p className="text-red-500 font-mono text-xs uppercase tracking-widest mb-4">Error Loading NFT Data</p>
          <button
            onClick={reset}
            className="bg-[#FABF2C] text-black font-black text-xs px-6 py-2 uppercase tracking-widest hover:bg-white transition-all"
          >
            Retry
          </button>
        </div>
      </div>
    </main>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/nfts/loading.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
export default function NFTsLoading() {
  return (
    <main className="min-h-screen bg-[#050505] py-10 px-4 lg:px-8">
      <div className="max-w-[1400px] mx-auto">
        <div className="h-10 w-40 bg-[#1a1a1a] rounded mb-10 animate-pulse" />
        <div className="h-48 bg-[#0a0a0a] border border-[#1a1a1a] rounded animate-pulse" />
      </div>
    </main>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/nfts/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';
import NFTsClient from './_components/NFTsClient';

export const metadata = {
  title: 'NFT Data | CryptoBrainNews',
  description: 'NFT collection volumes, floor prices, and market metrics.',
};

export const dynamic = 'force-dynamic';

async function getNFTData() {
  try {
    const res = await fetch('https://api.reservoir.tools/collections/v5?limit=50', {
      headers: { 'X-API-Key': process.env.RESERVOIR_API_KEY || '' },
      next: { revalidate: 600 },
    });
    if (!res.ok) throw new Error('Failed');
    return await res.json();
  } catch {
    return null;
  }
}

export default async function NFTsPage() {
  const nftData = await getNFTData();

  return (
    <main className="min-h-screen bg-[#050505] py-10 px-4 lg:px-8">
      <div className="max-w-[1400px] mx-auto">
        <h1 className="text-4xl font-black text-white uppercase tracking-tighter mb-2">NFTs</h1>
        <p className="text-[#555] font-mono text-[10px] uppercase tracking-[0.3em] mb-10">
          Top Collections & Market Metrics
        </p>
        <NFTsClient nftData={nftData} />
      </div>
    </main>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/nfts/volume/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';
import { MetricCard } from '../../_components/MetricCard';

export const metadata = { title: 'nfts / volume | CryptoBrainNews' };

export default function Page() {
  return (
    <div className="space-y-8">
      <div>
        <h1 className="text-3xl font-black text-white font-heading uppercase tracking-tighter">
          nfts / volume <span className="text-primary">Data</span>
        </h1>
        <p className="text-[#444] font-mono text-[10px] uppercase tracking-[0.3em] mt-1">
          Coming Soon â€¢ Powered by Dune Analytics
        </p>
      </div>
      <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
        <MetricCard label="Status" value="Building" />
        <MetricCard label="Source" value="Dune" />
      </div>
      <div className="p-20 border-2 border-dashed border-[#1a1a1a] text-center text-[#333] font-mono text-xs uppercase tracking-[0.3em]">
        Data pipeline initializing...
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/onchain/bitcoin/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';
import { MetricCard } from '../../_components/MetricCard';

export const metadata = { title: 'onchain / bitcoin | CryptoBrainNews' };

export default function Page() {
  return (
    <div className="space-y-8">
      <div>
        <h1 className="text-3xl font-black text-white font-heading uppercase tracking-tighter">
          onchain / bitcoin <span className="text-primary">Data</span>
        </h1>
        <p className="text-[#444] font-mono text-[10px] uppercase tracking-[0.3em] mt-1">
          Coming Soon â€¢ Powered by Dune Analytics
        </p>
      </div>
      <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
        <MetricCard label="Status" value="Building" />
        <MetricCard label="Source" value="Dune" />
      </div>
      <div className="p-20 border-2 border-dashed border-[#1a1a1a] text-center text-[#333] font-mono text-xs uppercase tracking-[0.3em]">
        Data pipeline initializing...
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/onchain/_components/OnChainClient.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';
import React, { useState } from 'react';

export default function OnChainClient({ metrics }: { metrics: any }) {
  const [chain, setChain] = useState('bitcoin');

  const chains = ['bitcoin', 'ethereum', 'solana'];

  return (
    <div className="space-y-8">
      <div className="flex gap-3 flex-wrap">
        {chains.map((c) => (
          <button
            key={c}
            onClick={() => setChain(c)}
            className={`px-4 py-2 text-[10px] font-black uppercase tracking-widest border transition-all ${
              chain === c
                ? 'bg-[#FABF2C] text-black border-[#FABF2C]'
                : 'bg-transparent text-[#555] border-[#1a1a1a] hover:text-white hover:border-[#333]'
            }`}
          >
            {c}
          </button>
        ))}
      </div>

      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
        {[
          { label: 'Active Addresses', value: 'â€”' },
          { label: 'Transactions (24h)', value: 'â€”' },
          { label: 'Average Fee', value: 'â€”' },
          { label: 'Whale Transfers', value: 'â€”' },
        ].map((stat) => (
          <div key={stat.label} className="bg-[#0a0a0a] border border-[#1a1a1a] p-6">
            <div className="text-2xl font-black text-[#FABF2C]">{stat.value}</div>
            <div className="text-[9px] font-black text-[#555] uppercase tracking-widest mt-2">{stat.label}</div>
          </div>
        ))}
      </div>

      <div className="py-20 text-center border border-dashed border-[#1a1a1a]">
        <p className="text-[#333] font-mono text-xs uppercase tracking-widest">
          Dune data will populate here once queries are created
        </p>
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/onchain/error.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';
export default function OnChainError({ error, reset }: { error: Error; reset: () => void }) {
  return (
    <main className="min-h-screen bg-[#050505] py-10 px-4 lg:px-8">
      <div className="max-w-[1400px] mx-auto">
        <div className="py-20 text-center border border-dashed border-red-500/20">
          <p className="text-red-500 font-mono text-xs uppercase tracking-widest mb-4">Error Loading Data</p>
          <button
            onClick={reset}
            className="bg-[#FABF2C] text-black font-black text-xs px-6 py-2 uppercase tracking-widest hover:bg-white transition-all"
          >
            Retry
          </button>
        </div>
      </div>
    </main>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/onchain/ethereum/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';
import { getETHActiveAddresses, getETHDailyTransactions } from '@/lib/dune';

export const metadata = {
  title: 'Ethereum On-Chain | CryptoBrainNews',
  description: 'Ethereum active addresses and daily transactions.',
};

export const dynamic = 'force-dynamic';

async function getETHData() {
  const [addresses, transactions] = await Promise.all([
    getETHActiveAddresses(90),
    getETHDailyTransactions(90),
  ]);

  return { addresses, transactions };
}

export default async function EthereumPage() {
  const { addresses, transactions } = await getETHData();

  return (
    <main className="min-h-screen bg-[#050505] py-10 px-4 lg:px-8">
      <div className="max-w-[1400px] mx-auto space-y-10">
        <div>
          <h1 className="text-4xl font-black text-white uppercase tracking-tighter mb-2">
            Ethereum On-Chain
          </h1>
          <p className="text-[#555] font-mono text-[10px] uppercase tracking-[0.3em]">
            Active Addresses & Daily Transactions
          </p>
        </div>

        <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
          {/* Active Addresses Card */}
          <div className="border border-[#1a1a1a] bg-[#0a0a0a] p-6">
            <h3 className="text-xs font-black text-white uppercase tracking-[0.3em] mb-6">
              Active Addresses (90d)
            </h3>
            {addresses.length === 0 ? (
              <p className="text-[#555] text-xs">No data available</p>
            ) : (
              <div className="space-y-3">
                {addresses.slice(0, 10).map((row: any, i) => (
                  <div key={i} className="flex justify-between items-center border-b border-[#111] pb-2">
                    <span className="text-[11px] font-mono text-[#555]">
                      {typeof row.day === 'string' ? row.day.slice(0, 10) : 'â€”'}
                    </span>
                    <span className="text-[11px] font-black text-[#FABF2C]">
                      {row.active_addresses?.toLocaleString() || 'â€”'}
                    </span>
                  </div>
                ))}
              </div>
            )}
          </div>

          {/* Daily Transactions Card */}
          <div className="border border-[#1a1a1a] bg-[#0a0a0a] p-6">
            <h3 className="text-xs font-black text-white uppercase tracking-[0.3em] mb-6">
              Daily Transactions (90d)
            </h3>
            {transactions.length === 0 ? (
              <p className="text-[#555] text-xs">No data available</p>
            ) : (
              <div className="space-y-3">
                {transactions.slice(0, 10).map((row: any, i) => (
                  <div key={i} className="flex justify-between items-center border-b border-[#111] pb-2">
                    <span className="text-[11px] font-mono text-[#555]">
                      {typeof row.day === 'string' ? row.day.slice(0, 10) : 'â€”'}
                    </span>
                    <span className="text-[11px] font-black text-[#FABF2C]">
                      {row.tx_count?.toLocaleString() || 'â€”'}
                    </span>
                  </div>
                ))}
              </div>
            )}
          </div>
        </div>

        {/* Data Summary */}
        <div className="border border-[#1a1a1a] bg-[#0a0a0a] p-6">
          <h3 className="text-xs font-black text-white uppercase tracking-[0.3em] mb-4">
            Summary Stats
          </h3>
          <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
            <div>
              <p className="text-[9px] text-[#555] uppercase font-mono mb-1">Avg Active Addresses</p>
              <p className="text-lg font-black text-[#FABF2C]">
                {addresses.length > 0
                  ? (
                      addresses.reduce((sum: number, a: any) => sum + (a.active_addresses || 0), 0) /
                      addresses.length
                    )
                      .toLocaleString('en-US', { maximumFractionDigits: 0 })
                  : 'â€”'}
              </p>
            </div>
            <div>
              <p className="text-[9px] text-[#555] uppercase font-mono mb-1">Total Txs (90d)</p>
              <p className="text-lg font-black text-[#FABF2C]">
                {transactions.length > 0
                  ? transactions
                      .reduce((sum: number, t: any) => sum + (t.tx_count || 0), 0)
                      .toLocaleString('en-US', { notation: 'compact' })
                  : 'â€”'}
              </p>
            </div>
            <div>
              <p className="text-[9px] text-[#555] uppercase font-mono mb-1">Chain</p>
              <p className="text-lg font-black text-[#FABF2C]">Ethereum</p>
            </div>
            <div>
              <p className="text-[9px] text-[#555] uppercase font-mono mb-1">Status</p>
              <p className="text-lg font-black text-green-500">Live</p>
            </div>
          </div>
        </div>
      </div>
    </main>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/onchain/flows/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';
import { MetricCard } from '../../_components/MetricCard';

export const metadata = { title: 'onchain / flows | CryptoBrainNews' };

export default function Page() {
  return (
    <div className="space-y-8">
      <div>
        <h1 className="text-3xl font-black text-white font-heading uppercase tracking-tighter">
          onchain / flows <span className="text-primary">Data</span>
        </h1>
        <p className="text-[#444] font-mono text-[10px] uppercase tracking-[0.3em] mt-1">
          Coming Soon â€¢ Powered by Dune Analytics
        </p>
      </div>
      <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
        <MetricCard label="Status" value="Building" />
        <MetricCard label="Source" value="Dune" />
      </div>
      <div className="p-20 border-2 border-dashed border-[#1a1a1a] text-center text-[#333] font-mono text-xs uppercase tracking-[0.3em]">
        Data pipeline initializing...
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/onchain/gas/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';
import { MetricCard } from '../../_components/MetricCard';

export const metadata = { title: 'onchain / gas | CryptoBrainNews' };

export default function Page() {
  return (
    <div className="space-y-8">
      <div>
        <h1 className="text-3xl font-black text-white font-heading uppercase tracking-tighter">
          onchain / gas <span className="text-primary">Data</span>
        </h1>
        <p className="text-[#444] font-mono text-[10px] uppercase tracking-[0.3em] mt-1">
          Coming Soon â€¢ Powered by Dune Analytics
        </p>
      </div>
      <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
        <MetricCard label="Status" value="Building" />
        <MetricCard label="Source" value="Dune" />
      </div>
      <div className="p-20 border-2 border-dashed border-[#1a1a1a] text-center text-[#333] font-mono text-xs uppercase tracking-[0.3em]">
        Data pipeline initializing...
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/onchain/loading.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
export default function OnChainLoading() {
  return (
    <main className="min-h-screen bg-[#050505] py-10 px-4 lg:px-8">
      <div className="max-w-[1400px] mx-auto">
        <div className="h-10 w-48 bg-[#1a1a1a] rounded mb-4 animate-pulse" />
        <div className="space-y-4">
          {[...Array(4)].map((_, i) => (
            <div key={i} className="h-20 bg-[#0a0a0a] border border-[#1a1a1a] rounded animate-pulse" />
          ))}
        </div>
      </div>
    </main>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/onchain/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';
import { cached } from '@/lib/cache';
import OnChainClient from './_components/OnChainClient';

export const metadata = {
  title: 'On-Chain Data | CryptoBrainNews',
  description: 'Active addresses, transactions, whale movements, and on-chain metrics.',
};

export const dynamic = 'force-dynamic';

async function getOnChainMetrics() {
  return cached(
    'onchain:metrics',
    async () => {
      try {
        // Fetch from blockchain.com API (free tier)
        const [btc, eth] = await Promise.all([
          fetch('https://blockchain.info/q/getblockcount').then((r) => r.text()),
          fetch('https://api.etherscan.io/api?module=stats&action=ethsupply&apikey=demo').then((r) =>
            r.json()
          ),
        ]);
        return { btcBlocks: btc, eth };
      } catch {
        return null;
      }
    },
    600
  );
}

export default async function OnChainPage() {
  const metrics = await getOnChainMetrics();

  return (
    <main className="min-h-screen bg-[#050505] py-10 px-4 lg:px-8">
      <div className="max-w-[1400px] mx-auto">
        <h1 className="text-4xl font-black text-white uppercase tracking-tighter mb-2">On-Chain Metrics</h1>
        <p className="text-[#555] font-mono text-[10px] uppercase tracking-[0.3em] mb-10">
          Active Addresses, Transactions & Whale Movements
        </p>
        <OnChainClient metrics={metrics} />
      </div>
    </main>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/onchain/solana/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';
import { MetricCard } from '../../_components/MetricCard';

export const metadata = { title: 'onchain / solana | CryptoBrainNews' };

export default function Page() {
  return (
    <div className="space-y-8">
      <div>
        <h1 className="text-3xl font-black text-white font-heading uppercase tracking-tighter">
          onchain / solana <span className="text-primary">Data</span>
        </h1>
        <p className="text-[#444] font-mono text-[10px] uppercase tracking-[0.3em] mt-1">
          Coming Soon â€¢ Powered by Dune Analytics
        </p>
      </div>
      <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
        <MetricCard label="Status" value="Building" />
        <MetricCard label="Source" value="Dune" />
      </div>
      <div className="p-20 border-2 border-dashed border-[#1a1a1a] text-center text-[#333] font-mono text-xs uppercase tracking-[0.3em]">
        Data pipeline initializing...
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';
import Link from 'next/link';

export const metadata = {
  title: 'Data Terminal | CryptoBrainNews',
  description: 'Real-time blockchain data, DeFi analytics, NFT metrics, and market intelligence.',
};

const DATA_PAGES = [
  {
    title: 'Markets',
    slug: 'markets',
    description: 'Global crypto market cap, volume, and price indexes',
    icon: 'ğŸ“Š',
  },
  {
    title: 'DeFi Protocols',
    slug: 'defi',
    description: 'Total value locked, yields, and protocol analysis',
    icon: 'ğŸ¦',
  },
  {
    title: 'On-Chain',
    slug: 'onchain',
    description: 'Active addresses, transactions, whale movements',
    icon: 'â›“ï¸',
  },
  {
    title: 'ETFs',
    slug: 'etfs',
    description: 'Bitcoin & Ethereum ETF flows and holdings',
    icon: 'ğŸ“ˆ',
  },
  {
    title: 'Stablecoins',
    slug: 'stablecoins',
    description: 'Stablecoin supply, flows, and distribution',
    icon: 'ğŸ’µ',
  },
  {
    title: 'NFTs',
    slug: 'nfts',
    description: 'Top collections, volumes, and market metrics',
    icon: 'ğŸ–¼ï¸',
  },
  {
    title: 'DEX Volumes',
    slug: 'exchanges',
    description: 'Decentralized exchange trading volumes by protocol',
    icon: 'ğŸ”„',
  },
  {
    title: 'Layer 2s',
    slug: 'l2',
    description: 'Arbitrum, Optimism, Base, and ZkSync comparison',
    icon: 'ğŸš€',
  },
  {
    title: 'Governance',
    slug: 'governance',
    description: 'DAO votes, proposals, and governance tokens',
    icon: 'ğŸ—³ï¸',
  },
];

export default function DataIndexPage() {
  return (
    <main className="min-h-screen bg-[#050505] py-10 px-4 lg:px-8">
      <div className="max-w-[1400px] mx-auto">
        <div className="mb-16">
          <h1 className="text-5xl lg:text-7xl font-black text-white uppercase tracking-tighter leading-[0.95]">
            Data <span className="text-[#FABF2C]">Terminal</span>
          </h1>
          <p className="text-gray-400 font-serif text-lg mt-4 max-w-2xl leading-relaxed">
            Real-time blockchain analytics, DeFi metrics, and institutional-grade market intelligence.
          </p>
        </div>

        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          {DATA_PAGES.map((page) => (
            <Link
              key={page.slug}
              href={`/data/${page.slug}`}
              className="group border border-[#1a1a1a] hover:border-[#FABF2C] bg-[#0a0a0a] hover:bg-[#0a0a0a] p-8 transition-all"
            >
              <div className="text-3xl mb-3">{page.icon}</div>
              <h3 className="text-lg font-black text-white uppercase tracking-tight mb-2 group-hover:text-[#FABF2C] transition-colors">
                {page.title}
              </h3>
              <p className="text-xs text-[#555] leading-relaxed">{page.description}</p>
              <div className="mt-6 flex items-center gap-2 text-[#FABF2C] text-xs font-black uppercase tracking-widest opacity-0 group-hover:opacity-100 transition-opacity">
                Explore â†’
              </div>
            </Link>
          ))}
        </div>
      </div>
    </main>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/scaling/l2-comparison/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';
import { MetricCard } from '../../_components/MetricCard';

export const metadata = { title: 'scaling / l2 comparison | CryptoBrainNews' };

export default function Page() {
  return (
    <div className="space-y-8">
      <div>
        <h1 className="text-3xl font-black text-white font-heading uppercase tracking-tighter">
          scaling / l2 comparison <span className="text-primary">Data</span>
        </h1>
        <p className="text-[#444] font-mono text-[10px] uppercase tracking-[0.3em] mt-1">
          Coming Soon â€¢ Powered by Dune Analytics
        </p>
      </div>
      <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
        <MetricCard label="Status" value="Building" />
        <MetricCard label="Source" value="Dune" />
      </div>
      <div className="p-20 border-2 border-dashed border-[#1a1a1a] text-center text-[#333] font-mono text-xs uppercase tracking-[0.3em]">
        Data pipeline initializing...
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/scaling/optimistic/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';
import { MetricCard } from '../../_components/MetricCard';

export const metadata = { title: 'scaling / optimistic | CryptoBrainNews' };

export default function Page() {
  return (
    <div className="space-y-8">
      <div>
        <h1 className="text-3xl font-black text-white font-heading uppercase tracking-tighter">
          scaling / optimistic <span className="text-primary">Data</span>
        </h1>
        <p className="text-[#444] font-mono text-[10px] uppercase tracking-[0.3em] mt-1">
          Coming Soon â€¢ Powered by Dune Analytics
        </p>
      </div>
      <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
        <MetricCard label="Status" value="Building" />
        <MetricCard label="Source" value="Dune" />
      </div>
      <div className="p-20 border-2 border-dashed border-[#1a1a1a] text-center text-[#333] font-mono text-xs uppercase tracking-[0.3em]">
        Data pipeline initializing...
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/scaling/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';
import { MetricCard } from '../_components/MetricCard';

export const metadata = { title: 'scaling | CryptoBrainNews' };

export default function Page() {
  return (
    <div className="space-y-8">
      <div>
        <h1 className="text-3xl font-black text-white font-heading uppercase tracking-tighter">
          scaling <span className="text-primary">Data</span>
        </h1>
        <p className="text-[#444] font-mono text-[10px] uppercase tracking-[0.3em] mt-1">
          Coming Soon â€¢ Powered by Dune Analytics
        </p>
      </div>
      <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
        <MetricCard label="Status" value="Building" />
        <MetricCard label="Source" value="Dune" />
      </div>
      <div className="p-20 border-2 border-dashed border-[#1a1a1a] text-center text-[#333] font-mono text-xs uppercase tracking-[0.3em]">
        Data pipeline initializing...
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/scaling/zk/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';
import { MetricCard } from '../../_components/MetricCard';

export const metadata = { title: 'scaling / zk | CryptoBrainNews' };

export default function Page() {
  return (
    <div className="space-y-8">
      <div>
        <h1 className="text-3xl font-black text-white font-heading uppercase tracking-tighter">
          scaling / zk <span className="text-primary">Data</span>
        </h1>
        <p className="text-[#444] font-mono text-[10px] uppercase tracking-[0.3em] mt-1">
          Coming Soon â€¢ Powered by Dune Analytics
        </p>
      </div>
      <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
        <MetricCard label="Status" value="Building" />
        <MetricCard label="Source" value="Dune" />
      </div>
      <div className="p-20 border-2 border-dashed border-[#1a1a1a] text-center text-[#333] font-mono text-xs uppercase tracking-[0.3em]">
        Data pipeline initializing...
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/stablecoins/chains/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';
import { MetricCard } from '../../_components/MetricCard';

export const metadata = { title: 'stablecoins / chains | CryptoBrainNews' };

export default function Page() {
  return (
    <div className="space-y-8">
      <div>
        <h1 className="text-3xl font-black text-white font-heading uppercase tracking-tighter">
          stablecoins / chains <span className="text-primary">Data</span>
        </h1>
        <p className="text-[#444] font-mono text-[10px] uppercase tracking-[0.3em] mt-1">
          Coming Soon â€¢ Powered by Dune Analytics
        </p>
      </div>
      <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
        <MetricCard label="Status" value="Building" />
        <MetricCard label="Source" value="Dune" />
      </div>
      <div className="p-20 border-2 border-dashed border-[#1a1a1a] text-center text-[#333] font-mono text-xs uppercase tracking-[0.3em]">
        Data pipeline initializing...
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/stablecoins/_components/StablecoinClient.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';
import React from 'react';

const MOCK_STABLECOINS = [
  { symbol: 'USDT', name: 'Tether', supply: 120500000000, change_24h: 0.5, chains: 9 },
  { symbol: 'USDC', name: 'Circle USD Coin', supply: 28400000000, change_24h: -0.2, chains: 8 },
  { symbol: 'DAI', name: 'MakerDAO DAI', supply: 5200000000, change_24h: 0.1, chains: 7 },
  { symbol: 'BUSD', name: 'Binance USD', supply: 4800000000, change_24h: -0.3, chains: 5 },
];

export default function StablecoinClient({ stablecoins }: { stablecoins: any }) {
  const totalSupply = MOCK_STABLECOINS.reduce((sum, s) => sum + s.supply, 0);

  return (
    <div className="space-y-8">
      <div className="bg-[#0a0a0a] border border-[#1a1a1a] p-6">
        <div className="text-2xl font-black text-[#FABF2C]">${(totalSupply / 1e9).toFixed(1)}B</div>
        <div className="text-[9px] font-black text-[#555] uppercase tracking-widest mt-2">Total Supply</div>
      </div>

      <div className="border border-[#1a1a1a] overflow-hidden">
        <table className="w-full text-xs">
          <thead className="border-b border-[#1a1a1a] bg-[#0a0a0a]">
            <tr>
              <th className="px-4 py-3 text-left font-black text-[#555] uppercase">Stablecoin</th>
              <th className="px-4 py-3 text-left font-black text-[#555] uppercase">Supply</th>
              <th className="px-4 py-3 text-right font-black text-[#555] uppercase">24h Change</th>
              <th className="px-4 py-3 text-right font-black text-[#555] uppercase">Chains</th>
            </tr>
          </thead>
          <tbody>
            {MOCK_STABLECOINS.map((s) => (
              <tr key={s.symbol} className="border-b border-[#0a0a0a] hover:bg-[#0a0a0a]">
                <td className="px-4 py-4 text-white font-bold">{s.symbol}</td>
                <td className="px-4 py-4 text-[#aaa]">${(s.supply / 1e9).toFixed(1)}B</td>
                <td
                  className={`px-4 py-4 text-right font-black ${s.change_24h > 0 ? 'text-green-500' : 'text-red-500'}`}
                >
                  {s.change_24h > 0 ? '+' : ''}{s.change_24h}%
                </td>
                <td className="px-4 py-4 text-right text-[#FABF2C]">{s.chains}</td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/stablecoins/error.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';
export default function StablecoinsError({ error, reset }: { error: Error; reset: () => void }) {
  return (
    <main className="min-h-screen bg-[#050505] py-10 px-4 lg:px-8">
      <div className="max-w-[1400px] mx-auto">
        <div className="py-20 text-center border border-dashed border-red-500/20">
          <p className="text-red-500 font-mono text-xs uppercase tracking-widest mb-4">Error Loading Stablecoin Data</p>
          <button
            onClick={reset}
            className="bg-[#FABF2C] text-black font-black text-xs px-6 py-2 uppercase tracking-widest hover:bg-white transition-all"
          >
            Retry
          </button>
        </div>
      </div>
    </main>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/stablecoins/loading.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
export default function StablecoinsLoading() {
  return (
    <main className="min-h-screen bg-[#050505] py-10 px-4 lg:px-8">
      <div className="max-w-[1400px] mx-auto">
        <div className="h-10 w-48 bg-[#1a1a1a] rounded mb-10 animate-pulse" />
        <div className="h-48 bg-[#0a0a0a] border border-[#1a1a1a] rounded animate-pulse" />
      </div>
    </main>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/stablecoins/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';
import StablecoinClient from './_components/StablecoinClient';

export const metadata = {
  title: 'Stablecoin Data | CryptoBrainNews',
  description: 'Stablecoin supply, flows, and distribution across blockchains.',
};

export const dynamic = 'force-dynamic';

async function getStablecoinData() {
  try {
    const res = await fetch('https://stablecoinindex.com/api/v2/stablecoins', {
      next: { revalidate: 600 },
    });
    if (!res.ok) throw new Error('Failed');
    return await res.json();
  } catch {
    return null;
  }
}

export default async function StablecoinsPage() {
  const stablecoins = await getStablecoinData();

  return (
    <main className="min-h-screen bg-[#050505] py-10 px-4 lg:px-8">
      <div className="max-w-[1400px] mx-auto">
        <h1 className="text-4xl font-black text-white uppercase tracking-tighter mb-2">Stablecoins</h1>
        <p className="text-[#555] font-mono text-[10px] uppercase tracking-[0.3em] mb-10">
          Supply, Flows & Distribution
        </p>
        <StablecoinClient stablecoins={stablecoins} />
      </div>
    </main>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/data/stablecoins/usd/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';
import { MetricCard } from '../../_components/MetricCard';

export const metadata = { title: 'stablecoins / usd | CryptoBrainNews' };

export default function Page() {
  return (
    <div className="space-y-8">
      <div>
        <h1 className="text-3xl font-black text-white font-heading uppercase tracking-tighter">
          stablecoins / usd <span className="text-primary">Data</span>
        </h1>
        <p className="text-[#444] font-mono text-[10px] uppercase tracking-[0.3em] mt-1">
          Coming Soon â€¢ Powered by Dune Analytics
        </p>
      </div>
      <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
        <MetricCard label="Status" value="Building" />
        <MetricCard label="Source" value="Dune" />
      </div>
      <div className="p-20 border-2 border-dashed border-[#1a1a1a] text-center text-[#333] font-mono text-xs uppercase tracking-[0.3em]">
        Data pipeline initializing...
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/error.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';

import * as Sentry from '@sentry/nextjs';
import { useEffect } from 'react';

export default function GlobalError({
  error,
  reset,
}: {
  error: Error & { digest?: string };
  reset: () => void;
}) {
  useEffect(() => {
    Sentry.captureException(error);
  }, [error]);

  return (
    <div className="min-h-[60vh] flex flex-col items-center justify-center p-8 text-center">
      <div className="text-red-500 font-mono text-xs tracking-[0.3em] mb-4 uppercase">
        Terminal Error
      </div>
      <h2 className="text-2xl font-black text-white uppercase mb-2">
        Something Went Wrong
      </h2>
      <p className="text-[#555] font-mono text-xs mb-8 max-w-md">
        The data pipeline encountered an unexpected error. Our team has been notified.
      </p>
      <button
        onClick={reset}
        className="bg-[#FABF2C] text-black font-black text-xs px-8 py-3 uppercase tracking-widest hover:bg-white transition-colors"
      >
        Retry
      </button>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/events/_components/EventsClient.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';
import React, { useState, useMemo } from 'react';
import Link from 'next/link';
import type { CryptoEvent } from '@/lib/types';

const EVENT_TYPES = ['all', 'conference', 'hackathon', 'meetup', 'summit', 'workshop', 'webinar', 'protocol_milestone'] as const;

export default function EventsClient({ events }: { events: CryptoEvent[] }) {
  const [filter, setFilter] = useState<string>('all');
  const [search, setSearch] = useState('');

  const filtered = useMemo(() => {
    let result = events;
    if (filter !== 'all') result = result.filter((e) => e.event_type === filter);
    if (search.trim()) {
      const q = search.toLowerCase();
      result = result.filter(
        (e) =>
          e.title.toLowerCase().includes(q) ||
          e.location_city?.toLowerCase().includes(q) ||
          e.location_country?.toLowerCase().includes(q)
      );
    }
    return result;
  }, [events, filter, search]);

  const featured = filtered.filter((e) => e.is_featured);
  const regular = filtered.filter((e) => !e.is_featured);

  return (
    <div className="space-y-8">
      {/* Filters */}
      <div className="flex flex-wrap items-center gap-3">
        {EVENT_TYPES.map((type) => (
          <button
            key={type}
            onClick={() => setFilter(type)}
            className={`px-4 py-2 text-[10px] font-black uppercase tracking-widest border transition-all ${
              filter === type
                ? 'bg-[#FABF2C] text-black border-[#FABF2C]'
                : 'bg-transparent text-[#555] border-[#1a1a1a] hover:text-white hover:border-[#333]'
            }`}
          >
            {type === 'all' ? 'All Events' : type.replace('_', ' ')}
          </button>
        ))}
        <input
          type="text"
          value={search}
          onChange={(e) => setSearch(e.target.value)}
          placeholder="SEARCH EVENTS..."
          className="ml-auto bg-[#0a0a0a] border border-[#1a1a1a] px-4 py-2 text-[10px] font-mono text-white w-64 outline-none focus:border-[#FABF2C]/50 placeholder:text-[#333] uppercase tracking-wider"
        />
      </div>

      {/* Featured Events */}
      {featured.length > 0 && (
        <div className="space-y-4">
          <h2 className="text-[10px] font-black text-[#FABF2C] uppercase tracking-[0.3em]">
            â˜… Featured Events
          </h2>
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            {featured.map((event) => (
              <EventCard key={event.id} event={event} featured />
            ))}
          </div>
        </div>
      )}

      {/* Regular Events */}
      {regular.length > 0 && (
        <div>
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            {regular.map((event) => (
              <EventCard key={event.id} event={event} />
            ))}
          </div>
        </div>
      )}

      {filtered.length === 0 && (
        <div className="py-20 text-center border border-dashed border-[#1a1a1a]">
          <p className="text-[#333] font-mono text-xs uppercase tracking-widest">
            No events found
          </p>
        </div>
      )}
    </div>
  );
}

function EventCard({
  event,
  featured = false,
}: {
  event: CryptoEvent;
  featured?: boolean;
}) {
  const startDate = new Date(event.start_date);
  const month = startDate.toLocaleDateString('en-US', { month: 'short' });
  const day = startDate.getDate();

  return (
    <a
      href={event.url || '#'}
      target="_blank"
      rel="noopener noreferrer"
      className={`group block border ${
        featured ? 'border-[#FABF2C]/30 bg-[#FABF2C]/[0.02]' : 'border-[#1a1a1a] bg-[#0a0a0a]'
      } hover:border-[#FABF2C]/50 transition-all p-5`}
    >
      <div className="flex gap-4">
        {/* Date Badge */}
        <div className="flex flex-col items-center justify-center w-14 h-14 bg-[#050505] border border-[#1a1a1a] shrink-0">
          <span className="text-[9px] font-black text-[#FABF2C] uppercase">{month}</span>
          <span className="text-xl font-black text-white leading-none">{day}</span>
        </div>

        <div className="flex-1 min-w-0">
          <div className="flex items-center gap-2 mb-1">
            {featured && (
              <span className="text-[8px] bg-[#FABF2C] text-black font-black px-1.5 py-0.5 uppercase">
                Featured
              </span>
            )}
            <span className="text-[8px] font-mono text-[#444] uppercase">
              {event.event_type.replace('_', ' ')}
            </span>
          </div>
          <h3 className="text-sm font-bold text-white group-hover:text-[#FABF2C] transition-colors leading-snug line-clamp-2 uppercase">
            {event.title}
          </h3>
          <p className="text-[10px] text-[#555] font-mono mt-2">
            {event.is_online
              ? 'ğŸŒ Online'
              : `ğŸ“ ${event.location_city || 'TBD'}${event.location_country ? `, ${event.location_country}` : ''}`}
          </p>
        </div>
      </div>
    </a>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/events/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';
import { getSupabase } from '@/lib/supabase';
import type { CryptoEvent } from '@/lib/types';
import EventsClient from './_components/EventsClient';

export const metadata = {
  title: 'Crypto Events Calendar | CryptoBrainNews',
  description: 'Global crypto conferences, hackathons, and protocol milestones.',
};

export const dynamic = 'force-dynamic';

async function getEvents(): Promise<CryptoEvent[]> {
  const supabase = getSupabase();
  const { data, error } = await supabase
    .from('events')
    .select('*')
    .gte('start_date', new Date().toISOString())
    .order('start_date', { ascending: true })
    .limit(100);

  if (error || !data) return [];
  return data as CryptoEvent[];
}

export default async function EventsPage() {
  const events = await getEvents();

  return (
    <main className="min-h-screen bg-[#050505] py-10 px-4 lg:px-8">
      <div className="max-w-[1400px] mx-auto">
        <div className="mb-10">
          <h1 className="text-4xl font-black text-white uppercase tracking-tighter font-heading">
            Crypto <span className="text-[#FABF2C]">Events</span>
          </h1>
          <p className="text-[#444] font-mono text-[10px] uppercase tracking-[0.3em] mt-2">
            Conferences â€¢ Hackathons â€¢ Protocol Milestones
          </p>
        </div>
        <EventsClient events={events} />
      </div>
    </main>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/feed.xml/route.ts
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import { getAllArticles } from '@/lib/articles';

export async function GET() {
  const articles = await getAllArticles();
  const siteUrl = process.env.NEXT_PUBLIC_SITE_URL || 'https://cryptobrainnews.com';

  const items = articles.slice(0, 20).map((article) => {
    const pubDate = new Date(article.published_on * 1000).toUTCString();
    const link = article.url.startsWith('http')
      ? article.url
      : `${siteUrl}/news/${article.id}`;

    return `
    <item>
      <title><![CDATA[${article.title}]]></title>
      <link>${link}</link>
      <guid isPermaLink="false">${article.id}</guid>
      <pubDate>${pubDate}</pubDate>
      <description><![CDATA[${article.body?.slice(0, 300) || article.title}]]></description>
      <category>${article.categories[0] || 'General'}</category>
      <source url="${siteUrl}/feed.xml">CryptoBrainNews</source>
    </item>`;
  });

  const rss = `<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>CryptoBrainNews</title>
    <link>${siteUrl}</link>
    <description>Institutional-grade crypto intelligence and DeFi analytics</description>
    <language>en</language>
    <lastBuildDate>${new Date().toUTCString()}</lastBuildDate>
    <atom:link href="${siteUrl}/feed.xml" rel="self" type="application/rss+xml"/>
    ${items.join('')}
  </channel>
</rss>`;

  return new Response(rss.trim(), {
    headers: {
      'Content-Type': 'application/xml; charset=utf-8',
      'Cache-Control': 'public, max-age=600, s-maxage=600',
    },
  });
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/go-alpha/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';
import Header from '@/components/common/Header';
import Icon from '@/components/ui/AppIcon';

export default function GoAlpha() {
  return (
    <div className="min-h-screen bg-black text-white">
      <Header />
      
      <main className="container mx-auto px-4 py-20">
        <div className="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center mb-24">
          <div>
            <div className="inline-block bg-primary text-black font-bold px-3 py-1 text-sm mb-6">THE DEFIANT ALPHA</div>
            <h1 className="text-6xl font-bold font-serif mb-6 leading-tight">
              Join <span className="text-primary underline decoration-4 underline-offset-8">Alpha.</span><br/>
              Learn Together.<br/>
              Earn Together.
            </h1>
            <p className="text-xl text-gray-400 mb-8 leading-relaxed">
              The premium subscription designed for crypto natives who want to up their game. Get institutional-grade reports, private discord access, and yield farming strategies.
            </p>
            <button className="bg-primary text-black text-lg font-bold px-8 py-4 rounded-none hover:bg-white transition-colors">
              Try Free for 21 Days
            </button>
          </div>
          <div className="bg-gray-900 border border-gray-800 p-8 h-96 flex items-center justify-center">
             <div className="text-center">
               <Icon name="LockClosedIcon" className="mx-auto text-primary mb-4" size={64} />
               <p className="text-gray-500 font-mono">PREMIUM CONTENT LOCKED</p>
             </div>
          </div>
        </div>

        {/* Pricing Cards */}
        <div className="max-w-5xl mx-auto mb-24">
          <h2 className="text-center text-3xl font-bold font-serif mb-12">Choose Your Edge</h2>
          <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
            {/* Monthly */}
            <div className="border border-gray-800 p-8 hover:border-gray-600 transition-colors">
              <h3 className="text-primary font-bold mb-2">Alpha Monthly</h3>
              <div className="text-4xl font-bold mb-6">$15 <span className="text-sm text-gray-500 font-normal">/mo</span></div>
              <ul className="space-y-4 mb-8 text-sm text-gray-300">
                <li className="flex gap-2"><Icon name="CheckIcon" className="text-primary" size={16}/> Daily Alpha Newsletter</li>
                <li className="flex gap-2"><Icon name="CheckIcon" className="text-primary" size={16}/> 200+ Premium Tutorials</li>
                <li className="flex gap-2"><Icon name="CheckIcon" className="text-primary" size={16}/> Private Telegram Group</li>
              </ul>
              <button className="w-full border border-white py-3 font-bold hover:bg-white hover:text-black transition-colors">CHOOSE PLAN</button>
            </div>

            {/* Yearly (Highlighted) */}
            <div className="border-2 border-primary bg-gray-900 p-8 transform scale-105 relative">
              <div className="absolute top-0 right-0 bg-primary text-black text-xs font-bold px-2 py-1">BEST VALUE</div>
              <h3 className="text-primary font-bold mb-2">Alpha Yearly</h3>
              <div className="text-4xl font-bold mb-6">$144 <span className="text-sm text-gray-500 font-normal">/yr</span></div>
              <ul className="space-y-4 mb-8 text-sm text-gray-300">
                <li className="flex gap-2"><Icon name="CheckIcon" className="text-primary" size={16}/> All Monthly Features</li>
                <li className="flex gap-2"><Icon name="CheckIcon" className="text-primary" size={16}/> Exclusive Analyst Calls</li>
                <li className="flex gap-2"><Icon name="CheckIcon" className="text-primary" size={16}/> Early Access to Reports</li>
                <li className="flex gap-2"><Icon name="CheckIcon" className="text-primary" size={16}/> Save 20% vs Monthly</li>
              </ul>
              <button className="w-full bg-primary text-black py-3 font-bold hover:bg-white transition-colors">SELECTED</button>
            </div>

            {/* Crypto Payment */}
            <div className="border border-gray-800 p-8 hover:border-gray-600 transition-colors">
              <h3 className="text-primary font-bold mb-2">Pay with Crypto</h3>
              <div className="text-4xl font-bold mb-6">$108 <span className="text-sm text-gray-500 font-normal">/yr</span></div>
              <ul className="space-y-4 mb-8 text-sm text-gray-300">
                <li className="flex gap-2"><Icon name="CheckIcon" className="text-primary" size={16}/> Pay with USDC/ETH</li>
                <li className="flex gap-2"><Icon name="CheckIcon" className="text-primary" size={16}/> No Recurring Fees</li>
                <li className="flex gap-2"><Icon name="CheckIcon" className="text-primary" size={16}/> Save 40% vs Monthly</li>
              </ul>
              <button className="w-full border border-white py-3 font-bold hover:bg-white hover:text-black transition-colors">CONNECT WALLET</button>
            </div>
          </div>
        </div>
      </main>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/layout.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React, { Suspense } from 'react';
import type { Metadata } from 'next';
import { Merriweather, Inter, JetBrains_Mono, Space_Mono } from 'next/font/google';
import Script from 'next/script';
import { Analytics } from '@vercel/analytics/react';
import { SpeedInsights } from '@vercel/speed-insights/next';
import '../styles/globals.css';
import Header from '@/components/common/Header';
import PriceTicker from '@/components/common/PriceTicker';
import Footer from '@/components/layout/Footer';
import CookieConsent from '@/components/common/CookieConsent';

const merriweather = Merriweather({
  subsets: ['latin'],
  weight: ['400', '700', '900'],
  variable: '--font-heading',
  display: 'swap',
});
const inter = Inter({
  subsets: ['latin'],
  weight: ['400', '500', '700'],
  variable: '--font-body',
  display: 'swap',
});
const jetbrains = JetBrains_Mono({
  subsets: ['latin'],
  variable: '--font-caption',
  display: 'swap',
});
const space = Space_Mono({
  subsets: ['latin'],
  weight: ['400', '700'],
  variable: '--font-data',
  display: 'swap',
});

export const metadata: Metadata = {
  title: {
    default: 'CryptoBrainNews | Institutional Terminal',
    template: '%s | CryptoBrainNews',
  },
  description: 'Institutional-grade crypto intelligence, DeFi analytics, and on-chain data.',
  metadataBase: new URL(process.env.NEXT_PUBLIC_SITE_URL || 'https://cryptobrainnews.com'),
  manifest: '/manifest.json',
  openGraph: {
    type: 'website',
    siteName: 'CryptoBrainNews',
    title: 'CryptoBrainNews | Institutional Terminal',
    description: 'Institutional-grade crypto intelligence.',
  },
  twitter: {
    card: 'summary_large_image',
    title: 'CryptoBrainNews',
    description: 'Institutional-grade crypto intelligence.',
  },
  alternates: {
    types: { 'application/rss+xml': '/feed.xml' },
  },
};

export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html
      lang="en"
      className={`${merriweather.variable} ${inter.variable} ${jetbrains.variable} ${space.variable}`}
    >
      <body className="bg-black text-white min-h-screen flex flex-col antialiased">
        <Header />
        <PriceTicker />
        <main className="flex-grow pt-[calc(4rem+2.5rem)]">
          <Suspense
            fallback={
              <div className="flex items-center justify-center h-[50vh]">
                <div className="text-[#FABF2C] font-mono text-xs animate-pulse uppercase tracking-[0.3em]">
                  SYNCING DATA...
                </div>
              </div>
            }
          >
            {children}
          </Suspense>
        </main>
        <Footer />
        <CookieConsent />

        {/* Vercel Analytics */}
        <Analytics />
        <SpeedInsights />

        {/* Microsoft Clarity */}
        {process.env.NEXT_PUBLIC_CLARITY_ID && (
          <Script
            id="microsoft-clarity"
            strategy="afterInteractive"
          >{`
            (function(c,l,a,r,i,t,y){
              c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
              t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
              y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
            })(window,document,"clarity","script","${process.env.NEXT_PUBLIC_CLARITY_ID}");
          `}</Script>
        )}
      </body>
    </html>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/learning/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';
import Image from 'next/image';

export const metadata = { title: 'Learning Hub | CryptoBrainNews' };

export default function LearningHub() {
  const courses = [
    {
      title: 'Bitcoin Fundamentals',
      level: 'Beginner',
      duration: '2h Â· 5 Mods',
      image: 'https://images.unsplash.com/photo-1518546305927-5a555bb7020d?auto=format&fit=crop&q=80&w=500',
      color: 'bg-orange-500',
    },
    {
      title: 'DeFi Yield Strategies',
      level: 'Intermediate',
      duration: '4h Â· 8 Mods',
      image: 'https://images.unsplash.com/photo-1639762681485-074b7f938ba0?auto=format&fit=crop&q=80&w=500',
      color: 'bg-blue-500',
    },
    {
      title: 'On-Chain Analysis',
      level: 'Advanced',
      duration: '6h Â· 12 Mods',
      image: 'https://images.unsplash.com/photo-1642104704074-907c0698cbd9?auto=format&fit=crop&q=80&w=500',
      color: 'bg-purple-500',
    },
  ];

  return (
    <main className="container mx-auto px-4 py-12">
      <div className="text-center mb-16">
        <h1 className="text-6xl font-bold font-heading mb-4">
          LEARNING <span className="text-primary">HUB.</span>
        </h1>
        <p className="text-gray-400 text-xl font-mono">
          MASTER THE ON-CHAIN ECONOMY
        </p>
      </div>

      <div className="mb-8">
        <h2 className="text-2xl font-bold font-heading mb-6 border-b border-gray-800 pb-4">
          START HERE: FOUNDATIONS
        </h2>
        <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
          {courses.map((course, i) => (
            <div key={i} className="group cursor-pointer">
              <div className="relative h-64 mb-4 overflow-hidden border border-gray-800 group-hover:border-primary transition-colors">
                <div
                  className={`absolute top-4 left-4 z-10 ${course.color} text-black text-xs font-bold px-2 py-1 uppercase`}
                >
                  {course.level}
                </div>
                <Image
                  src={course.image}
                  alt={course.title}
                  fill
                  className="object-cover transition-transform duration-700 group-hover:scale-110 opacity-80 group-hover:opacity-100"
                  unoptimized
                />
              </div>
              <h3 className="text-2xl font-bold font-heading mb-2 group-hover:text-primary transition-colors">
                {course.title}
              </h3>
              <p className="text-gray-500 text-sm font-mono">
                {course.duration}
              </p>
            </div>
          ))}
        </div>
      </div>
    </main>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/manifest.ts
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import type { MetadataRoute } from 'next';

export default function manifest(): MetadataRoute.Manifest {
  return {
    name: 'CryptoBrainNews',
    short_name: 'CBN',
    description: 'Institutional-grade crypto intelligence terminal',
    start_url: '/',
    display: 'standalone',
    background_color: '#050505',
    theme_color: '#FABF2C',
    icons: [
      { src: '/icon-192.png', sizes: '192x192', type: 'image/png' },
      { src: '/icon-512.png', sizes: '512x512', type: 'image/png' },
      {
        src: '/icon-512.png',
        sizes: '512x512',
        type: 'image/png',
        purpose: 'maskable',
      },
    ],
  };
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/news/[id]/_components/ArticleSidebar.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import { getAllArticles } from '@/lib/articles';
import Link from 'next/link';

export async function ArticleSidebar() {
  const all = await getAllArticles();
  // Filter for high-quality items for the sidebar
  const trending = all.slice(0, 6);

  return (
    <aside className="hidden xl:block w-[320px] shrink-0 space-y-10">
      <div className="bg-[#0a0a0a] border border-white/5 p-6">
        <h4 className="font-black text-[10px] uppercase tracking-[0.3em] text-primary mb-2">Alpha Alerts</h4>
        <p className="text-xs text-gray-500 mb-6 font-body leading-relaxed">Institutional-grade intelligence delivered to your inbox daily.</p>
        <form className="space-y-3">
          <input type="email" placeholder="Terminal ID (Email)" className="w-full bg-black border border-white/10 px-4 py-2 text-xs font-mono focus:border-primary outline-none" />
          <button className="w-full bg-primary text-black font-black text-[10px] uppercase py-2 tracking-widest hover:bg-white transition-colors">Subscribe</button>
        </form>
      </div>

      <div>
        <h4 className="font-black text-[10px] uppercase tracking-[0.3em] text-gray-400 mb-8 flex items-center gap-4">
          Trending
          <div className="h-px flex-1 bg-white/5" />
        </h4>
        <div className="space-y-8">
          {trending.map((story, idx) => (
            <Link key={story.id} href={story.url.startsWith('http') ? story.url : `/news/${story.id}`} className="group block">
              <div className="flex gap-4">
                <span className="font-mono text-xs text-gray-700">{String(idx + 1).padStart(2, '0')}</span>
                <h5 className="text-[13px] font-bold text-gray-300 group-hover:text-primary transition-colors leading-snug uppercase">
                  {story.title}
                </h5>
              </div>
            </Link>
          ))}
        </div>
      </div>
    </aside>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/news/[id]/_components/ReadingProgress.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';
import { useState, useEffect } from 'react';

export function ReadingProgress() {
  const [progress, setProgress] = useState(0);
  useEffect(() => {
    const onScroll = () => {
      const top = window.scrollY;
      const height = document.documentElement.scrollHeight - window.innerHeight;
      setProgress(height > 0 ? Math.min((top / height) * 100, 100) : 0);
    };
    window.addEventListener('scroll', onScroll, { passive: true });
    return () => window.removeEventListener('scroll', onScroll);
  }, []);
  return (
    <div className="fixed top-16 left-0 z-[1001] h-1 bg-transparent w-full">
      <div className="h-full bg-primary transition-[width] duration-100 ease-out" style={{ width: `${progress}%` }} />
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/news/[id]/_components/StickyShareBar.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';
import { useState, useEffect } from 'react';

export function StickyShareBar({ title, articleId }: { title: string; articleId: string }) {
  const [copied, setCopied] = useState(false);
  const [scrollPct, setScrollPct] = useState(0);
  const [url, setUrl] = useState(`https://cryptobrainnews.com/news/${articleId}`);

  useEffect(() => {
    setUrl(window.location.href);
  }, []);

  useEffect(() => {
    const onScroll = () => {
      const top = window.scrollY;
      const height = document.documentElement.scrollHeight - window.innerHeight;
      setScrollPct(height > 0 ? Math.min((top / height) * 100, 100) : 0);
    };
    window.addEventListener('scroll', onScroll, { passive: true });
    return () => window.removeEventListener('scroll', onScroll);
  }, []);

  const share = (href: string) => {
    window.open(href, '_blank', 'noopener,noreferrer,width=600,height=400');
  };

  return (
    <aside className="hidden lg:flex flex-col items-center gap-3 w-10 shrink-0 sticky top-28 self-start">
      <div className="w-0.5 h-20 bg-[#1a1a1a] overflow-hidden mb-2">
        <div
          className="w-full bg-[#FABF2C] transition-all duration-100"
          style={{ height: `${scrollPct}%` }}
        />
      </div>

      {[
        {
          icon: 'ğ•',
          getHref: () =>
            `https://x.com/intent/tweet?text=${encodeURIComponent(title)}&url=${encodeURIComponent(url)}`,
        },
        {
          icon: 'in',
          getHref: () =>
            `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(url)}`,
        },
        {
          icon: 'ğŸ“¨',
          getHref: () =>
            `https://t.me/share/url?url=${encodeURIComponent(url)}&text=${encodeURIComponent(title)}`,
        },
      ].map(({ icon, getHref }) => (
        <button
          key={icon}
          onClick={() => share(getHref())}
          className="p-2.5 bg-[#0a0a0a] border border-[#1a1a1a] text-[#888] hover:bg-[#FABF2C] hover:text-black transition-all"
        >
          <span className="text-xs font-bold">{icon}</span>
        </button>
      ))}

      <button
        onClick={async () => {
          await navigator.clipboard.writeText(url);
          setCopied(true);
          setTimeout(() => setCopied(false), 2000);
        }}
        className="p-2.5 bg-[#0a0a0a] border border-[#1a1a1a] text-[#888] hover:bg-[#FABF2C] hover:text-black transition-all"
      >
        <span className="text-xs font-bold">{copied ? 'âœ“' : 'ğŸ”—'}</span>
      </button>
    </aside>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/news/[id]/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';
import { notFound } from 'next/navigation';
import { getArticleById, getRelatedArticles, calculateReadingTime } from '@/lib/articles';
import { ReadingProgress } from './_components/ReadingProgress';
import { StickyShareBar } from './_components/StickyShareBar';
import { ArticleSidebar } from './_components/ArticleSidebar';
import AppImage from '@/components/ui/AppImage';
import Link from 'next/link';
import type { Metadata } from 'next';

export async function generateMetadata({
  params,
}: {
  params: Promise<{ id: string }>;
}): Promise<Metadata> {
  const { id } = await params;
  const article = await getArticleById(id);
  if (!article) return { title: 'Article Not Found' };

  const siteUrl = process.env.NEXT_PUBLIC_SITE_URL || 'https://cryptobrainnews.com';
  return {
    title: article.title,
    description: article.body?.slice(0, 160) || article.title,
    openGraph: {
      title: article.title,
      description: article.body?.slice(0, 160),
      type: 'article',
      publishedTime: new Date(article.published_on * 1000).toISOString(),
      images: article.image ? [{ url: article.image }] : [],
      url: `${siteUrl}/news/${id}`,
    },
    twitter: {
      card: 'summary_large_image',
      title: article.title,
      images: article.image ? [article.image] : [],
    },
  };
}

export default async function NewsArticlePage({
  params,
}: {
  params: Promise<{ id: string }>;
}) {
  const { id } = await params;
  const [article, related] = await Promise.all([
    getArticleById(id),
    getRelatedArticles(id, 4),
  ]);

  if (!article) notFound();

  const siteUrl = process.env.NEXT_PUBLIC_SITE_URL || 'https://cryptobrainnews.com';
  const readingTime = calculateReadingTime(article.body);

  const jsonLd = {
    '@context': 'https://schema.org',
    '@type': 'NewsArticle',
    headline: article.title,
    image: article.image || undefined,
    datePublished: new Date(article.published_on * 1000).toISOString(),
    dateModified: new Date(article.published_on * 1000).toISOString(),
    author: {
      '@type': 'Organization',
      name: article.source || 'CryptoBrainNews',
    },
    publisher: {
      '@type': 'Organization',
      name: 'CryptoBrainNews',
      logo: {
        '@type': 'ImageObject',
        url: `${siteUrl}/icon-512.png`,
      },
    },
    mainEntityOfPage: {
      '@type': 'WebPage',
      '@id': `${siteUrl}/news/${id}`,
    },
    description: article.body?.slice(0, 300),
  };

  return (
    <>
      <script
        type="application/ld+json"
        dangerouslySetInnerHTML={{ __html: JSON.stringify(jsonLd) }}
      />

      <ReadingProgress />
      <main className="container mx-auto px-4 lg:px-8 py-8 lg:py-12">
        <div className="flex gap-10">
          <StickyShareBar title={article.title} articleId={id} />

          <article className="flex-1 min-w-0 max-w-[800px]">
            <div className="flex items-center gap-3 mb-6">
              <span className="inline-block bg-[#FABF2C] text-black px-2 py-0.5 text-[10px] font-black uppercase tracking-widest">
                {article.categories[0]}
              </span>
              {'sourceType' in article && article.sourceType === 'ai_summary' && (
                <span className="inline-block border border-blue-500/30 text-blue-400 px-2 py-0.5 text-[8px] font-black uppercase tracking-widest">
                  âš¡ Alpha Intelligence
                </span>
              )}
              <span className="text-[9px] font-mono text-[#444]">
                {readingTime} min read
              </span>
            </div>

            <h1 className="text-3xl md:text-5xl font-black leading-tight mb-8 text-white uppercase tracking-tighter">
              {article.title}
            </h1>

            <div className="relative w-full aspect-video mb-10 border border-white/5">
              <AppImage
                src={article.image}
                alt={article.title}
                fill
                className="object-cover"
                priority
              />
            </div>

            <div className="prose prose-invert max-w-none">
              {article.body
                .split('\n')
                .filter(Boolean)
                .map((para, idx) => (
                  <p
                    key={idx}
                    className="mb-6 text-lg text-gray-300 leading-relaxed font-body"
                  >
                    {para}
                  </p>
                ))}
            </div>

            <section className="mt-20 border-t border-white/5 pt-16">
              <h3 className="text-xs font-black text-white uppercase tracking-[0.3em] mb-10">
                Related Intelligence
              </h3>
              <div className="grid grid-cols-1 md:grid-cols-2 gap-10">
                {related.map((rel) => (
                  <Link
                    key={rel.id}
                    href={
                      rel.url.startsWith('http')
                        ? rel.url
                        : `/news/${rel.id}`
                    }
                    className="group"
                  >
                    <div className="relative aspect-video mb-4 overflow-hidden border border-white/5">
                      <AppImage
                        src={rel.image}
                        alt={rel.title}
                        fill
                        className="object-cover group-hover:scale-105 transition-all"
                      />
                    </div>
                    <h4 className="font-bold text-white group-hover:text-[#FABF2C] transition-colors text-sm uppercase leading-snug">
                      {rel.title}
                    </h4>
                  </Link>
                ))}
              </div>
            </section>
          </article>

          <ArticleSidebar />
        </div>
      </main>
    </>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/not-found.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';

import React from 'react';
import { useRouter } from 'next/navigation';
import Icon from '@/components/ui/AppIcon';

export default function NotFound() {
    const router = useRouter();

    const handleGoHome = () => {
        router?.push('/homepage');
    };

    const handleGoBack = () => {
        if (typeof window !== 'undefined') {
            window.history?.back();
        }
    };

    return (
        <div className="min-h-screen flex flex-col items-center justify-center bg-background p-4">
            <div className="text-center max-w-md">
                <div className="flex justify-center mb-6">
                    <div className="relative">
                        <h1 className="text-9xl font-bold text-primary opacity-20">404</h1>
                    </div>
                </div>

                <h2 className="text-2xl font-medium text-foreground mb-2">Page Not Found</h2>
                <p className="text-muted-foreground mb-8">
                    The page you're looking for doesn't exist. Let's get you back!
                </p>

                <div className="flex flex-col sm:flex-row gap-4 justify-center">
                    <button
                        onClick={handleGoBack}
                        className="inline-flex items-center justify-center gap-2 bg-primary text-primary-foreground px-6 py-3 rounded-lg font-medium hover:bg-primary/90 transition-colors duration-200"
                    >
                        <Icon name="ArrowLeftIcon" size={16} />
                        Go Back
                    </button>

                    <button
                        onClick={handleGoHome}
                        className="inline-flex items-center justify-center gap-2 border border-border bg-background text-foreground px-6 py-3 rounded-lg font-medium hover:bg-accent hover:text-accent-foreground transition-colors duration-200"
                    >
                        <Icon name="HomeIcon" size={16} />
                        Back to Home
                    </button>
                </div>
            </div>
        </div>
    );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';
import { getAllArticles, getIntelligence } from '@/lib/articles';
import Link from 'next/link';
import AINewsFeed from '@/components/news/AINewsFeed';
import AppImage from '@/components/ui/AppImage';

export const metadata = {
  title: 'CryptoBrainNews | Institutional Terminal',
  description: 'Institutional-grade crypto intelligence, DeFi data, and on-chain analytics.',
};

export default async function HomePage() {
  const [all, alpha, analysis] = await Promise.all([
    getAllArticles(),
    getIntelligence('Alpha Call'),
    getIntelligence('Daily Analysis'),
  ]);

  const wire = all.filter((a) => a.source !== 'CryptoBrain').slice(0, 20);
  const hero = alpha[0] || all[0];

  return (
    <div className="min-h-screen bg-[#050505] text-white font-sans">
      <main className="container mx-auto px-4 lg:px-10 py-10">
        <div className="grid grid-cols-1 lg:grid-cols-12 gap-12">
          <div className="lg:col-span-8 space-y-16">
            <section className="space-y-8">
              <div className="flex items-center gap-4">
                <span className="bg-[#FABF2C] text-black px-2 py-0.5 text-[10px] font-black uppercase tracking-widest">
                  {hero?.categories[0] || 'LATEST'}
                </span>
                <span className="text-gray-600 font-mono text-[9px] uppercase tracking-[0.3em]">
                  Institutional Intelligence
                </span>
                <div className="h-px flex-1 bg-white/5" />
              </div>

              {hero && (
                <Link
                  href={hero.url.startsWith('http') ? hero.url : `/news/${hero.id}`}
                  className="group block space-y-8"
                >
                  <h1 className="text-5xl lg:text-7xl font-black uppercase tracking-tighter leading-[0.9] group-hover:text-[#FABF2C] transition-colors">
                    {hero.title}
                  </h1>
                  <div className="relative aspect-[21/9] border border-white/5 bg-[#0a0a0a] overflow-hidden">
                    <AppImage
                      src={hero.image}
                      fill
                      className="object-cover group-hover:scale-105 transition-all duration-1000"
                      priority
                    />
                    <div className="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-90" />
                  </div>
                  <p className="text-gray-400 text-xl leading-relaxed font-serif max-w-4xl line-clamp-3">
                    {hero.body}
                  </p>
                </Link>
              )}
            </section>

            <section className="pt-16 border-t border-white/5">
              <h2 className="text-[10px] font-black uppercase tracking-[0.4em] text-gray-500 mb-10">
                Proprietary Research
              </h2>
              <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
                {analysis.length > 0 ? (
                  analysis.slice(0, 3).map((a) => (
                    <Link key={a.id} href={`/news/${a.id}`} className="group">
                      <div className="relative aspect-video mb-4 overflow-hidden border border-white/5 bg-[#0a0a0a]">
                        <AppImage
                          src={a.image}
                          fill
                          className="object-cover grayscale group-hover:grayscale-0 transition-all duration-700"
                        />
                      </div>
                      <h3 className="text-sm font-bold uppercase leading-tight mb-2 group-hover:text-[#FABF2C] transition-colors">
                        {a.title}
                      </h3>
                      <span className="text-[9px] font-mono text-gray-600 uppercase">
                        {a.source} Research
                      </span>
                    </Link>
                  ))
                ) : (
                  <div className="col-span-3 py-10 border border-dashed border-white/5 text-center text-gray-700 text-xs uppercase font-mono">
                    Archive Synchronizing...
                  </div>
                )}
              </div>
            </section>
          </div>

          <aside className="lg:col-span-4 space-y-16">
            <div className="p-8 border border-white/5 bg-[#080808] relative overflow-hidden">
              <div className="absolute top-0 left-0 w-1 h-full bg-[#FABF2C]/20" />
              <h3 className="text-white font-black uppercase text-[10px] tracking-[0.3em] mb-10 flex items-center justify-between">
                Intelligence Wire
                <span className="flex gap-1">
                  <span className="w-1 h-1 bg-[#FABF2C] rounded-full animate-ping" />
                  <span className="w-1 h-1 bg-[#FABF2C] rounded-full" />
                </span>
              </h3>
              <AINewsFeed />
            </div>

            <div className="space-y-10 px-4">
              <h3 className="text-gray-600 font-black uppercase text-[10px] tracking-[0.3em] flex items-center gap-4">
                Market Pulse
                <div className="h-px flex-1 bg-white/5" />
              </h3>
              <div className="space-y-8">
                {wire.slice(0, 5).map((n, i) => (
                  <Link
                    key={n.id}
                    href={n.url}
                    target="_blank"
                    className="flex gap-4 group"
                  >
                    <span className="font-mono text-xs text-gray-800 font-black">
                      {String(i + 1).padStart(2, '0')}
                    </span>
                    <h4 className="text-xs font-bold uppercase leading-snug text-gray-300 group-hover:text-[#FABF2C] transition-colors line-clamp-2">
                      {n.title}
                    </h4>
                  </Link>
                ))}
              </div>
            </div>
          </aside>
        </div>

        <section className="mt-32 pt-20 border-t border-white/5">
          <h2 className="text-[10px] font-black text-gray-500 uppercase tracking-[0.4em] mb-12">
            Global Market Feed
          </h2>
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-x-8 gap-y-16">
            {wire.slice(5, 17).map((n) => (
              <Link
                key={n.id}
                href={n.url}
                target="_blank"
                className="group flex flex-col space-y-4"
              >
                <div className="relative aspect-[16/10] overflow-hidden border border-white/5 bg-[#0a0a0a]">
                  <AppImage
                    src={n.image}
                    fill
                    className="object-cover opacity-60 group-hover:opacity-100 group-hover:scale-105 transition-all duration-700"
                  />
                </div>
                <div className="space-y-2">
                  <div className="flex justify-between items-center text-[9px] font-mono uppercase tracking-widest">
                    <span className="text-[#FABF2C]/60">{n.source}</span>
                    <span className="text-gray-700">
                      {new Date(n.published_on * 1000).toLocaleDateString()}
                    </span>
                  </div>
                  <h4 className="text-[13px] font-bold text-gray-300 group-hover:text-white transition-colors uppercase leading-snug line-clamp-2">
                    {n.title}
                  </h4>
                </div>
              </Link>
            ))}
          </div>
        </section>
      </main>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/price-indexes/components/MiniSparkline.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';
import React, { useMemo } from 'react';

export default function MiniSparkline({ data, isPositive }: { data: number[], isPositive: boolean }) {
  const path = useMemo(() => {
    if (!data || data.length < 2) return '';
    const step = Math.max(1, Math.floor(data.length / 24));
    const sampled = data.filter((_, i) => i % step === 0);
    const min = Math.min(...sampled);
    const max = Math.max(...sampled);
    const range = max - min || 1;
    const width = 80;
    const height = 28;
    const points = sampled.map((val, i) => {
      const x = 2 + (i / (sampled.length - 1)) * 76;
      const y = 2 + (1 - (val - min) / range) * 24;
      return `${x.toFixed(1)},${y.toFixed(1)}`;
    });
    return `M${points.join(' L')}`;
  }, [data]);

  if (!path) return <div className="w-20 h-7" />;
  return (
    <svg viewBox="0 0 80 28" className="w-20 h-7 ml-auto" preserveAspectRatio="none">
      <path d={path} fill="none" stroke={isPositive ? '#00d672' : '#ff4757'} strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" />
    </svg>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/price-indexes/components/PriceIndexesTerminal.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';

import React, { useState, useMemo, useCallback } from 'react';
import type { CoinMarketData } from '@/lib/types';
import TerminalTableRow from './TerminalTableRow';
import TerminalHighlights from './TerminalHighlights';

interface Props {
  prices: CoinMarketData[];
}

type SortField = 'market_cap_rank' | 'current_price' | 'price_change_percentage_24h' | 'price_change_percentage_7d' | 'market_cap' | 'total_volume';
type SortDir = 'asc' | 'desc';

export default function PriceIndexesTerminal({ prices }: Props) {
  const [sortField, setSortField] = useState<SortField>('market_cap_rank');
  const [sortDir, setSortDir] = useState<SortDir>('asc');
  const [searchQuery, setSearchQuery] = useState('');

  const handleSort = useCallback((field: SortField) => {
    if (sortField === field) {
      setSortDir((d) => (d === 'asc' ? 'desc' : 'asc'));
    } else {
      setSortField(field);
      setSortDir(field === 'market_cap_rank' ? 'asc' : 'desc');
    }
  }, [sortField]);

  const filteredAndSorted = useMemo(() => {
    let result = [...prices];

    // Filter by search
    if (searchQuery.trim()) {
      const q = searchQuery.toLowerCase();
      result = result.filter(
        (c) =>
          c.name.toLowerCase().includes(q) ||
          c.symbol.toLowerCase().includes(q)
      );
    }

    // Sort
    result.sort((a, b) => {
      let aVal: number = 0;
      let bVal: number = 0;

      switch (sortField) {
        case 'market_cap_rank':
          aVal = a.market_cap_rank || 999;
          bVal = b.market_cap_rank || 999;
          break;
        case 'current_price':
          aVal = a.current_price || 0;
          bVal = b.current_price || 0;
          break;
        case 'price_change_percentage_24h':
          aVal = a.price_change_percentage_24h || 0;
          bVal = b.price_change_percentage_24h || 0;
          break;
        case 'price_change_percentage_7d':
          aVal = a.price_change_percentage_7d || 0;
          bVal = b.price_change_percentage_7d || 0;
          break;
        case 'market_cap':
          aVal = a.market_cap || 0;
          bVal = b.market_cap || 0;
          break;
        case 'total_volume':
          aVal = a.total_volume || 0;
          bVal = b.total_volume || 0;
          break;
      }

      const multiplier = sortDir === 'asc' ? 1 : -1;
      return (aVal - bVal) * multiplier;
    });

    return result;
  }, [prices, sortField, sortDir, searchQuery]);

  const SortHeader = ({
    field,
    label,
    align = 'right',
  }: {
    field: SortField;
    label: string;
    align?: 'left' | 'right';
  }) => {
    const isActive = sortField === field;
    return (
      <th
        className={`px-3 py-2 cursor-pointer select-none group whitespace-nowrap ${
          align === 'right' ? 'text-right' : 'text-left'
        }`}
        onClick={() => handleSort(field)}
      >
        <span
          className={`text-[10px] font-black uppercase tracking-wider transition-colors ${
            isActive
              ? 'text-[#FABF2C]'
              : 'text-[#555] group-hover:text-[#888]'
          }`}
        >
          {label}
          {isActive && (
            <span className="ml-1">{sortDir === 'asc' ? 'â–²' : 'â–¼'}</span>
          )}
        </span>
      </th>
    );
  };

  return (
    <div className="space-y-6">
      {/* Terminal Header */}
      <div className="flex items-end justify-between gap-4">
        <div>
          <div className="flex items-center gap-3 mb-1">
            <span className="w-2 h-2 bg-green-500 rounded-full animate-pulse" />
            <span className="text-[10px] font-mono text-green-500 uppercase tracking-[0.3em]">
              LIVE
            </span>
          </div>
          <h1 className="text-3xl font-black uppercase tracking-tight text-white">
            Price <span className="text-[#FABF2C]">Index</span>
          </h1>
          <p className="text-[10px] font-mono text-[#555] uppercase tracking-[0.2em] mt-1">
            TOP {prices.length} ASSETS BY MARKET CAP â€¢ USD
          </p>
        </div>

        {/* Search */}
        <div className="relative">
          <input
            type="text"
            value={searchQuery}
            onChange={(e) => setSearchQuery(e.target.value)}
            placeholder="SEARCH ASSET..."
            className="bg-[#0a0a0a] border border-[#1a1a1a] text-white font-mono text-[11px] 
                       px-4 py-2 w-64 outline-none focus:border-[#FABF2C]/50 placeholder:text-[#333]
                       uppercase tracking-wider"
          />
        </div>
      </div>

      {/* Highlight Cards */}
      <TerminalHighlights coins={prices} news={[]} />

      {/* â”€â”€â”€ THE TABLE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */}
      <div className="border border-[#1a1a1a] bg-[#080808] overflow-hidden">
        <div className="overflow-x-auto">
          <table className="w-full border-collapse">
            {/* STICKY HEADER */}
            <thead className="sticky top-0 z-10 bg-[#0a0a0a] border-b-2 border-[#1a1a1a]">
              <tr>
                <SortHeader field="market_cap_rank" label="#" align="left" />
                <th className="px-3 py-2 text-left">
                  <span className="text-[10px] font-black text-[#555] uppercase tracking-wider">
                    Asset
                  </span>
                </th>
                <SortHeader field="current_price" label="Price" />
                <SortHeader field="price_change_percentage_24h" label="24H %" />
                <SortHeader field="price_change_percentage_7d" label="7D %" />
                <SortHeader field="market_cap" label="Mkt Cap" />
                <SortHeader field="total_volume" label="Vol 24H" />
                <th className="px-3 py-2 text-right">
                  <span className="text-[10px] font-black text-[#555] uppercase tracking-wider">
                    7D Chart
                  </span>
                </th>
              </tr>
            </thead>

            <tbody>
              {filteredAndSorted.map((coin, index) => (
                <TerminalTableRow
                  key={coin.id}
                  coin={coin}
                  isEven={index % 2 === 0}
                />
              ))}
            </tbody>
          </table>
        </div>

        {filteredAndSorted.length === 0 && (
          <div className="py-20 text-center">
            <p className="text-[#333] font-mono text-xs uppercase tracking-widest">
              No assets match "{searchQuery}"
            </p>
          </div>
        )}
      </div>

      {/* Terminal footer */}
      <div className="flex justify-between items-center text-[9px] font-mono text-[#333] uppercase tracking-widest px-1">
        <span>DATA: COINGECKO API â€¢ REFRESH: 60S</span>
        <span>{filteredAndSorted.length} ASSETS</span>
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/price-indexes/components/TerminalHighlights.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';
import React, { useMemo } from 'react';
import type { PriceTableRow, NewsArticle } from '@/lib/types';

interface Props {
  coins: PriceTableRow[];
  news: NewsArticle[];
}

export default function TerminalHighlights({ coins, news }: Props) {
  const stats = useMemo(() => {
    const totalMarketCap = coins.reduce((sum, coin) => sum + (coin.market_cap || 0), 0);
    const totalVolume = coins.reduce((sum, coin) => sum + (coin.total_volume || 0), 0);
    const gainers = [...coins].sort((a, b) => (b.price_change_percentage_24h || 0) - (a.price_change_percentage_24h || 0)).slice(0, 3);
    const losers = [...coins].sort((a, b) => (a.price_change_percentage_24h || 0) - (b.price_change_percentage_24h || 0)).slice(0, 3);

    return { totalMarketCap, totalVolume, gainers, losers };
  }, [coins]);

  return (
    <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
      {/* Market Summary */}
      <div className="border border-[#1a1a1a] bg-[#0a0a0a] p-6">
        <div className="flex justify-between items-center mb-6">
          <h3 className="text-xs font-black text-white uppercase tracking-[0.3em]">
            Market Overview
          </h3>
          <span className="w-2 h-2 bg-[#FABF2C] rounded-full animate-pulse" />
        </div>
        <div className="space-y-4">
          <div>
            <div className="text-[9px] font-mono text-[#555] uppercase mb-1">
              Total Market Cap
            </div>
            <div className="text-2xl font-black text-[#FABF2C]">
              ${(stats.totalMarketCap / 1e12).toFixed(2)}T
            </div>
          </div>
          <div>
            <div className="text-[9px] font-mono text-[#555] uppercase mb-1">
              24h Volume
            </div>
            <div className="text-2xl font-black text-white">
              ${(stats.totalVolume / 1e9).toFixed(1)}B
            </div>
          </div>
        </div>
      </div>

      {/* Gainers & Losers */}
      <div className="border border-[#1a1a1a] bg-[#0a0a0a] p-6">
        <h3 className="text-xs font-black text-white uppercase tracking-[0.3em] mb-6">
          Market Movers
        </h3>
        <div className="space-y-6">
          <div>
            <div className="text-[9px] font-black text-green-500 uppercase mb-3">
              ğŸ”¥ Top Gainers (24h)
            </div>
            <div className="space-y-2">
              {stats.gainers.slice(0, 2).map((coin) => (
                <div key={coin.id} className="flex justify-between items-center">
                  <span className="text-xs text-white font-bold">
                    {coin.symbol}
                  </span>
                  <span className="text-xs font-black text-green-500">
                    +{coin.price_change_percentage_24h?.toFixed(1)}%
                  </span>
                </div>
              ))}
            </div>
          </div>

          <div>
            <div className="text-[9px] font-black text-red-500 uppercase mb-3">
              â„ï¸ Top Losers (24h)
            </div>
            <div className="space-y-2">
              {stats.losers.slice(0, 2).map((coin) => (
                <div key={coin.id} className="flex justify-between items-center">
                  <span className="text-xs text-white font-bold">
                    {coin.symbol}
                  </span>
                  <span className="text-xs font-black text-red-500">
                    {coin.price_change_percentage_24h?.toFixed(1)}%
                  </span>
                </div>
              ))}
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/price-indexes/components/TerminalTableRow.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';

import React from 'react';
import type { CoinMarketData } from '@/lib/types';
import MiniSparkline from './MiniSparkline';

interface Props {
  coin: CoinMarketData;
  isEven: boolean;
}

// Format price with appropriate decimals
function fmtPrice(price: number): string {
  if (price >= 1000) return price.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
  if (price >= 1) return price.toFixed(2);
  if (price >= 0.01) return price.toFixed(4);
  return price.toFixed(6);
}

// Format large numbers
function fmtCompact(val: number): string {
  if (val >= 1e12) return `$${(val / 1e12).toFixed(2)}T`;
  if (val >= 1e9) return `$${(val / 1e9).toFixed(2)}B`;
  if (val >= 1e6) return `$${(val / 1e6).toFixed(1)}M`;
  if (val >= 1e3) return `$${(val / 1e3).toFixed(0)}K`;
  return `$${val.toFixed(0)}`;
}

// Color class for percentage change
function changeColor(val: number | null | undefined): string {
  if (!val) return 'text-[#555]';
  if (val > 0) return 'text-[#00d672]';
  if (val < 0) return 'text-[#ff4757]';
  return 'text-[#555]';
}

function fmtChange(val: number | null | undefined): string {
  if (!val) return '0.00%';
  const prefix = val > 0 ? '+' : '';
  return `${prefix}${val.toFixed(2)}%`;
}

export default function TerminalTableRow({ coin, isEven }: Props) {
  const bg = isEven ? 'bg-[#080808]' : 'bg-[#0b0b0b]';

  return (
    <tr
      className={`${bg} border-b border-[#111] hover:bg-[#0f0f0f] transition-colors duration-75 group`}
    >
      {/* Rank */}
      <td className="px-3 py-[10px] w-10">
        <span className="text-[11px] font-mono text-[#444] tabular-nums">
          {coin.market_cap_rank || 'â€”'}
        </span>
      </td>

      {/* Asset */}
      <td className="px-3 py-[10px]">
        <div className="flex items-center gap-2.5 min-w-[140px]">
          {coin.image && (
            <img
              src={coin.image}
              alt={coin.name}
              className="w-5 h-5 rounded-full flex-shrink-0"
              loading="lazy"
              onError={(e) => {
                e.currentTarget.style.display = 'none';
              }}
            />
          )}
          <div className="flex items-center gap-2">
            <span className="text-[12px] font-bold text-white tracking-wide">
              {coin.symbol.toUpperCase()}
            </span>
            <span className="text-[10px] text-[#444] font-mono hidden xl:inline truncate max-w-[100px]">
              {coin.name}
            </span>
          </div>
        </div>
      </td>

      {/* Price */}
      <td className="px-3 py-[10px] text-right">
        <span className="text-[12px] font-mono font-bold text-white tabular-nums">
          ${fmtPrice(coin.current_price || 0)}
        </span>
      </td>

      {/* 24H % */}
      <td className="px-3 py-[10px] text-right">
        <span className={`text-[11px] font-mono font-bold tabular-nums ${changeColor(coin.price_change_percentage_24h)}`}>
          {fmtChange(coin.price_change_percentage_24h)}
        </span>
      </td>

      {/* 7D % */}
      <td className="px-3 py-[10px] text-right">
        <span className={`text-[11px] font-mono font-bold tabular-nums ${changeColor(coin.price_change_percentage_7d)}`}>
          {fmtChange(coin.price_change_percentage_7d)}
        </span>
      </td>

      {/* Market Cap */}
      <td className="px-3 py-[10px] text-right">
        <span className="text-[11px] font-mono text-[#888] tabular-nums">
          {fmtCompact(coin.market_cap || 0)}
        </span>
      </td>

      {/* Volume */}
      <td className="px-3 py-[10px] text-right">
        <span className="text-[11px] font-mono text-[#666] tabular-nums">
          {fmtCompact(coin.total_volume || 0)}
        </span>
      </td>

      {/* Sparkline */}
      <td className="px-3 py-[10px] w-[100px]">
        {coin.sparkline_in_7d?.price && (
          <MiniSparkline
            data={coin.sparkline_in_7d.price}
            isPositive={(coin.price_change_percentage_7d || 0) >= 0}
          />
        )}
      </td>
    </tr>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/price-indexes/error.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// src/app/price-indexes/error.tsx
'use client';

export default function PriceIndexesError({
  error,
  reset,
}: {
  error: Error & { digest?: string };
  reset: () => void;
}) {
  return (
    <main className="min-h-screen bg-[#050505] flex items-center justify-center">
      <div className="text-center">
        <div className="text-red-500 font-mono text-xs tracking-[0.3em] mb-4 uppercase">
          TERMINAL ERROR
        </div>
        <p className="text-white/50 font-mono text-sm mb-6 max-w-md">
          Data feed interrupted. This may be due to API rate limiting.
        </p>
        <button
          onClick={reset}
          className="bg-primary text-black font-black text-xs px-6 py-3 uppercase tracking-widest hover:bg-white transition-colors"
        >
          RECONNECT
        </button>
      </div>
    </main>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/price-indexes/loading.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// src/app/price-indexes/loading.tsx
export default function PriceIndexesLoading() {
  return (
    <main className="min-h-screen bg-[#050505]">
      <div className="max-w-[1800px] mx-auto px-4 lg:px-6 py-6">
        {/* Header skeleton */}
        <div className="mb-6">
          <div className="h-8 w-96 bg-white/5 animate-pulse mb-2" />
          <div className="h-4 w-64 bg-white/5 animate-pulse" />
        </div>

        {/* Highlight cards skeleton */}
        <div className="grid grid-cols-3 gap-4 mb-6">
          {[1, 2, 3].map((i) => (
            <div key={i} className="h-40 bg-white/5 animate-pulse border border-white/5" />
          ))}
        </div>

        {/* Table skeleton */}
        <div className="border border-[#1a1a1a]">
          <div className="h-10 bg-[#0a0a0a] border-b border-[#1a1a1a]" />
          {Array.from({ length: 15 }).map((_, i) => (
            <div
              key={i}
              className="h-12 border-b border-[#0d0d0d] animate-pulse"
              style={{ opacity: 1 - i * 0.05 }}
            />
          ))}
        </div>
      </div>
    </main>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/app/price-indexes/page.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';
import { Suspense } from 'react';
import type { Metadata } from 'next';
import { getLiveMarketPrices } from '@/lib/api';
import type { CoinMarketData } from '@/lib/types';
import PriceIndexesTerminal from './_components/PriceIndexesTerminal';

export const metadata: Metadata = {
  title: 'Price Indexes | CryptoBrainNews',
  description: 'Real-time cryptocurrency price data and market metrics.',
};

async function getPrices(): Promise<CoinMarketData[]> {
  try {
    return await getLiveMarketPrices();
  } catch (error) {
    console.error('Failed to fetch prices:', error);
    return [];
  }
}

export default async function PriceIndexesPage() {
  const prices = await getPrices();

  return (
    <main className="min-h-screen bg-[#050505]">
      <Suspense fallback={<div className="p-8 text-[#FABF2C]">Loading prices...</div>}>
        <div className="max-w-[1400px] mx-auto p-8">
          <PriceIndexesTerminal prices={prices} />
        </div>
      </Suspense>
    </main>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/components/auth/AlphaGate.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';

import React, { useEffect, useState } from 'react';
import { getSupabase } from '@/lib/supabase';
import Icon from '@/components/ui/AppIcon';

export default function AlphaGate({ children }: { children: React.ReactNode }) {
  const [session, setSession] = useState<any>(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    const supabase = getSupabase();
    
    supabase.auth.getSession().then(({ data: { session } }) => {
      setSession(session);
      setLoading(false);
    });

    const { data: { subscription } } = supabase.auth.onAuthStateChange((_event, session) => {
      setSession(session);
    });

    return () => subscription.unsubscribe();
  }, []);

  if (loading) return null;

  if (!session) {
    return (
      <div className="min-h-[60vh] flex flex-col items-center justify-center p-8 text-center border-2 border-dashed border-primary/20">
        <Icon name="LockClosedIcon" size={48} className="text-primary mb-4 opacity-20" />
        <h2 className="text-2xl font-black text-white uppercase mb-2">Alpha Access Required</h2>
        <p className="text-gray-500 font-mono text-xs uppercase mb-6 tracking-widest">
          Connect your wallet or sign in to view institutional data
        </p>
      </div>
    );
  }

  return <>{children}</>;
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/components/auth/AuthButton.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';

import React, { useState, useEffect } from 'react';
import { getSupabase } from '@/lib/supabase';
import Icon from '@/components/ui/AppIcon';
import type { User } from '@supabase/supabase-js';

export default function AuthButton() {
  const [loading, setLoading] = useState(false);
  const [email, setEmail] = useState('');
  const [token, setToken] = useState('');
  const [view, setView] = useState<'email' | 'verify'>('email');
  const [message, setMessage] = useState('');
  const [user, setUser] = useState<User | null>(null);

  useEffect(() => {
    const supabase = getSupabase();
    supabase.auth.getSession().then(({ data }) => {
      setUser(data.session?.user ?? null);
    });

    const { data: { subscription } } = supabase.auth.onAuthStateChange((_event, session) => {
      setUser(session?.user ?? null);
    });

    return () => subscription.unsubscribe();
  }, []);

  const handleSendCode = async (e: React.FormEvent) => {
    e.preventDefault();
    setLoading(true);
    setMessage('');
    
    const supabase = getSupabase();
    const { error } = await supabase.auth.signInWithOtp({
      email,
      options: { emailRedirectTo: window.location.origin + '/auth/callback' },
    });

    setLoading(false);
    if (error) {
      setMessage(error.message);
    } else {
      setView('verify');
      setMessage('CODE SENT');
    }
  };

  const handleVerifyCode = async (e: React.FormEvent) => {
    e.preventDefault();
    setLoading(true);
    setMessage('');
    
    const supabase = getSupabase();
    const { error } = await supabase.auth.verifyOtp({
      email,
      token: token.replace(/\D/g, ''),
      type: 'email',
    });

    setLoading(false);
    if (error) {
      setMessage(error.message);
    } else {
      setMessage('');
      setView('email');
      setEmail('');
      setToken('');
    }
  };

  const handleLogout = async () => {
    const supabase = getSupabase();
    await supabase.auth.signOut();
  };

  if (user) {
    return (
      <div className="flex items-center gap-4">
        <span className="text-[10px] font-black text-primary uppercase tracking-[0.2em] border border-primary/30 px-2 py-1">
          ALPHA
        </span>
        <button
          onClick={handleLogout}
          className="bg-white/10 text-white px-4 py-2 text-[10px] font-black hover:bg-white hover:text-black transition-all uppercase"
        >
          LOGOUT
        </button>
      </div>
    );
  }

  return (
    <div className="flex items-center gap-2">
      {view === 'email' ? (
        <form onSubmit={handleSendCode} className="flex gap-2">
          <input
            type="email"
            placeholder="ENTER EMAIL..."
            value={email}
            onChange={(e) => setEmail(e.target.value)}
            className="bg-black border border-[#222] px-4 py-2 text-[10px] text-white focus:border-primary outline-none w-48 font-black tracking-widest"
            required
          />
          <button
            type="submit"
            disabled={loading}
            className="bg-primary text-black px-6 py-2 text-[10px] font-black hover:bg-white transition-all uppercase disabled:opacity-50"
          >
            {loading ? '...' : 'LOGIN'}
          </button>
        </form>
      ) : (
        <form onSubmit={handleVerifyCode} className="flex gap-2">
          <input
            type="text"
            placeholder="CODE"
            value={token}
            onChange={(e) => setToken(e.target.value)}
            className="bg-black border border-primary px-4 py-2 text-[10px] text-white outline-none w-32 font-black tracking-[0.3em]"
            required
          />
          <button
            type="submit"
            disabled={loading}
            className="bg-white text-black px-6 py-2 text-[10px] font-black hover:bg-primary transition-all uppercase disabled:opacity-50"
          >
            {loading ? '...' : 'CONFIRM'}
          </button>
          <button type="button" onClick={() => setView('email')} className="text-[#555] hover:text-white">
            <Icon name="XMarkIcon" size={16} />
          </button>
        </form>
      )}
      {message && (
        <div className="fixed bottom-4 right-4 bg-red-600 text-white px-6 py-3 text-[10px] font-black tracking-widest z-[2000]">
          {message.toUpperCase()}
        </div>
      )}
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/components/common/Breadcrumb.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';

import React from 'react';
import Link from 'next/link';
import { usePathname } from 'next/navigation';
import Icon from '@/components/ui/AppIcon';

interface BreadcrumbItem {
  label: string;
  path: string;
}

interface BreadcrumbProps {
  items?: BreadcrumbItem[];
  className?: string;
}

const Breadcrumb = ({ items, className = '' }: BreadcrumbProps) => {
  const pathname = usePathname();

  const generateBreadcrumbs = (): BreadcrumbItem[] => {
    if (items && items.length > 0) {
      return items;
    }

    // Start with Home
    const breadcrumbs: BreadcrumbItem[] = [
      { label: 'Home', path: '/homepage' }
    ];

    // Split path, filtering out empty strings
    const pathSegments = pathname.split('/').filter(segment => segment);

    // Map for pretty labels
    const pathMap: Record<string, string> = {
      'homepage': 'Home',
      'price-indexes': 'Price Indexes',
      'markets-overview': 'Markets Overview',
      'de-fi-analytics': 'DeFi Analytics',
      'article-reader': 'Article Reader'
    };

    let currentPath = '';
    
    pathSegments.forEach(segment => {
      currentPath += `/${segment}`;
      
      // Prevent adding "Home" twice if we are on /homepage
      if (currentPath === '/homepage') return;

      const label = pathMap[segment] || segment.split('-').map(word => 
        word.charAt(0).toUpperCase() + word.slice(1)
      ).join(' ');
      
      breadcrumbs.push({
        label,
        path: currentPath
      });
    });

    return breadcrumbs;
  };

  const breadcrumbItems = generateBreadcrumbs();

  // If we are just on Home, don't show breadcrumbs
  if (breadcrumbItems.length <= 1 && pathname === '/homepage') {
    return null;
  }

  return (
    <nav 
      className={`flex items-center gap-2 py-4 text-sm font-caption ${className}`}
      aria-label="Breadcrumb"
    >
      {breadcrumbItems.map((item, index) => {
        const isLast = index === breadcrumbItems.length - 1;
        const isFirst = index === 0;

        return (
          <React.Fragment key={item.path}>
            {!isFirst && (
              <Icon 
                name="ChevronRightIcon" 
                size={16} 
                className="text-muted-foreground" 
              />
            )}
            {isLast ? (
              <span 
                className="text-primary font-medium"
                aria-current="page"
              >
                {item.label}
              </span>
            ) : (
              <Link
                href={item.path}
                className="text-muted-foreground hover:text-foreground transition-smooth"
              >
                {item.label}
              </Link>
            )}
          </React.Fragment>
        );
      })}
    </nav>
  );
};

export default Breadcrumb;


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/components/common/CookieConsent.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';
import { useState, useEffect } from 'react';

export default function CookieConsent() {
  const [visible, setVisible] = useState(false);

  useEffect(() => {
    const consent = document.cookie.includes('cbn_consent=true');
    if (!consent) {
      const timer = setTimeout(() => setVisible(true), 2000);
      return () => clearTimeout(timer);
    }
  }, []);

  const accept = () => {
    document.cookie = 'cbn_consent=true; max-age=31536000; path=/; SameSite=Lax';
    setVisible(false);
  };

  const decline = () => {
    document.cookie = 'cbn_consent=false; max-age=31536000; path=/; SameSite=Lax';
    setVisible(false);
  };

  if (!visible) return null;

  return (
    <div className="fixed bottom-0 left-0 right-0 z-[2000] bg-black border-t border-[#1a1a1a] px-4 py-4">
      <div className="container mx-auto flex flex-col sm:flex-row items-center justify-between gap-4">
        <p className="text-[10px] text-[#888] font-mono max-w-xl">
          We use cookies and analytics (Vercel Analytics, Microsoft Clarity) to improve your experience.
          By continuing, you consent to our{' '}
          <a href="/privacy" className="text-[#FABF2C] hover:underline">
            Privacy Policy
          </a>
          .
        </p>
        <div className="flex gap-3 shrink-0">
          <button
            onClick={decline}
            className="border border-[#1a1a1a] text-[#555] hover:text-white px-4 py-2 text-[10px] font-black uppercase tracking-widest transition-colors"
          >
            Decline
          </button>
          <button
            onClick={accept}
            className="bg-[#FABF2C] text-black px-6 py-2 text-[10px] font-black uppercase tracking-widest hover:bg-white transition-colors"
          >
            Accept
          </button>
        </div>
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/components/common/Header.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';

import React, { useState } from 'react';
import Link from 'next/link';
import AuthButton from '@/components/auth/AuthButton';

const NAV_ITEMS = [
  { label: 'NEWS', href: '/' },
  {
    label: 'DATA',
    href: '/data',
    children: [
      { label: 'Markets', href: '/data/markets' },
      { label: 'DeFi', href: '/data/defi' },
      { label: 'On-Chain', href: '/data/onchain' },
      { label: 'ETFs', href: '/data/etfs' },
      { label: 'Stablecoins', href: '/data/stablecoins' },
      { label: 'NFTs', href: '/data/nfts' },
      { label: 'Exchanges', href: '/data/exchanges' },
      { label: 'Layer 2s', href: '/data/l2' },
      { label: 'Governance', href: '/data/governance' },
    ],
  },
  { label: 'PRICES', href: '/price-indexes' },
  { label: 'EVENTS', href: '/events' },
  { label: 'LEARNING', href: '/learning' },
];

export default function Header() {
  const [activeMenu, setActiveMenu] = useState<string | null>(null);
  const [mobileOpen, setMobileOpen] = useState(false);

  return (
    <header className="fixed top-0 left-0 right-0 z-[1000] bg-black border-b border-[#1a1a1a] h-16">
      <div className="container mx-auto h-full flex items-center justify-between px-4 lg:px-8">
        <div className="flex items-center gap-8">
          <Link href="/" className="flex items-center gap-2 group">
            <div className="relative w-8 h-8 bg-[#FABF2C] flex items-center justify-center font-black text-black text-sm">
              CB
            </div>
            <span className="text-xl font-black tracking-tighter text-white group-hover:text-[#FABF2C] transition-colors uppercase">
              CryptoBrain
            </span>
          </Link>

          <nav className="hidden xl:flex items-center gap-1">
            {NAV_ITEMS.map((item) => (
              <div
                key={item.label}
                className="relative group"
                onMouseEnter={() => setActiveMenu(item.label)}
                onMouseLeave={() => setActiveMenu(null)}
              >
                <Link
                  href={item.href}
                  className="px-4 py-2 text-[11px] font-black text-[#888] hover:text-white uppercase tracking-widest transition-colors flex items-center gap-1"
                >
                  {item.label}
                  {item.children && <span className="text-[8px] opacity-40">â–¼</span>}
                </Link>

                {item.children && activeMenu === item.label && (
                  <div className="absolute top-full left-0 w-48 bg-black border border-[#1a1a1a] py-2 shadow-2xl">
                    {item.children.map((child) => (
                      <Link
                        key={child.label}
                        href={child.href}
                        className="block px-4 py-2 text-[10px] font-bold text-[#555] hover:text-[#FABF2C] hover:bg-white/5 transition-all"
                      >
                        {child.label}
                      </Link>
                    ))}
                  </div>
                )}
              </div>
            ))}
          </nav>
        </div>

        <div className="flex items-center gap-4">
          <Link
            href="/advertise"
            className="hidden lg:block border border-[#1a1a1a] text-[#888] hover:border-[#FABF2C] hover:text-[#FABF2C] px-4 py-2 text-[10px] font-black transition-all uppercase tracking-widest"
          >
            Advertise
          </Link>
          <Link
            href="/go-alpha"
            className="hidden md:block bg-[#FABF2C] text-black px-4 py-2 text-[10px] font-black hover:bg-white transition-all uppercase tracking-widest"
          >
            Go Alpha
          </Link>
          <AuthButton />
          {/* Mobile toggle */}
          <button
            onClick={() => setMobileOpen(!mobileOpen)}
            className="xl:hidden text-white p-2"
            aria-label="Menu"
          >
            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
              {mobileOpen ? (
                <path d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" />
              ) : (
                <path d="M3 5h14M3 10h14M3 15h14" stroke="currentColor" strokeWidth="2" fill="none" />
              )}
            </svg>
          </button>
        </div>
      </div>

      {/* Mobile menu */}
      {mobileOpen && (
        <div className="xl:hidden absolute top-16 left-0 right-0 bg-black border-b border-[#1a1a1a] py-4 px-4 z-[999]">
          {NAV_ITEMS.map((item) => (
            <div key={item.label}>
              <Link
                href={item.href}
                onClick={() => setMobileOpen(false)}
                className="block py-3 text-[11px] font-black text-[#888] hover:text-white uppercase tracking-widest border-b border-[#111]"
              >
                {item.label}
              </Link>
              {item.children && (
                <div className="pl-4 space-y-2 py-2">
                  {item.children.map((child) => (
                    <Link
                      key={child.label}
                      href={child.href}
                      onClick={() => setMobileOpen(false)}
                      className="block text-[10px] text-[#555] hover:text-[#FABF2C] transition-colors"
                    >
                      {child.label}
                    </Link>
                  ))}
                </div>
              )}
            </div>
          ))}
          <Link
            href="/advertise"
            onClick={() => setMobileOpen(false)}
            className="block py-3 text-[11px] font-black text-[#FABF2C] uppercase tracking-widest"
          >
            Advertise
          </Link>
        </div>
      )}
    </header>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/components/common/PriceTicker.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// src/components/common/PriceTicker.tsx
'use client';

import React, { useState, useEffect } from 'react';

export default function PriceTicker() {
  const [prices, setPrices] = useState<any[]>([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    let mounted = true;
    const controller = new AbortController();

    async function fetchPrices() {
      try {
        const res = await fetch('/api/prices', { signal: controller.signal });
        if (!res.ok) throw new Error(`HTTP ${res.status}`);
        const data = await res.json();

        if (mounted && Array.isArray(data)) {
          setPrices(
            data.map((c: any) => ({
              symbol: (c.symbol || '').toUpperCase(),
              price: Number(c.current_price ?? 0),
              change: Number(c.price_change_percentage_24h ?? 0),
            }))
          );
        }
      } catch (e: any) {
        if (e.name !== 'AbortError') {
          console.warn('[Ticker] Fetch failed');
        }
      } finally {
        if (mounted) setLoading(false);
      }
    }

    fetchPrices();
    const interval = setInterval(fetchPrices, 60000);

    return () => {
      mounted = false;
      controller.abort();
      clearInterval(interval);
    };
  }, []);

  if (loading || prices.length === 0) {
    return (
      <div className="fixed top-16 left-0 right-0 z-[999] bg-black border-b border-primary/20 h-10 flex items-center px-4">
        <span className="text-[10px] font-mono text-primary animate-pulse tracking-[0.2em]">
          CONNECTING TO DATA FEED...
        </span>
      </div>
    );
  }

  // Double the array for seamless infinite scroll
  const displayPrices = [...prices, ...prices];

  return (
    <div className="fixed top-16 left-0 right-0 z-[999] bg-black border-b border-[#1a1a1a] h-10 flex items-center overflow-hidden">
      <div className="flex ticker-scroll whitespace-nowrap gap-6 px-4">
        {displayPrices.map((crypto, index) => (
          <div
            key={`${crypto.symbol}-${index}`}
            className="flex items-center gap-2"
          >
            <span className="text-[11px] font-black text-primary font-mono">
              {crypto.symbol}
            </span>
            <span className="text-[11px] font-bold text-white font-mono tabular-nums">
              $
              {crypto.price > 1
                ? crypto.price.toLocaleString(undefined, {
                    minimumFractionDigits: 2,
                  })
                : crypto.price.toFixed(4)}
            </span>
            <span
              className={`text-[10px] font-bold font-mono tabular-nums ${
                crypto.change >= 0 ? 'text-[#00d672]' : 'text-[#ff4757]'
              }`}
            >
              {crypto.change >= 0 ? 'â–²' : 'â–¼'}{' '}
              {Math.abs(crypto.change).toFixed(2)}%
            </span>
          </div>
        ))}
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/components/layout/Footer.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import React from 'react';
import Link from 'next/link';

export default function Footer() {
  return (
    <footer className="bg-black border-t border-[#1a1a1a] py-16 px-4 lg:px-8 mt-20">
      <div className="container mx-auto grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12">
        <div className="space-y-6">
          <div className="flex items-center gap-2">
            <div className="w-8 h-8 bg-primary rounded flex items-center justify-center font-black text-black">C</div>
            <span className="text-xl font-black tracking-tighter text-white uppercase">CryptoBrain</span>
          </div>
          <p className="text-[#444] text-xs leading-relaxed font-medium max-w-xs">
            The definitive source for institutional-grade crypto intelligence, DeFi data, and on-chain education.
          </p>
          <div className="flex gap-4">
            {[
              { id: 'tw', label: 'X' },
              { id: 'tg', label: 'TG' },
              { id: 'dc', label: 'DC' },
              { id: 'li', label: 'IN' }
            ].map((social) => (
              <div key={social.id} className="w-8 h-8 border border-[#1a1a1a] flex items-center justify-center text-[10px] text-[#444] hover:border-primary hover:text-primary cursor-pointer transition-all">
                {social.label}
              </div>
            ))}
          </div>
        </div>

        <div>
          <h4 className="text-[10px] font-black text-primary uppercase tracking-[0.2em] mb-6">Network</h4>
          <ul className="space-y-4">
            {['News Hub', 'Data Terminal', 'Learning Hub', 'Go Alpha'].map((item) => (
              <li key={item}>
                <Link href="/homepage" className="text-[#666] text-xs hover:text-white transition-colors uppercase font-bold">{item}</Link>
              </li>
            ))}
          </ul>
        </div>

        <div>
          <h4 className="text-[10px] font-black text-primary uppercase tracking-[0.2em] mb-6">Policies</h4>
          <ul className="space-y-4">
            {['Privacy Policy', 'Terms of Service', 'Cookie Policy', 'Editorial Guidelines'].map((item) => (
              <li key={item}>
                <Link href="/homepage" className="text-[#666] text-xs hover:text-white transition-colors uppercase font-bold">{item}</Link>
              </li>
            ))}
          </ul>
        </div>

        <div>
          <h4 className="text-[10px] font-black text-primary uppercase tracking-[0.2em] mb-6">Daily Briefing</h4>
          <p className="text-[#444] text-xs mb-6 font-medium">Institutional alpha delivered to your inbox every morning.</p>
          <form className="flex">
            <input 
              type="email" 
              placeholder="Email address" 
              className="bg-[#0a0a0a] border border-[#1a1a1a] px-4 py-2 text-xs text-white focus:outline-none focus:border-primary flex-grow"
            />
            <button className="bg-primary text-black px-4 py-2 text-[10px] font-black uppercase tracking-widest hover:bg-white transition-all">Join</button>
          </form>
        </div>
      </div>
      
      <div className="container mx-auto mt-16 pt-8 border-t border-[#111] flex justify-between items-center">
        <p className="text-[9px] text-[#333] font-mono uppercase tracking-widest">
          Â© 2026 CryptoBrainNews. Market Data by DefiLlama.
        </p>
      </div>
    </footer>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/components/layout/Ticker.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';
import useSWR from 'swr';

const fetcher = (url: string) => fetch(url).then(res => res.json());

export default function Ticker() {
  const { data } = useSWR('/api/prices', fetcher, { refreshInterval: 30000 });

  if (!data || !Array.isArray(data)) return <div className="h-8 bg-black border-b border-white/5" />;

  return (
    <div className="h-8 bg-black border-b border-white/5 overflow-hidden flex items-center">
      <div className="flex animate-marquee whitespace-nowrap gap-8 px-4">
        {data.slice(0, 15).map((coin: any) => (
          <div key={coin.id} className="flex items-center gap-2 font-mono text-[10px] uppercase">
            <span className="text-gray-500">{coin.symbol}</span>
            <span className="text-white">${coin.current_price.toLocaleString()}</span>
            <span className={coin.price_change_percentage_24h >= 0 ? 'text-green-500' : 'text-red-500'}>
              {coin.price_change_percentage_24h >= 0 ? 'â–²' : 'â–¼'} 
              {Math.abs(coin.price_change_percentage_24h).toFixed(2)}%
            </span>
          </div>
        ))}
      </div>
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/components/news/AINewsFeed.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';
import useSWR from 'swr';

const fetcher = (url: string) => fetch(url).then(res => res.json());

export default function AINewsFeed() {
  const { data, error, isLoading } = useSWR('/api/news/ai', fetcher, {
    refreshInterval: 600000, 
    revalidateOnFocus: false
  });

  if (isLoading) return (
    <div className="space-y-8">
      {[1,2,3].map(i => (
        <div key={i} className="animate-pulse space-y-3">
          <div className="flex justify-between"><div className="h-2 bg-white/5 w-16" /><div className="h-2 bg-white/5 w-10" /></div>
          <div className="h-3 bg-white/10 w-full" />
          <div className="space-y-1"><div className="h-1.5 bg-white/5 w-2/3" /><div className="h-1.5 bg-white/5 w-1/2" /></div>
        </div>
      ))}
    </div>
  );

  if (!data || data.length === 0) return (
    <div className="py-10 border border-white/5 bg-white/[0.01] text-center">
      <p className="text-[10px] font-mono text-gray-600 uppercase tracking-widest">
        {error ? 'Data Stream Interrupted' : 'Syncing with Global Wire...'}
      </p>
    </div>
  );

  return (
    <div className="space-y-10">
      {data.map((article: any) => (
        <div key={article.id} className="group border-b border-white/5 pb-8 last:border-0 last:pb-0">
          <div className="flex items-center justify-between mb-3 font-mono text-[9px] uppercase tracking-widest">
            <span className="text-primary/80">{article.source}</span>
            <span className={`px-1.5 py-0.5 border ${
              article.sentiment === 'Positive' ? 'border-green-500/30 text-green-500' : 
              article.sentiment === 'Negative' ? 'border-red-500/30 text-red-500' : 
              'border-gray-500/30 text-gray-500'
            }`}>
              {article.sentiment}
            </span>
          </div>
          <h4 className="text-[13px] font-bold text-gray-200 leading-snug mb-4 group-hover:text-primary transition-colors uppercase">
            <a href={article.url} target="_blank" rel="noopener noreferrer">{article.title}</a>
          </h4>
          <ul className="space-y-2">
            {article.bullets.map((b: string, i: number) => (
              <li key={i} className="text-[10px] text-gray-500 flex items-start gap-2 leading-relaxed">
                <span className="text-primary/40 mt-1">/</span>
                {b}
              </li>
            ))}
          </ul>
        </div>
      ))}
    </div>
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/components/ui/AppIcon.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';

import React from 'react';
import * as HeroIcons from '@heroicons/react/24/outline';
import * as HeroIconsSolid from '@heroicons/react/24/solid';
import { QuestionMarkCircleIcon } from '@heroicons/react/24/outline';

type IconVariant = 'outline' | 'solid';

interface IconProps {
    name: string; 
    variant?: IconVariant;
    size?: number;
    className?: string;
    onClick?: () => void;
    disabled?: boolean;
    [key: string]: any;
}

function Icon({
    name,
    variant = 'outline',
    size = 24,
    className = '',
    onClick,
    disabled = false,
    ...props
}: IconProps) {
    const iconSet = variant === 'solid' ? HeroIconsSolid : HeroIcons;
    const IconComponent = iconSet[name as keyof typeof iconSet] as React.ComponentType<any>;

    if (!IconComponent) {
        return (
            <QuestionMarkCircleIcon
                width={size}
                height={size}
                className={`text-gray-400 ${disabled ? 'opacity-50 cursor-not-allowed' : ''} ${className}`}
                onClick={disabled ? undefined : onClick}
                {...props}
            />
        );
    }

    return (
        <IconComponent
            width={size}
            height={size}
            className={`${disabled ? 'opacity-50 cursor-not-allowed' : onClick ? 'cursor-pointer hover:opacity-80' : ''} ${className}`}
            onClick={disabled ? undefined : onClick}
            {...props}
        />
    );
}

export default Icon;


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/components/ui/AppImage.tsx
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
'use client';
import Image from 'next/image';
import { useState } from 'react';

export default function AppImage({ src, alt, fill, className, priority }: any) {
  const [error, setError] = useState(false);
  
  // High-quality crypto placeholder if image fails
  const fallback = "https://images.unsplash.com/photo-1639762681485-074b7f938ba0?q=80&w=2000";

  return (
    <Image
      src={error || !src ? fallback : src}
      alt={alt || "CryptoBrain"}
      fill={fill}
      className={`${className} ${error ? 'opacity-50 grayscale' : ''}`}
      priority={priority}
      onError={() => setError(true)}
      unoptimized
    />
  );
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/lib/api.ts
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import { cached } from './cache';
import type { CoinMarketData, DeFiProtocol } from './types';
import { FALLBACK_MARKET_DATA } from './fallback-data';

const COINGECKO_BASE = 'https://api.coingecko.com/api/v3';
const DEFI_LLAMA_BASE = 'https://api.llama.fi';

// â”€â”€â”€ Market Data â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
export async function getLiveMarketPrices(): Promise<CoinMarketData[]> {
  return cached(
    'market:prices',
    async () => {
      try {
        const res = await fetch(
          `${COINGECKO_BASE}/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=50&sparkline=true&price_change_percentage=7d`,
          { next: { revalidate: 300 } }
        );
        if (!res.ok) throw new Error('Failed to fetch');
        return await res.json();
      } catch {
        return FALLBACK_MARKET_DATA;
      }
    },
    300
  );
}

export async function getCoinPrice(coinId: string): Promise<number | null> {
  try {
    const res = await fetch(
      `${COINGECKO_BASE}/simple/price?ids=${coinId}&vs_currencies=usd`,
      { next: { revalidate: 60 } }
    );
    if (!res.ok) return null;
    const data = await res.json();
    return data[coinId]?.usd || null;
  } catch {
    return null;
  }
}

// â”€â”€â”€ DeFi Data â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
export async function getDeFiProtocols(): Promise<DeFiProtocol[]> {
  return cached(
    'defi:protocols',
    async () => {
      try {
        const res = await fetch(`${DEFI_LLAMA_BASE}/protocols`, {
          next: { revalidate: 600 },
        });
        if (!res.ok) throw new Error('Failed to fetch');
        return await res.json();
      } catch {
        return [];
      }
    },
    600
  );
}

export async function getChainTVL(chain: string): Promise<number | null> {
  try {
    const res = await fetch(`${DEFI_LLAMA_BASE}/tvl/${chain}`, {
      next: { revalidate: 600 },
    });
    if (!res.ok) return null;
    return await res.json();
  } catch {
    return null;
  }
}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/lib/articles.ts
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import 'server-only';
import { cached } from './cache';
import { getSupabase } from './supabase';
import type { NewsArticle, WeightedArticle } from './types';

const NEWS_API = 'https://min-api.cryptocompare.com/data/v2/news/?lang=EN';

export const SOURCE_WEIGHTS = {
  editorial: 100,
  alpha: 90,
  ai_summary: 70,
  wire: 30,
} as const;

async function fetchWireNews(): Promise<WeightedArticle[]> {
  try {
    const res = await fetch(NEWS_API, { next: { revalidate: 300 } });
    if (!res.ok) return [];
    const data = await res.json();
    if (!data?.Data) return [];

    return data.Data.slice(0, 40).map((a: any): WeightedArticle => ({
      id: String(a.id),
      title: a.title,
      body: a.body || '',
      image: a.imageurl,
      source: a.source_info?.name || 'News Wire',
      published_on: a.published_on,
      url: a.url,
      categories: a.categories?.split('|') || ['General'],
      tags: a.tags?.split('|') || [],
      weight: SOURCE_WEIGHTS.wire,
      sourceType: 'wire',
    }));
  } catch {
    return [];
  }
}

async function fetchEditorialNews(): Promise<WeightedArticle[]> {
  try {
    const supabase = getSupabase();
    const { data, error } = await supabase
      .from('articles')
      .select('*')
      .order('published_at', { ascending: false })
      .limit(50);

    if (error || !data) return [];

    return data.map((a: any): WeightedArticle => {
      const isAlpha = a.category === 'Alpha Call';
      return {
        id: a.id,
        title: a.title,
        body: a.body || '',
        image: a.image_url || '',
        source: 'CryptoBrain',
        published_on: Math.floor(new Date(a.published_at).getTime() / 1000),
        url: `/news/${a.id}`,
        categories: [a.category],
        tags: a.tags || [],
        weight: isAlpha ? SOURCE_WEIGHTS.alpha : SOURCE_WEIGHTS.editorial,
        sourceType: isAlpha ? 'alpha' : 'editorial',
        author_name: a.author_name,
        author_bio: a.author_bio,
      };
    });
  } catch {
    return [];
  }
}

export async function getAllArticles(): Promise<WeightedArticle[]> {
  return cached(
    'articles:weighted',
    async () => {
      const [editorial, wire] = await Promise.all([
        fetchEditorialNews(),
        fetchWireNews(),
      ]);

      const all = [...editorial, ...wire];
      all.sort((a, b) => {
        if (b.weight !== a.weight) return b.weight - a.weight;
        return b.published_on - a.published_on;
      });

      return all;
    },
    60
  );
}

export async function getArticleById(id: string): Promise<WeightedArticle | null> {
  const articles = await getAllArticles();
  return articles.find((a) => a.id === id) || null;
}

export async function getRelatedArticles(
  id: string,
  limit = 4
): Promise<WeightedArticle[]> {
  const all = await getAllArticles();
  return all.filter((a) => a.id !== id).slice(0, limit);
}

export async function getIntelligence(category: string): Promise<WeightedArticle[]> {
  const editorial = await fetchEditorialNews();
  return editorial.filter((a) => a.categories.includes(category));
}

export function calculateReadingTime(text: string): number {
  const words = (text || '').split(/\s+/).length;
  return Math.max(1, Math.ceil(words / 200));
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/lib/cache.ts
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import 'server-only';
import { Redis } from '@upstash/redis';

const CHUNK_SIZE = 512 * 1024;

const redis =
  process.env.UPSTASH_REDIS_REST_URL && process.env.UPSTASH_REDIS_REST_TOKEN
    ? new Redis({
        url: process.env.UPSTASH_REDIS_REST_URL,
        token: process.env.UPSTASH_REDIS_REST_TOKEN,
      })
    : null;

interface CacheEntry<T> {
  data: T;
  expiresAt: number;
}

const memoryStore = new Map<string, CacheEntry<unknown>>();
const inflight = new Map<string, Promise<unknown>>();

async function setRedisChunked<T>(key: string, data: T, ttl: number): Promise<void> {
  if (!redis) return;
  try {
    const serialized = JSON.stringify(data);
    if (serialized.length <= CHUNK_SIZE) {
      await redis.set(key, data, { ex: ttl });
      return;
    }
    const totalChunks = Math.ceil(serialized.length / CHUNK_SIZE);
    const pipeline = redis.pipeline();
    for (let i = 0; i < totalChunks; i++) {
      const chunk = serialized.slice(i * CHUNK_SIZE, (i + 1) * CHUNK_SIZE);
      pipeline.set(`${key}:chunk:${i}`, chunk, { ex: ttl + 60 });
    }
    pipeline.set(`${key}:meta`, { chunks: totalChunks }, { ex: ttl + 60 });
    await pipeline.exec();
  } catch (err) {
    console.error(`[Cache] Redis chunked write failed for ${key}:`, err);
  }
}

async function getRedisChunked<T>(key: string): Promise<T | null> {
  if (!redis) return null;
  try {
    const direct = await redis.get<T>(key);
    if (direct !== null && direct !== undefined) return direct;

    const meta = await redis.get<{ chunks: number }>(`${key}:meta`);
    if (!meta?.chunks) return null;

    const pipeline = redis.pipeline();
    for (let i = 0; i < meta.chunks; i++) {
      pipeline.get(`${key}:chunk:${i}`);
    }
    const results = await pipeline.exec();
    const serialized = results.map((r) => String(r ?? '')).join('');
    if (!serialized) return null;

    return JSON.parse(serialized) as T;
  } catch (err) {
    console.error(`[Cache] Redis chunked read failed for ${key}:`, err);
    return null;
  }
}

export async function cached<T>(
  key: string,
  fn: () => Promise<T>,
  ttlSeconds = 300
): Promise<T> {
  const now = Date.now();
  const memKey = `mem:${key}`;

  const memEntry = memoryStore.get(memKey) as CacheEntry<T> | undefined;
  if (memEntry && now < memEntry.expiresAt) return memEntry.data;

  if (inflight.has(key)) return inflight.get(key) as Promise<T>;

  const promise = (async (): Promise<T> => {
    try {
      const redisData = await getRedisChunked<T>(key);
      if (redisData !== null) {
        memoryStore.set(memKey, {
          data: redisData,
          expiresAt: now + ttlSeconds * 1000,
        });
        return redisData;
      }

      console.log(`[Cache] MISS: ${key}`);
      const freshData = await fn();

      memoryStore.set(memKey, {
        data: freshData,
        expiresAt: now + ttlSeconds * 1000,
      });
      setRedisChunked(key, freshData, ttlSeconds).catch(console.error);

      return freshData;
    } finally {
      inflight.delete(key);
    }
  })();

  inflight.set(key, promise);
  return promise;
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/lib/dune.ts
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import 'server-only';

// â•â•â• Dune Query IDs â•â•â•
// These must be created in your Dune dashboard and replace placeholder numbers below
export const QUERY_IDS = {
  BTC_ACTIVE_ADDRESSES:  6705328,
  BTC_DAILY_TRANSACTIONS: 6705623,
  ETH_ACTIVE_ADDRESSES: 6705462,
  ETH_DAILY_TRANSACTIONS: 6705475,
  SOL_DAILY_TRANSACTIONS:  6704569,
  SOL_DAILY_FEES: 6705036,
  WHALE_TRANSFERS: 6705679,
  STABLECOIN_SUPPLY: 6705686,
  STABLECOIN_HOLDERS: 6705803,
  DEX_DAILY_VOLUMES: 6705479,
  DEX_TOP_PROTOCOLS:  6705632,
  DEX_BY_BLOCKCHAIN: 6705655,
  L2_ACTIVE_ADDRESSES: 6705808,
  L2_GAS_FEES: 6704769,
  NFT_TOP_COLLECTIONS: 6705026,
  NFT_DAILY_VOLUMES: 6705030,
  NFT_BY_BLOCKCHAIN: 6705034,
  DEX_LIQUIDITY_POOLS: 6705658,
  DEFI_PROTOCOL_USERS: 6705851,
  UNISWAP_GOVERNANCE: 6705858,
  DAO_ACTIVITY: 6705938,
  CEX_DEX_VOLUME: 6705817,
  TOP_TOKEN_PAIRS: 6705951,
} as const;

interface DuneRow {
  [key: string]: string | number | null;
}

export interface DuneResponse {
  execution_id: string;
  state: 'QUERY_STATE_EXECUTING' | 'QUERY_STATE_COMPLETED' | 'QUERY_STATE_FAILED';
  result?: {
    rows: DuneRow[];
  };
  error?: string;
}

const DUNE_API_KEY = process.env.DUNE_API_KEY;
const DUNE_BASE_URL = 'https://api.dune.com/api/v1';

// â”€â”€â”€ Fetch with polling â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function fetchDuneQuery(
  queryId: number,
  parameters: Record<string, string | number> = {}
): Promise<DuneRow[]> {
  if (!DUNE_API_KEY) {
    console.error('[Dune] API key not configured');
    return [];
  }

  try {
    // 1. Execute query
    const execRes = await fetch(`${DUNE_BASE_URL}/query/${queryId}/execute`, {
      method: 'POST',
      headers: {
        'X-DUNE-API-KEY': DUNE_API_KEY,
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ query_parameters: parameters }),
    });

    if (!execRes.ok) {
      throw new Error(`[Dune] Execute failed: ${execRes.statusText}`);
    }

    const execData = (await execRes.json()) as { execution_id?: string };
    const executionId = execData.execution_id;

    if (!executionId) {
      throw new Error('[Dune] No execution_id returned');
    }

    // 2. Poll for results (max 30 seconds)
    let attempts = 0;
    const maxAttempts = 60;
    while (attempts < maxAttempts) {
      const statusRes = await fetch(
        `${DUNE_BASE_URL}/execution/${executionId}/results`,
        {
          headers: { 'X-DUNE-API-KEY': DUNE_API_KEY },
        }
      );

      if (!statusRes.ok) {
        throw new Error(`[Dune] Status check failed: ${statusRes.statusText}`);
      }

      const statusData = (await statusRes.json()) as DuneResponse;

      if (statusData.state === 'QUERY_STATE_COMPLETED') {
        return statusData.result?.rows || [];
      }

      if (statusData.state === 'QUERY_STATE_FAILED') {
        throw new Error(`[Dune] Query failed: ${statusData.error}`);
      }

      await new Promise((resolve) => setTimeout(resolve, 500));
      attempts++;
    }

    throw new Error('[Dune] Query timeout after 30 seconds');
  } catch (err) {
    console.error('[Dune] Error:', err);
    return [];
  }
}

export async function getBTCActiveAddresses(days = 90): Promise<DuneRow[]> {
  return fetchDuneQuery(QUERY_IDS.BTC_ACTIVE_ADDRESSES, { days });
}

export async function getBTCDailyTransactions(days = 90): Promise<DuneRow[]> {
  return fetchDuneQuery(QUERY_IDS.BTC_DAILY_TRANSACTIONS, { days });
}

export async function getETHActiveAddresses(days = 90): Promise<DuneRow[]> {
  return fetchDuneQuery(QUERY_IDS.ETH_ACTIVE_ADDRESSES, { days });
}

export async function getETHDailyTransactions(days = 90): Promise<DuneRow[]> {
  return fetchDuneQuery(QUERY_IDS.ETH_DAILY_TRANSACTIONS, { days });
}

export async function getSOLDailyTransactions(days = 90): Promise<DuneRow[]> {
  return fetchDuneQuery(QUERY_IDS.SOL_DAILY_TRANSACTIONS, { days });
}

export async function getSOLDailyFees(days = 90): Promise<DuneRow[]> {
  return fetchDuneQuery(QUERY_IDS.SOL_DAILY_FEES, { days });
}

export async function getWhaleTransfers(days = 30): Promise<DuneRow[]> {
  return fetchDuneQuery(QUERY_IDS.WHALE_TRANSFERS, { days });
}

export async function getStablecoinSupply(days = 90): Promise<DuneRow[]> {
  return fetchDuneQuery(QUERY_IDS.STABLECOIN_SUPPLY, { days });
}

export async function getStablecoinHolders(): Promise<DuneRow[]> {
  return fetchDuneQuery(QUERY_IDS.STABLECOIN_HOLDERS);
}

export async function getDEXDailyVolumes(days = 90): Promise<DuneRow[]> {
  return fetchDuneQuery(QUERY_IDS.DEX_DAILY_VOLUMES, { days });
}

export async function getDEXTopProtocols(): Promise<DuneRow[]> {
  return fetchDuneQuery(QUERY_IDS.DEX_TOP_PROTOCOLS);
}

export async function getDEXByBlockchain(days = 90): Promise<DuneRow[]> {
  return fetchDuneQuery(QUERY_IDS.DEX_BY_BLOCKCHAIN, { days });
}

export async function getL2ActiveAddresses(days = 90): Promise<DuneRow[]> {
  return fetchDuneQuery(QUERY_IDS.L2_ACTIVE_ADDRESSES, { days });
}

export async function getL2GasFees(days = 90): Promise<DuneRow[]> {
  return fetchDuneQuery(QUERY_IDS.L2_GAS_FEES, { days });
}

export async function getNFTTopCollections(): Promise<DuneRow[]> {
  return fetchDuneQuery(QUERY_IDS.NFT_TOP_COLLECTIONS);
}

export async function getNFTDailyVolumes(days = 90): Promise<DuneRow[]> {
  return fetchDuneQuery(QUERY_IDS.NFT_DAILY_VOLUMES, { days });
}

export async function getNFTByBlockchain(days = 90): Promise<DuneRow[]> {
  return fetchDuneQuery(QUERY_IDS.NFT_BY_BLOCKCHAIN, { days });
}

export async function getDEXLiquidityPools(days = 90): Promise<DuneRow[]> {
  return fetchDuneQuery(QUERY_IDS.DEX_LIQUIDITY_POOLS, { days });
}

export async function getDeFiProtocolUsers(): Promise<DuneRow[]> {
  return fetchDuneQuery(QUERY_IDS.DEFI_PROTOCOL_USERS);
}

export async function getUniswapGovernance(): Promise<DuneRow[]> {
  return fetchDuneQuery(QUERY_IDS.UNISWAP_GOVERNANCE);
}

export async function getDAOActivity(): Promise<DuneRow[]> {
  return fetchDuneQuery(QUERY_IDS.DAO_ACTIVITY);
}

export async function getCEXDEXVolume(days = 90): Promise<DuneRow[]> {
  return fetchDuneQuery(QUERY_IDS.CEX_DEX_VOLUME, { days });
}

export async function getTopTokenPairs(): Promise<DuneRow[]> {
  return fetchDuneQuery(QUERY_IDS.TOP_TOKEN_PAIRS);
}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/lib/fallback-data.ts
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import type { CoinMarketData } from './types';

export const FALLBACK_MARKET_DATA: CoinMarketData[] = [
  {
    id: 'bitcoin',
    market_cap_rank: 1,
    name: 'Bitcoin',
    symbol: 'BTC',
    image: 'https://assets.coingecko.com/coins/images/1/large/bitcoin.png',
    current_price: 45000,
    price_change_percentage_24h: 2.5,
    price_change_percentage_7d: 5.2,
    market_cap: 900000000000,
    total_volume: 25000000000,
    sparkline_in_7d: {
      price: Array(168)
        .fill(0)
        .map(() => Math.random() * 5000 + 40000),
    },
  },
  {
    id: 'ethereum',
    market_cap_rank: 2,
    name: 'Ethereum',
    symbol: 'ETH',
    image: 'https://assets.coingecko.com/coins/images/279/large/ethereum.png',
    current_price: 2500,
    price_change_percentage_24h: 1.8,
    price_change_percentage_7d: 3.5,
    market_cap: 300000000000,
    total_volume: 15000000000,
    sparkline_in_7d: {
      price: Array(168)
        .fill(0)
        .map(() => Math.random() * 200 + 2300),
    },
  },
  {
    id: 'solana',
    market_cap_rank: 5,
    name: 'Solana',
    symbol: 'SOL',
    image: 'https://assets.coingecko.com/coins/images/4128/large/solana.png',
    current_price: 140,
    price_change_percentage_24h: 3.2,
    price_change_percentage_7d: 8.1,
    market_cap: 60000000000,
    total_volume: 3000000000,
    sparkline_in_7d: {
      price: Array(168)
        .fill(0)
        .map(() => Math.random() * 20 + 130),
    },
  },
];

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/lib/sidebar-config.ts
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// src/lib/sidebar-config.ts
// â”€â”€â”€ Data Terminal Navigation Configuration â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import type { SidebarSection } from './types';

export const DATA_SECTIONS: SidebarSection[] = [
  {
    label: 'Markets',
    icon: 'ChartBarIcon',
    basePath: '/data/markets',
    children: [
      { label: 'Overview', href: '/data/markets' },
      { label: 'Spot', href: '/data/markets/spot' },
      { label: 'Futures', href: '/data/markets/futures' },
      { label: 'Crypto Indices', href: '/data/markets/indices' },
      { label: 'Options', href: '/data/markets/options' },
      { label: 'Prices', href: '/data/markets/prices' },
      { label: 'Exchange Volumes', href: '/data/markets/volumes' },
    ],
  },
  {
    label: 'ETFs',
    icon: 'BanknotesIcon',
    basePath: '/data/etfs',
    children: [
      { label: 'Overview', href: '/data/etfs' },
      { label: 'Bitcoin ETFs', href: '/data/etfs/bitcoin' },
      { label: 'Ethereum ETFs', href: '/data/etfs/ethereum' },
      { label: 'ETF Comparison', href: '/data/etfs/comparison' },
    ],
  },
  {
    label: 'Stablecoins',
    icon: 'CurrencyDollarIcon',
    basePath: '/data/stablecoins',
    children: [
      { label: 'Overview', href: '/data/stablecoins' },
      { label: 'USD Pegged', href: '/data/stablecoins/usd' },
      { label: 'Supply by Chain', href: '/data/stablecoins/chains' },
    ],
  },
  {
    label: 'On-Chain',
    icon: 'CubeTransparentIcon',
    basePath: '/data/onchain',
    children: [
      { label: 'Overview', href: '/data/onchain' },
      { label: 'Bitcoin', href: '/data/onchain/bitcoin' },
      { label: 'Ethereum', href: '/data/onchain/ethereum' },
      { label: 'Solana', href: '/data/onchain/solana' },
      { label: 'CEX Flows', href: '/data/onchain/flows' },
      { label: 'Gas Tracker', href: '/data/onchain/gas' },
    ],
  },
  {
    label: 'Scaling',
    icon: 'ArrowsPointingOutIcon',
    basePath: '/data/scaling',
    children: [
      { label: 'Overview', href: '/data/scaling' },
      { label: 'L2 Comparison', href: '/data/scaling/l2-comparison' },
      { label: 'Optimistic Rollups', href: '/data/scaling/optimistic' },
      { label: 'ZK Rollups', href: '/data/scaling/zk' },
    ],
  },
  {
    label: 'DeFi',
    icon: 'CircleStackIcon',
    basePath: '/data/defi',
    children: [
      { label: 'Overview', href: '/data/defi' },
      { label: 'DEX Volume', href: '/data/defi/dex-volume' },
      { label: 'TVL Rankings', href: '/data/defi/tvl' },
      { label: 'Yields', href: '/data/defi/yields' },
      { label: 'Lending', href: '/data/defi/lending' },
      { label: 'Protocol Revenue', href: '/data/defi/revenue' },
      { label: 'ğŸ‹ Whale Watch', href: '/data/defi/whale-watch' },
      { label: 'Large Swaps', href: '/data/defi/large-swaps' },
    ],
  },
  {
    label: 'NFTs',
    icon: 'PhotoIcon',
    basePath: '/data/nfts',
    children: [
      { label: 'Overview', href: '/data/nfts' },
      { label: 'Sales Volume', href: '/data/nfts/volume' },
      { label: 'Top Collections', href: '/data/nfts/collections' },
    ],
  },
];


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/lib/supabase-server.ts
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// src/lib/supabase-server.ts
// â”€â”€â”€ Server-only Supabase client â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import 'server-only';
import { createClient, type SupabaseClient } from '@supabase/supabase-js';

let _client: SupabaseClient | null = null;

export function getServerSupabase(): SupabaseClient {
  if (_client) return _client;

  const url = process.env.NEXT_PUBLIC_SUPABASE_URL;
  const key = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;

  if (!url || !key) {
    throw new Error('[Supabase] Missing NEXT_PUBLIC_SUPABASE_URL or NEXT_PUBLIC_SUPABASE_ANON_KEY');
  }

  _client = createClient(url, key, {
    auth: { persistSession: false },
  });
  return _client;
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/lib/supabase.ts
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import { createClient, type SupabaseClient } from '@supabase/supabase-js';

let _client: SupabaseClient | null = null;

export function getSupabase(): SupabaseClient {
  if (_client) return _client;

  const url = process.env.NEXT_PUBLIC_SUPABASE_URL;
  const key = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;

  if (!url || !key) {
    _client = createClient('https://placeholder.supabase.co', 'placeholder-key');
  } else {
    _client = createClient(url, key);
  }

  return _client;
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/lib/types.ts
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
export interface NewsArticle {
  id: string;
  title: string;
  body: string;
  image: string;
  source: string;
  published_on: number;
  url: string;
  categories: string[];
  tags: string[];
  author_name?: string;
  author_bio?: string;
}

export interface WeightedArticle extends NewsArticle {
  weight: number;
  sourceType: 'editorial' | 'alpha' | 'ai_summary' | 'wire';
  aiSummary?: string;
  aiBullets?: string[];
  aiSentiment?: 'Positive' | 'Negative' | 'Neutral';
}

export interface CryptoEvent {
  id: string;
  title: string;
  description: string;
  organizer: string;
  url: string;
  location_city: string;
  location_country: string;
  venue: string;
  start_date: string;
  end_date: string | null;
  event_type: string;
  is_online: boolean;
  is_featured: boolean;
  source: string;
  tags: string[];
  image_url?: string;
}

export interface AdLead {
  company_name: string;
  contact_name: string;
  email: string;
  telegram?: string;
  website?: string;
  budget_range: string;
  package_interest: string;
  message: string;
}

// Add these exports to your existing types.ts file

export interface SidebarSection {
  label: string;
  icon: string;
  basePath: string;
  children?: Array<{
    label: string;
    href: string;
  }>;
}

export interface CoinMarketData {
  id: string;
  market_cap_rank: number;
  name: string;
  symbol: string;
  image: string;
  current_price: number;
  price_change_percentage_24h: number;
  price_change_percentage_7d: number;
  market_cap: number;
  total_volume: number;
  sparkline_in_7d?: {
    price: number[];
  };
}

export interface DeFiProtocol {
  name: string;
  tvl: number;
  chainTvls?: Record<string, number>;
}

export interface DexVolumePoint {
  day: string;
  dex: string;
  blockchain: string;
  volume_usd: number;
  trade_count: number;
  unique_traders: number;
}

export interface StablecoinPoint {
  day: string;
  token_symbol: string;
  supply_moved: number;
  blockchain: string;
  total_stablecoin_volume: number;
  dominance_pct: number;
}

export interface PriceTableRow {
  id: string;
  market_cap_rank: number;
  name: string;
  symbol: string;
  image: string;
  current_price: number;
  price_change_percentage_24h: number;
  price_change_percentage_7d: number;
  market_cap: number;
  total_volume: number;
  sparkline_in_7d?: {
    price: number[];
  };
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: src/styles/globals.css
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
/* src/styles/globals.css */
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --font-heading: 'Merriweather', serif;
    --font-body: 'Inter', sans-serif;
    --font-caption: 'JetBrains Mono', monospace;
    --font-data: 'Space Mono', monospace;

    --color-background: #000000;
    --color-foreground: #ffffff;
    --color-primary: #FABF2C;
    --color-primary-foreground: #000000;
    --color-border: #1a1a1a;
    --color-card: #0a0a0a;
    --color-card-foreground: #ffffff;
    --color-muted: #111111;
    --color-muted-foreground: #888888;
    --color-secondary: #0f0f0f;
    --color-success: #00d672;
    --color-error: #ff4757;
  }

  body {
    @apply bg-[var(--color-background)] text-[var(--color-foreground)] font-body antialiased;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  h1, h2, h3, h4, h5, h6 {
    @apply font-heading font-bold;
  }

  /* Monospace numbers everywhere for data alignment */
  .tabular-nums {
    font-variant-numeric: tabular-nums;
  }
}

@layer utilities {
  .transition-smooth {
    @apply transition-all duration-200 ease-in-out;
  }
}

/* â”€â”€â”€ Price Ticker Animation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
@keyframes ticker-scroll {
  0% { transform: translateX(0); }
  100% { transform: translateX(-50%); }
}

.ticker-scroll {
  animation: ticker-scroll 80s linear infinite;
}

.ticker-scroll:hover {
  animation-play-state: paused;
}

/* â”€â”€â”€ Reading progress bar animation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
@keyframes reading-bar {
  0% { width: 0%; }
  100% { width: 100%; }
}

.animate-reading-bar {
  animation: reading-bar 5s ease-in-out forwards;
}

/* â”€â”€â”€ Scrollbar styling (Bloomberg-style) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: #000;
}

::-webkit-scrollbar-thumb {
  background: #222;
  border-radius: 0;
}

::-webkit-scrollbar-thumb:hover {
  background: #333;
}

/* â”€â”€â”€ Selection color â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
::selection {
  background: #FABF2C;
  color: #000;
}
@layer base {
  body {
    @apply antialiased selection:bg-primary selection:text-black;
    text-rendering: optimizeLegibility;
  }
  .font-heading {
    letter-spacing: -0.02em;
  }
}

@keyframes marquee {
  0% { transform: translateX(0); }
  100% { transform: translateX(-50%); }
}

.animate-marquee {
  display: flex;
  width: max-content;
  animation: marquee 40s linear infinite;
}

.animate-marquee:hover {
  animation-play-state: paused;
}
/* Institutional Typography Tweak */
h1, h2, h3, h4 {
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
}

/* Custom Scrollbar for Terminal Feel */
::-webkit-scrollbar {
  width: 4px;
}
::-webkit-scrollbar-track {
  background: #050505;
}
::-webkit-scrollbar-thumb {
  background: #1a1a1a;
}
::-webkit-scrollbar-thumb:hover {
  background: #FABF2C;
}


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âš™ï¸  CONFIG FILES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: next.config.ts
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import type { NextConfig } from 'next';

const nextConfig: NextConfig = {
  images: {
    remotePatterns: [
      { protocol: 'https', hostname: 'assets.coingecko.com' },
      { protocol: 'https', hostname: 'images.cryptocompare.com' },
      { protocol: 'https', hostname: 'img.rocket.new' }, // Keep for legacy mock data
      { protocol: 'https', hostname: 'images.unsplash.com' },
    ],
    dangerouslyAllowSVG: true,
  },
  experimental: {
    serverActions: {
      allowedOrigins: ['*'], // Required for IDX/Vercel flexibility
    },
  },
  // Security Headers
  async headers() {
    return [
      {
        source: '/(.*)',
        headers: [
          { key: 'X-Frame-Options', value: 'DENY' },
          { key: 'X-Content-Type-Options', value: 'nosniff' },
          { key: 'Referrer-Policy', value: 'origin-when-cross-origin' },
        ],
      },
    ];
  },
  // Redirects (Consolidating Routes)
  async redirects() {
    return [
      { source: '/homepage', destination: '/', permanent: true },
    ];
  },
};

export default nextConfig;

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: tsconfig.json
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
{
  "compilerOptions": {
    "target": "ES2017",
    "lib": ["dom", "dom.iterable", "esnext"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "react-jsx",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {
      "@/*": ["./src/*"]
    }
  },
  "include": [
    "next-env.d.ts",
    "**/*.ts",
    "**/*.tsx",
    ".next/types/**/*.ts",
    ".next/dev/types/**/*.ts",
    "**/*.mts"
  ],
  "exclude": ["node_modules"]
}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: tailwind.config.ts
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import type { Config } from "tailwindcss";

const config: Config = {
  darkMode: ["class"],
  content: [
    './src/**/*.{ts,tsx,js,jsx}', // âœ… The only path that matters
  ],
  theme: {
    container: {
      center: true,
      padding: "2rem",
      screens: {
        "2xl": "1400px",
      },
    },
    extend: {
      fontFamily: {
        heading: ['var(--font-heading)', 'serif'],
        body: ['var(--font-body)', 'sans-serif'],
        caption: ['var(--font-caption)', 'monospace'],
        data: ['var(--font-data)', 'monospace'],
      },
      colors: {
        border: "var(--color-border)",
        input: "var(--color-input)",
        ring: "var(--color-ring)",
        background: "var(--color-background)",
        foreground: "var(--color-foreground)",
        primary: {
          DEFAULT: "var(--color-primary)",
          foreground: "var(--color-primary-foreground)",
        },
        secondary: {
          DEFAULT: "var(--color-secondary)",
          foreground: "var(--color-secondary-foreground)",
        },
        card: {
          DEFAULT: "var(--color-card)",
          foreground: "var(--color-card-foreground)",
        },
        muted: {
          DEFAULT: "var(--color-muted)",
          foreground: "var(--color-muted-foreground)",
        },
        destructive: {
          DEFAULT: "var(--color-destructive)",
          foreground: "var(--color-destructive-foreground)",
        },
      },
    },
  },
  plugins: [require("tailwindcss-animate"), require("@tailwindcss/typography")],
};
export default config;
// Add this to theme.extend
// animation: {
//   marquee: 'marquee 60s linear infinite',
// },
// keyframes: {
//   marquee: {
//     '0%': { transform: 'translateX(0%)' },
//     '100%': { transform: 'translateX(-100%)' },
//   },
// }

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: postcss.config.mjs
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
export default {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
};

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: eslint.config.mjs
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import { defineConfig, globalIgnores } from "eslint/config";
import nextVitals from "eslint-config-next/core-web-vitals";
import nextTs from "eslint-config-next/typescript";

const eslintConfig = defineConfig([
  ...nextVitals,
  ...nextTs,
  // Override default ignores of eslint-config-next.
  globalIgnores([
    // Default ignores of eslint-config-next:
    ".next/**",
    "out/**",
    "build/**",
    "next-env.d.ts",
  ]),
]);

export default eslintConfig;

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š SENTRY CONFIGURATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: sentry.client.config.ts
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import * as Sentry from '@sentry/nextjs';

Sentry.init({
  dsn: process.env.NEXT_PUBLIC_SENTRY_DSN,
  tracesSampleRate: 0.1,
  replaysSessionSampleRate: 0.01,
  replaysOnErrorSampleRate: 1.0,
  environment: process.env.NODE_ENV,
  enabled: process.env.NODE_ENV === 'production',
});

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: sentry.server.config.ts
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import * as Sentry from '@sentry/nextjs';

Sentry.init({
  dsn: process.env.NEXT_PUBLIC_SENTRY_DSN,
  tracesSampleRate: 0.1,
  environment: process.env.NODE_ENV,
  enabled: process.env.NODE_ENV === 'production',
});

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: sentry.edge.config.ts
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import * as Sentry from '@sentry/nextjs';

Sentry.init({
  dsn: process.env.NEXT_PUBLIC_SENTRY_DSN,
  tracesSampleRate: 0.1,
  environment: process.env.NODE_ENV,
  enabled: process.env.NODE_ENV === 'production',
});

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… EXPORT COMPLETE
ğŸ“Š Total files included: 139
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
